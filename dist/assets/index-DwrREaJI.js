function GP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var KP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YT={exports:{}},um={},XT={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),ZP=Symbol.for("react.portal"),QP=Symbol.for("react.fragment"),YP=Symbol.for("react.strict_mode"),XP=Symbol.for("react.profiler"),JP=Symbol.for("react.provider"),eN=Symbol.for("react.context"),tN=Symbol.for("react.forward_ref"),nN=Symbol.for("react.suspense"),rN=Symbol.for("react.memo"),iN=Symbol.for("react.lazy"),gx=Symbol.iterator;function sN(t){return t===null||typeof t!="object"?null:(t=gx&&t[gx]||t["@@iterator"],typeof t=="function"?t:null)}var JT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eb=Object.assign,tb={};function Cl(t,e,n){this.props=t,this.context=e,this.refs=tb,this.updater=n||JT}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nb(){}nb.prototype=Cl.prototype;function ay(t,e,n){this.props=t,this.context=e,this.refs=tb,this.updater=n||JT}var ly=ay.prototype=new nb;ly.constructor=ay;eb(ly,Cl.prototype);ly.isPureReactComponent=!0;var _x=Array.isArray,rb=Object.prototype.hasOwnProperty,cy={current:null},ib={key:!0,ref:!0,__self:!0,__source:!0};function sb(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)rb.call(e,r)&&!ib.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),m=0;m<c;m++)u[m]=arguments[m+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Yu,type:t,key:s,ref:a,props:i,_owner:cy.current}}function oN(t,e){return{$$typeof:Yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yu}function aN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yx=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aN(""+t.key):e.toString(36)}function Rd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Yu:case ZP:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Tp(a,0):r,_x(i)?(n="",t!=null&&(n=t.replace(yx,"$&/")+"/"),Rd(i,e,n,"",function(m){return m})):i!=null&&(uy(i)&&(i=oN(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(yx,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",_x(t))for(var c=0;c<t.length;c++){s=t[c];var u=r+Tp(s,c);a+=Rd(s,e,n,u,i)}else if(u=sN(t),typeof u=="function")for(t=u.call(t),c=0;!(s=t.next()).done;)s=s.value,u=r+Tp(s,c++),a+=Rd(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function od(t,e,n){if(t==null)return t;var r=[],i=0;return Rd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Ld={transition:null},cN={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:cy};function ob(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:od,forEach:function(t,e,n){od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return od(t,function(){e++}),e},toArray:function(t){return od(t,function(e){return e})||[]},only:function(t){if(!uy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Cl;Se.Fragment=QP;Se.Profiler=XP;Se.PureComponent=ay;Se.StrictMode=YP;Se.Suspense=nN;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cN;Se.act=ob;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eb({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)rb.call(e,u)&&!ib.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var m=0;m<u;m++)c[m]=arguments[m+2];r.children=c}return{$$typeof:Yu,type:t.type,key:i,ref:s,props:r,_owner:a}};Se.createContext=function(t){return t={$$typeof:eN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JP,_context:t},t.Consumer=t};Se.createElement=sb;Se.createFactory=function(t){var e=sb.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:tN,render:t}};Se.isValidElement=uy;Se.lazy=function(t){return{$$typeof:iN,_payload:{_status:-1,_result:t},_init:lN}};Se.memo=function(t,e){return{$$typeof:rN,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Ld.transition;Ld.transition={};try{t()}finally{Ld.transition=e}};Se.unstable_act=ob;Se.useCallback=function(t,e){return dn.current.useCallback(t,e)};Se.useContext=function(t){return dn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return dn.current.useEffect(t,e)};Se.useId=function(){return dn.current.useId()};Se.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return dn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};Se.useRef=function(t){return dn.current.useRef(t)};Se.useState=function(t){return dn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return dn.current.useTransition()};Se.version="18.3.1";XT.exports=Se;var B=XT.exports;const ab=QT(B),uN=GP({__proto__:null,default:ab},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN=B,dN=Symbol.for("react.element"),fN=Symbol.for("react.fragment"),mN=Object.prototype.hasOwnProperty,pN=hN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gN={key:!0,ref:!0,__self:!0,__source:!0};function lb(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)mN.call(e,r)&&!gN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dN,type:t,key:s,ref:a,props:i,_owner:pN.current}}um.Fragment=fN;um.jsx=lb;um.jsxs=lb;YT.exports=um;var d=YT.exports,yg={},cb={exports:{}},On={},ub={exports:{}},hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ne){var Y=K.length;K.push(ne);e:for(;0<Y;){var ce=Y-1>>>1,xe=K[ce];if(0<i(xe,ne))K[ce]=ne,K[Y]=xe,Y=ce;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ne=K[0],Y=K.pop();if(Y!==ne){K[0]=Y;e:for(var ce=0,xe=K.length,Pe=xe>>>1;ce<Pe;){var Fe=2*(ce+1)-1,Ee=K[Fe],ge=Fe+1,Ct=K[ge];if(0>i(Ee,Y))ge<xe&&0>i(Ct,Ee)?(K[ce]=Ct,K[ge]=Y,ce=ge):(K[ce]=Ee,K[Fe]=Y,ce=Fe);else if(ge<xe&&0>i(Ct,Y))K[ce]=Ct,K[ge]=Y,ce=ge;else break e}}return ne}function i(K,ne){var Y=K.sortIndex-ne.sortIndex;return Y!==0?Y:K.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],m=[],g=1,_=null,x=3,E=!1,C=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var ne=n(m);ne!==null;){if(ne.callback===null)r(m);else if(ne.startTime<=K)r(m),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(m)}}function O(K){if(N=!1,S(K),!C)if(n(u)!==null)C=!0,ut(z);else{var ne=n(m);ne!==null&&Nt(O,ne.startTime-K)}}function z(K,ne){C=!1,N&&(N=!1,b(P),P=-1),E=!0;var Y=x;try{for(S(ne),_=n(u);_!==null&&(!(_.expirationTime>ne)||K&&!V());){var ce=_.callback;if(typeof ce=="function"){_.callback=null,x=_.priorityLevel;var xe=ce(_.expirationTime<=ne);ne=t.unstable_now(),typeof xe=="function"?_.callback=xe:_===n(u)&&r(u),S(ne)}else r(u);_=n(u)}if(_!==null)var Pe=!0;else{var Fe=n(m);Fe!==null&&Nt(O,Fe.startTime-ne),Pe=!1}return Pe}finally{_=null,x=Y,E=!1}}var H=!1,A=null,P=-1,R=5,j=-1;function V(){return!(t.unstable_now()-j<R)}function U(){if(A!==null){var K=t.unstable_now();j=K;var ne=!0;try{ne=A(!0,K)}finally{ne?D():(H=!1,A=null)}}else H=!1}var D;if(typeof I=="function")D=function(){I(U)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Dn=Qe.port2;Qe.port1.onmessage=U,D=function(){Dn.postMessage(null)}}else D=function(){M(U,0)};function ut(K){A=K,H||(H=!0,D())}function Nt(K,ne){P=M(function(){K(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){C||E||(C=!0,ut(z))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var Y=x;x=ne;try{return K()}finally{x=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ne){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=x;x=K;try{return ne()}finally{x=Y}},t.unstable_scheduleCallback=function(K,ne,Y){var ce=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ce+Y:ce):Y=ce,K){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Y+xe,K={id:g++,callback:ne,priorityLevel:K,startTime:Y,expirationTime:xe,sortIndex:-1},Y>ce?(K.sortIndex=Y,e(m,K),n(u)===null&&K===n(m)&&(N?(b(P),P=-1):N=!0,Nt(O,Y-ce))):(K.sortIndex=xe,e(u,K),C||E||(C=!0,ut(z))),K},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(K){var ne=x;return function(){var Y=x;x=ne;try{return K.apply(this,arguments)}finally{x=Y}}}})(hb);ub.exports=hb;var _N=ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN=B,Ln=_N;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var db=new Set,gu={};function Do(t,e){nl(t,e),nl(t+"Capture",e)}function nl(t,e){for(gu[t]=e,t=0;t<e.length;t++)db.add(e[t])}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vg=Object.prototype.hasOwnProperty,vN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vx={},xx={};function xN(t){return vg.call(xx,t)?!0:vg.call(vx,t)?!1:vN.test(t)?xx[t]=!0:(vx[t]=!0,!1)}function wN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EN(t,e,n,r){if(e===null||typeof e>"u"||wN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var hy=/[\-:]([a-z])/g;function dy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hy,dy);Kt[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hy,dy);Kt[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hy,dy);Kt[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function fy(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EN(e,n,i,r)&&(n=null),r||i===null?xN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Li=yN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ad=Symbol.for("react.element"),Sa=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),fb=Symbol.for("react.provider"),mb=Symbol.for("react.context"),py=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),gy=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),pb=Symbol.for("react.offscreen"),wx=Symbol.iterator;function bc(t){return t===null||typeof t!="object"?null:(t=wx&&t[wx]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,bp;function Fc(t){if(bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var Ip=!1;function Cp(t,e){if(!t||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fc(t):""}function TN(t){switch(t.tag){case 5:return Fc(t.type);case 16:return Fc("Lazy");case 13:return Fc("Suspense");case 19:return Fc("SuspenseList");case 0:case 2:case 15:return t=Cp(t.type,!1),t;case 11:return t=Cp(t.type.render,!1),t;case 1:return t=Cp(t.type,!0),t;default:return""}}function Tg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Sa:return"Portal";case xg:return"Profiler";case my:return"StrictMode";case wg:return"Suspense";case Eg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mb:return(t.displayName||"Context")+".Consumer";case fb:return(t._context.displayName||"Context")+".Provider";case py:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gy:return e=t.displayName||null,e!==null?e:Tg(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return Tg(t(e))}catch{}}return null}function bN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tg(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IN(t){var e=gb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ld(t){t._valueTracker||(t._valueTracker=IN(t))}function _b(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bg(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ex(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yb(t,e){e=e.checked,e!=null&&fy(t,"checked",e,!1)}function Ig(t,e){yb(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cg(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cg(t,e,n){(e!=="number"||Jd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vc=Array.isArray;function Ba(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Vc(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function vb(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ix(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cd,wb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _u(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CN=["Webkit","ms","Moz","O"];Object.keys(Gc).forEach(function(t){CN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gc[e]=Gc[t]})});function Eb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gc.hasOwnProperty(t)&&Gc[t]?(""+e).trim():e+"px"}function Tb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Eb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kN=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pg(t,e){if(e){if(kN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Ng(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function _y(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rg=null,Wa=null,qa=null;function Cx(t){if(t=eh(t)){if(typeof Rg!="function")throw Error(J(280));var e=t.stateNode;e&&(e=pm(e),Rg(t.stateNode,t.type,e))}}function bb(t){Wa?qa?qa.push(t):qa=[t]:Wa=t}function Ib(){if(Wa){var t=Wa,e=qa;if(qa=Wa=null,Cx(t),e)for(t=0;t<e.length;t++)Cx(e[t])}}function Cb(t,e){return t(e)}function kb(){}var kp=!1;function Sb(t,e,n){if(kp)return t(e,n);kp=!0;try{return Cb(t,e,n)}finally{kp=!1,(Wa!==null||qa!==null)&&(kb(),Ib())}}function yu(t,e){var n=t.stateNode;if(n===null)return null;var r=pm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Lg=!1;if(wi)try{var Ic={};Object.defineProperty(Ic,"passive",{get:function(){Lg=!0}}),window.addEventListener("test",Ic,Ic),window.removeEventListener("test",Ic,Ic)}catch{Lg=!1}function SN(t,e,n,r,i,s,a,c,u){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(g){this.onError(g)}}var Kc=!1,ef=null,tf=!1,Mg=null,PN={onError:function(t){Kc=!0,ef=t}};function NN(t,e,n,r,i,s,a,c,u){Kc=!1,ef=null,SN.apply(PN,arguments)}function AN(t,e,n,r,i,s,a,c,u){if(NN.apply(this,arguments),Kc){if(Kc){var m=ef;Kc=!1,ef=null}else throw Error(J(198));tf||(tf=!0,Mg=m)}}function Fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kx(t){if(Fo(t)!==t)throw Error(J(188))}function RN(t){var e=t.alternate;if(!e){if(e=Fo(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return kx(i),t;if(s===r)return kx(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Nb(t){return t=RN(t),t!==null?Ab(t):null}function Ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ab(t);if(e!==null)return e;t=t.sibling}return null}var Rb=Ln.unstable_scheduleCallback,Sx=Ln.unstable_cancelCallback,LN=Ln.unstable_shouldYield,MN=Ln.unstable_requestPaint,pt=Ln.unstable_now,ON=Ln.unstable_getCurrentPriorityLevel,yy=Ln.unstable_ImmediatePriority,Lb=Ln.unstable_UserBlockingPriority,nf=Ln.unstable_NormalPriority,jN=Ln.unstable_LowPriority,Mb=Ln.unstable_IdlePriority,hm=null,jr=null;function DN(t){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(hm,t,void 0,(t.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:UN,FN=Math.log,VN=Math.LN2;function UN(t){return t>>>=0,t===0?32:31-(FN(t)/VN|0)|0}var ud=64,hd=4194304;function Uc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=Uc(c):(s&=a,s!==0&&(r=Uc(s)))}else a=n&~i,a!==0?r=Uc(a):s!==0&&(r=Uc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gr(e),i=1<<n,r|=t[n],e&=~i;return r}function zN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-gr(s),c=1<<a,u=i[a];u===-1?(!(c&n)||c&r)&&(i[a]=zN(c,e)):u<=e&&(t.expiredLanes|=c),s&=~c}}function Og(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ob(){var t=ud;return ud<<=1,!(ud&4194240)&&(ud=64),t}function Sp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gr(e),t[e]=n}function WN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ze=0;function jb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Db,xy,Fb,Vb,Ub,jg=!1,dd=[],cs=null,us=null,hs=null,vu=new Map,xu=new Map,es=[],qN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Px(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function Cc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eh(e),e!==null&&xy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function HN(t,e,n,r,i){switch(e){case"focusin":return cs=Cc(cs,t,e,n,r,i),!0;case"dragenter":return us=Cc(us,t,e,n,r,i),!0;case"mouseover":return hs=Cc(hs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vu.set(s,Cc(vu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xu.set(s,Cc(xu.get(s)||null,t,e,n,r,i)),!0}return!1}function zb(t){var e=ao(t.target);if(e!==null){var n=Fo(e);if(n!==null){if(e=n.tag,e===13){if(e=Pb(n),e!==null){t.blockedOn=e,Ub(t.priority,function(){Fb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Md(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ag=r,n.target.dispatchEvent(r),Ag=null}else return e=eh(n),e!==null&&xy(e),t.blockedOn=n,!1;e.shift()}return!0}function Nx(t,e,n){Md(t)&&n.delete(e)}function $N(){jg=!1,cs!==null&&Md(cs)&&(cs=null),us!==null&&Md(us)&&(us=null),hs!==null&&Md(hs)&&(hs=null),vu.forEach(Nx),xu.forEach(Nx)}function kc(t,e){t.blockedOn===e&&(t.blockedOn=null,jg||(jg=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,$N)))}function wu(t){function e(i){return kc(i,t)}if(0<dd.length){kc(dd[0],t);for(var n=1;n<dd.length;n++){var r=dd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cs!==null&&kc(cs,t),us!==null&&kc(us,t),hs!==null&&kc(hs,t),vu.forEach(e),xu.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)zb(n),n.blockedOn===null&&es.shift()}var Ha=Li.ReactCurrentBatchConfig,sf=!0;function GN(t,e,n,r){var i=ze,s=Ha.transition;Ha.transition=null;try{ze=1,wy(t,e,n,r)}finally{ze=i,Ha.transition=s}}function KN(t,e,n,r){var i=ze,s=Ha.transition;Ha.transition=null;try{ze=4,wy(t,e,n,r)}finally{ze=i,Ha.transition=s}}function wy(t,e,n,r){if(sf){var i=Dg(t,e,n,r);if(i===null)Fp(t,e,r,of,n),Px(t,r);else if(HN(i,t,e,n,r))r.stopPropagation();else if(Px(t,r),e&4&&-1<qN.indexOf(t)){for(;i!==null;){var s=eh(i);if(s!==null&&Db(s),s=Dg(t,e,n,r),s===null&&Fp(t,e,r,of,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fp(t,e,r,null,n)}}var of=null;function Dg(t,e,n,r){if(of=null,t=_y(r),t=ao(t),t!==null)if(e=Fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return of=t,null}function Bb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ON()){case yy:return 1;case Lb:return 4;case nf:case jN:return 16;case Mb:return 536870912;default:return 16}default:return 16}}var ss=null,Ey=null,Od=null;function Wb(){if(Od)return Od;var t,e=Ey,n=e.length,r,i="value"in ss?ss.value:ss.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Od=i.slice(t,1<r?1-r:void 0)}function jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function Ax(){return!1}function jn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fd:Ax,this.isPropagationStopped=Ax,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=jn(kl),Ju=ct({},kl,{view:0,detail:0}),ZN=jn(Ju),Pp,Np,Sc,dm=ct({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:by,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sc&&(Sc&&t.type==="mousemove"?(Pp=t.screenX-Sc.screenX,Np=t.screenY-Sc.screenY):Np=Pp=0,Sc=t),Pp)},movementY:function(t){return"movementY"in t?t.movementY:Np}}),Rx=jn(dm),QN=ct({},dm,{dataTransfer:0}),YN=jn(QN),XN=ct({},Ju,{relatedTarget:0}),Ap=jn(XN),JN=ct({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),eA=jn(JN),tA=ct({},kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nA=jn(tA),rA=ct({},kl,{data:0}),Lx=jn(rA),iA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oA[t])?!!e[t]:!1}function by(){return aA}var lA=ct({},Ju,{key:function(t){if(t.key){var e=iA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:by,charCode:function(t){return t.type==="keypress"?jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cA=jn(lA),uA=ct({},dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=jn(uA),hA=ct({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:by}),dA=jn(hA),fA=ct({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mA=jn(fA),pA=ct({},dm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gA=jn(pA),_A=[9,13,27,32],Iy=wi&&"CompositionEvent"in window,Zc=null;wi&&"documentMode"in document&&(Zc=document.documentMode);var yA=wi&&"TextEvent"in window&&!Zc,qb=wi&&(!Iy||Zc&&8<Zc&&11>=Zc),Ox=" ",jx=!1;function Hb(t,e){switch(t){case"keyup":return _A.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $b(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Na=!1;function vA(t,e){switch(t){case"compositionend":return $b(e);case"keypress":return e.which!==32?null:(jx=!0,Ox);case"textInput":return t=e.data,t===Ox&&jx?null:t;default:return null}}function xA(t,e){if(Na)return t==="compositionend"||!Iy&&Hb(t,e)?(t=Wb(),Od=Ey=ss=null,Na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qb&&e.locale!=="ko"?null:e.data;default:return null}}var wA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wA[t.type]:e==="textarea"}function Gb(t,e,n,r){bb(r),e=af(e,"onChange"),0<e.length&&(n=new Ty("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qc=null,Eu=null;function EA(t){iI(t,0)}function fm(t){var e=La(t);if(_b(e))return t}function TA(t,e){if(t==="change")return e}var Kb=!1;if(wi){var Rp;if(wi){var Lp="oninput"in document;if(!Lp){var Fx=document.createElement("div");Fx.setAttribute("oninput","return;"),Lp=typeof Fx.oninput=="function"}Rp=Lp}else Rp=!1;Kb=Rp&&(!document.documentMode||9<document.documentMode)}function Vx(){Qc&&(Qc.detachEvent("onpropertychange",Zb),Eu=Qc=null)}function Zb(t){if(t.propertyName==="value"&&fm(Eu)){var e=[];Gb(e,Eu,t,_y(t)),Sb(EA,e)}}function bA(t,e,n){t==="focusin"?(Vx(),Qc=e,Eu=n,Qc.attachEvent("onpropertychange",Zb)):t==="focusout"&&Vx()}function IA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fm(Eu)}function CA(t,e){if(t==="click")return fm(e)}function kA(t,e){if(t==="input"||t==="change")return fm(e)}function SA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:SA;function Tu(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vg.call(e,i)||!wr(t[i],e[i]))return!1}return!0}function Ux(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zx(t,e){var n=Ux(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ux(n)}}function Qb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yb(){for(var t=window,e=Jd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jd(t.document)}return e}function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PA(t){var e=Yb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qb(n.ownerDocument.documentElement,n)){if(r!==null&&Cy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zx(n,s);var a=zx(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NA=wi&&"documentMode"in document&&11>=document.documentMode,Aa=null,Fg=null,Yc=null,Vg=!1;function Bx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vg||Aa==null||Aa!==Jd(r)||(r=Aa,"selectionStart"in r&&Cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yc&&Tu(Yc,r)||(Yc=r,r=af(Fg,"onSelect"),0<r.length&&(e=new Ty("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Aa)))}function md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ra={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},Mp={},Xb={};wi&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function mm(t){if(Mp[t])return Mp[t];if(!Ra[t])return t;var e=Ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xb)return Mp[t]=e[n];return t}var Jb=mm("animationend"),eI=mm("animationiteration"),tI=mm("animationstart"),nI=mm("transitionend"),rI=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){rI.set(t,e),Do(e,[t])}for(var Op=0;Op<Wx.length;Op++){var jp=Wx[Op],AA=jp.toLowerCase(),RA=jp[0].toUpperCase()+jp.slice(1);As(AA,"on"+RA)}As(Jb,"onAnimationEnd");As(eI,"onAnimationIteration");As(tI,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(nI,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("cancel close invalid load scroll toggle".split(" ").concat(zc));function qx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AN(r,e,void 0,t),t.currentTarget=null}function iI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,m=c.currentTarget;if(c=c.listener,u!==s&&i.isPropagationStopped())break e;qx(i,c,m),s=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,m=c.currentTarget,c=c.listener,u!==s&&i.isPropagationStopped())break e;qx(i,c,m),s=u}}}if(tf)throw t=Mg,tf=!1,Mg=null,t}function Ye(t,e){var n=e[qg];n===void 0&&(n=e[qg]=new Set);var r=t+"__bubble";n.has(r)||(sI(e,t,2,!1),n.add(r))}function Dp(t,e,n){var r=0;e&&(r|=4),sI(n,t,r,e)}var pd="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[pd]){t[pd]=!0,db.forEach(function(n){n!=="selectionchange"&&(LA.has(n)||Dp(n,!1,t),Dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pd]||(e[pd]=!0,Dp("selectionchange",!1,e))}}function sI(t,e,n,r){switch(Bb(e)){case 1:var i=GN;break;case 4:i=KN;break;default:i=wy}n=i.bind(null,e,n,t),i=void 0,!Lg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;c!==null;){if(a=ao(c),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}c=c.parentNode}}r=r.return}Sb(function(){var m=s,g=_y(n),_=[];e:{var x=rI.get(t);if(x!==void 0){var E=Ty,C=t;switch(t){case"keypress":if(jd(n)===0)break e;case"keydown":case"keyup":E=cA;break;case"focusin":C="focus",E=Ap;break;case"focusout":C="blur",E=Ap;break;case"beforeblur":case"afterblur":E=Ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Rx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=YN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=dA;break;case Jb:case eI:case tI:E=eA;break;case nI:E=mA;break;case"scroll":E=ZN;break;case"wheel":E=gA;break;case"copy":case"cut":case"paste":E=nA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Mx}var N=(e&4)!==0,M=!N&&t==="scroll",b=N?x!==null?x+"Capture":null:x;N=[];for(var I=m,S;I!==null;){S=I;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,b!==null&&(O=yu(I,b),O!=null&&N.push(Iu(I,O,S)))),M)break;I=I.return}0<N.length&&(x=new E(x,C,null,n,g),_.push({event:x,listeners:N}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",x&&n!==Ag&&(C=n.relatedTarget||n.fromElement)&&(ao(C)||C[Ei]))break e;if((E||x)&&(x=g.window===g?g:(x=g.ownerDocument)?x.defaultView||x.parentWindow:window,E?(C=n.relatedTarget||n.toElement,E=m,C=C?ao(C):null,C!==null&&(M=Fo(C),C!==M||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=m),E!==C)){if(N=Rx,O="onMouseLeave",b="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(N=Mx,O="onPointerLeave",b="onPointerEnter",I="pointer"),M=E==null?x:La(E),S=C==null?x:La(C),x=new N(O,I+"leave",E,n,g),x.target=M,x.relatedTarget=S,O=null,ao(g)===m&&(N=new N(b,I+"enter",C,n,g),N.target=S,N.relatedTarget=M,O=N),M=O,E&&C)t:{for(N=E,b=C,I=0,S=N;S;S=wa(S))I++;for(S=0,O=b;O;O=wa(O))S++;for(;0<I-S;)N=wa(N),I--;for(;0<S-I;)b=wa(b),S--;for(;I--;){if(N===b||b!==null&&N===b.alternate)break t;N=wa(N),b=wa(b)}N=null}else N=null;E!==null&&Hx(_,x,E,N,!1),C!==null&&M!==null&&Hx(_,M,C,N,!0)}}e:{if(x=m?La(m):window,E=x.nodeName&&x.nodeName.toLowerCase(),E==="select"||E==="input"&&x.type==="file")var z=TA;else if(Dx(x))if(Kb)z=kA;else{z=IA;var H=bA}else(E=x.nodeName)&&E.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(z=CA);if(z&&(z=z(t,m))){Gb(_,z,n,g);break e}H&&H(t,x,m),t==="focusout"&&(H=x._wrapperState)&&H.controlled&&x.type==="number"&&Cg(x,"number",x.value)}switch(H=m?La(m):window,t){case"focusin":(Dx(H)||H.contentEditable==="true")&&(Aa=H,Fg=m,Yc=null);break;case"focusout":Yc=Fg=Aa=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,Bx(_,n,g);break;case"selectionchange":if(NA)break;case"keydown":case"keyup":Bx(_,n,g)}var A;if(Iy)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Na?Hb(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(qb&&n.locale!=="ko"&&(Na||P!=="onCompositionStart"?P==="onCompositionEnd"&&Na&&(A=Wb()):(ss=g,Ey="value"in ss?ss.value:ss.textContent,Na=!0)),H=af(m,P),0<H.length&&(P=new Lx(P,t,null,n,g),_.push({event:P,listeners:H}),A?P.data=A:(A=$b(n),A!==null&&(P.data=A)))),(A=yA?vA(t,n):xA(t,n))&&(m=af(m,"onBeforeInput"),0<m.length&&(g=new Lx("onBeforeInput","beforeinput",null,n,g),_.push({event:g,listeners:m}),g.data=A))}iI(_,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function af(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yu(t,n),s!=null&&r.unshift(Iu(t,s,i)),s=yu(t,e),s!=null&&r.push(Iu(t,s,i))),t=t.return}return r}function wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hx(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,m=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&m!==null&&(c=m,i?(u=yu(n,s),u!=null&&a.unshift(Iu(n,u,c))):i||(u=yu(n,s),u!=null&&a.push(Iu(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var MA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function $x(t){return(typeof t=="string"?t:""+t).replace(MA,`
`).replace(OA,"")}function gd(t,e,n){if(e=$x(e),$x(t)!==e&&n)throw Error(J(425))}function lf(){}var Ug=null,zg=null;function Bg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wg=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,Gx=typeof Promise=="function"?Promise:void 0,DA=typeof queueMicrotask=="function"?queueMicrotask:typeof Gx<"u"?function(t){return Gx.resolve(null).then(t).catch(FA)}:Wg;function FA(t){setTimeout(function(){throw t})}function Vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wu(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Sl,Cu="__reactProps$"+Sl,Ei="__reactContainer$"+Sl,qg="__reactEvents$"+Sl,VA="__reactListeners$"+Sl,UA="__reactHandles$"+Sl;function ao(t){var e=t[Lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ei]||n[Lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kx(t);t!==null;){if(n=t[Lr])return n;t=Kx(t)}return e}t=n,n=t.parentNode}return null}function eh(t){return t=t[Lr]||t[Ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function La(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function pm(t){return t[Cu]||null}var Hg=[],Ma=-1;function Rs(t){return{current:t}}function et(t){0>Ma||(t.current=Hg[Ma],Hg[Ma]=null,Ma--)}function Ze(t,e){Ma++,Hg[Ma]=t.current,t.current=e}var Ts={},sn=Rs(Ts),wn=Rs(!1),xo=Ts;function rl(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function En(t){return t=t.childContextTypes,t!=null}function cf(){et(wn),et(sn)}function Zx(t,e,n){if(sn.current!==Ts)throw Error(J(168));Ze(sn,e),Ze(wn,n)}function oI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,bN(t)||"Unknown",i));return ct({},n,r)}function uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,xo=sn.current,Ze(sn,t),Ze(wn,wn.current),!0}function Qx(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=oI(t,e,xo),r.__reactInternalMemoizedMergedChildContext=t,et(wn),et(sn),Ze(sn,t)):et(wn),Ze(wn,n)}var ai=null,gm=!1,Up=!1;function aI(t){ai===null?ai=[t]:ai.push(t)}function zA(t){gm=!0,aI(t)}function Ls(){if(!Up&&ai!==null){Up=!0;var t=0,e=ze;try{var n=ai;for(ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ai=null,gm=!1}catch(i){throw ai!==null&&(ai=ai.slice(t+1)),Rb(yy,Ls),i}finally{ze=e,Up=!1}}return null}var Oa=[],ja=0,hf=null,df=0,$n=[],Gn=0,wo=null,ci=1,ui="";function no(t,e){Oa[ja++]=df,Oa[ja++]=hf,hf=t,df=e}function lI(t,e,n){$n[Gn++]=ci,$n[Gn++]=ui,$n[Gn++]=wo,wo=t;var r=ci;t=ui;var i=32-gr(r)-1;r&=~(1<<i),n+=1;var s=32-gr(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ci=1<<32-gr(e)+i|n<<i|r,ui=s+t}else ci=1<<s|n<<i|r,ui=t}function ky(t){t.return!==null&&(no(t,1),lI(t,1,0))}function Sy(t){for(;t===hf;)hf=Oa[--ja],Oa[ja]=null,df=Oa[--ja],Oa[ja]=null;for(;t===wo;)wo=$n[--Gn],$n[Gn]=null,ui=$n[--Gn],$n[Gn]=null,ci=$n[--Gn],$n[Gn]=null}var Rn=null,Nn=null,rt=!1,ur=null;function cI(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Nn=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wo!==null?{id:ci,overflow:ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Nn=null,!0):!1;default:return!1}}function $g(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gg(t){if(rt){var e=Nn;if(e){var n=e;if(!Yx(t,e)){if($g(t))throw Error(J(418));e=ds(n.nextSibling);var r=Rn;e&&Yx(t,e)?cI(r,n):(t.flags=t.flags&-4097|2,rt=!1,Rn=t)}}else{if($g(t))throw Error(J(418));t.flags=t.flags&-4097|2,rt=!1,Rn=t}}}function Xx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function _d(t){if(t!==Rn)return!1;if(!rt)return Xx(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bg(t.type,t.memoizedProps)),e&&(e=Nn)){if($g(t))throw uI(),Error(J(418));for(;e;)cI(t,e),e=ds(e.nextSibling)}if(Xx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=Rn?ds(t.stateNode.nextSibling):null;return!0}function uI(){for(var t=Nn;t;)t=ds(t.nextSibling)}function il(){Nn=Rn=null,rt=!1}function Py(t){ur===null?ur=[t]:ur.push(t)}var BA=Li.ReactCurrentBatchConfig;function Pc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jx(t){var e=t._init;return e(t._payload)}function hI(t){function e(b,I){if(t){var S=b.deletions;S===null?(b.deletions=[I],b.flags|=16):S.push(I)}}function n(b,I){if(!t)return null;for(;I!==null;)e(b,I),I=I.sibling;return null}function r(b,I){for(b=new Map;I!==null;)I.key!==null?b.set(I.key,I):b.set(I.index,I),I=I.sibling;return b}function i(b,I){return b=gs(b,I),b.index=0,b.sibling=null,b}function s(b,I,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<I?(b.flags|=2,I):S):(b.flags|=2,I)):(b.flags|=1048576,I)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,I,S,O){return I===null||I.tag!==6?(I=Gp(S,b.mode,O),I.return=b,I):(I=i(I,S),I.return=b,I)}function u(b,I,S,O){var z=S.type;return z===Pa?g(b,I,S.props.children,O,S.key):I!==null&&(I.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xi&&Jx(z)===I.type)?(O=i(I,S.props),O.ref=Pc(b,I,S),O.return=b,O):(O=Wd(S.type,S.key,S.props,null,b.mode,O),O.ref=Pc(b,I,S),O.return=b,O)}function m(b,I,S,O){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=Kp(S,b.mode,O),I.return=b,I):(I=i(I,S.children||[]),I.return=b,I)}function g(b,I,S,O,z){return I===null||I.tag!==7?(I=_o(S,b.mode,O,z),I.return=b,I):(I=i(I,S),I.return=b,I)}function _(b,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Gp(""+I,b.mode,S),I.return=b,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ad:return S=Wd(I.type,I.key,I.props,null,b.mode,S),S.ref=Pc(b,null,I),S.return=b,S;case Sa:return I=Kp(I,b.mode,S),I.return=b,I;case Xi:var O=I._init;return _(b,O(I._payload),S)}if(Vc(I)||bc(I))return I=_o(I,b.mode,S,null),I.return=b,I;yd(b,I)}return null}function x(b,I,S,O){var z=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return z!==null?null:c(b,I,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ad:return S.key===z?u(b,I,S,O):null;case Sa:return S.key===z?m(b,I,S,O):null;case Xi:return z=S._init,x(b,I,z(S._payload),O)}if(Vc(S)||bc(S))return z!==null?null:g(b,I,S,O,null);yd(b,S)}return null}function E(b,I,S,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(S)||null,c(I,b,""+O,z);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ad:return b=b.get(O.key===null?S:O.key)||null,u(I,b,O,z);case Sa:return b=b.get(O.key===null?S:O.key)||null,m(I,b,O,z);case Xi:var H=O._init;return E(b,I,S,H(O._payload),z)}if(Vc(O)||bc(O))return b=b.get(S)||null,g(I,b,O,z,null);yd(I,O)}return null}function C(b,I,S,O){for(var z=null,H=null,A=I,P=I=0,R=null;A!==null&&P<S.length;P++){A.index>P?(R=A,A=null):R=A.sibling;var j=x(b,A,S[P],O);if(j===null){A===null&&(A=R);break}t&&A&&j.alternate===null&&e(b,A),I=s(j,I,P),H===null?z=j:H.sibling=j,H=j,A=R}if(P===S.length)return n(b,A),rt&&no(b,P),z;if(A===null){for(;P<S.length;P++)A=_(b,S[P],O),A!==null&&(I=s(A,I,P),H===null?z=A:H.sibling=A,H=A);return rt&&no(b,P),z}for(A=r(b,A);P<S.length;P++)R=E(A,b,P,S[P],O),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?P:R.key),I=s(R,I,P),H===null?z=R:H.sibling=R,H=R);return t&&A.forEach(function(V){return e(b,V)}),rt&&no(b,P),z}function N(b,I,S,O){var z=bc(S);if(typeof z!="function")throw Error(J(150));if(S=z.call(S),S==null)throw Error(J(151));for(var H=z=null,A=I,P=I=0,R=null,j=S.next();A!==null&&!j.done;P++,j=S.next()){A.index>P?(R=A,A=null):R=A.sibling;var V=x(b,A,j.value,O);if(V===null){A===null&&(A=R);break}t&&A&&V.alternate===null&&e(b,A),I=s(V,I,P),H===null?z=V:H.sibling=V,H=V,A=R}if(j.done)return n(b,A),rt&&no(b,P),z;if(A===null){for(;!j.done;P++,j=S.next())j=_(b,j.value,O),j!==null&&(I=s(j,I,P),H===null?z=j:H.sibling=j,H=j);return rt&&no(b,P),z}for(A=r(b,A);!j.done;P++,j=S.next())j=E(A,b,P,j.value,O),j!==null&&(t&&j.alternate!==null&&A.delete(j.key===null?P:j.key),I=s(j,I,P),H===null?z=j:H.sibling=j,H=j);return t&&A.forEach(function(U){return e(b,U)}),rt&&no(b,P),z}function M(b,I,S,O){if(typeof S=="object"&&S!==null&&S.type===Pa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ad:e:{for(var z=S.key,H=I;H!==null;){if(H.key===z){if(z=S.type,z===Pa){if(H.tag===7){n(b,H.sibling),I=i(H,S.props.children),I.return=b,b=I;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xi&&Jx(z)===H.type){n(b,H.sibling),I=i(H,S.props),I.ref=Pc(b,H,S),I.return=b,b=I;break e}n(b,H);break}else e(b,H);H=H.sibling}S.type===Pa?(I=_o(S.props.children,b.mode,O,S.key),I.return=b,b=I):(O=Wd(S.type,S.key,S.props,null,b.mode,O),O.ref=Pc(b,I,S),O.return=b,b=O)}return a(b);case Sa:e:{for(H=S.key;I!==null;){if(I.key===H)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){n(b,I.sibling),I=i(I,S.children||[]),I.return=b,b=I;break e}else{n(b,I);break}else e(b,I);I=I.sibling}I=Kp(S,b.mode,O),I.return=b,b=I}return a(b);case Xi:return H=S._init,M(b,I,H(S._payload),O)}if(Vc(S))return C(b,I,S,O);if(bc(S))return N(b,I,S,O);yd(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(n(b,I.sibling),I=i(I,S),I.return=b,b=I):(n(b,I),I=Gp(S,b.mode,O),I.return=b,b=I),a(b)):n(b,I)}return M}var sl=hI(!0),dI=hI(!1),ff=Rs(null),mf=null,Da=null,Ny=null;function Ay(){Ny=Da=mf=null}function Ry(t){var e=ff.current;et(ff),t._currentValue=e}function Kg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $a(t,e){mf=t,Ny=Da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(Ny!==t)if(t={context:t,memoizedValue:e,next:null},Da===null){if(mf===null)throw Error(J(308));Da=t,mf.dependencies={lanes:0,firstContext:t}}else Da=Da.next=t;return e}var lo=null;function Ly(t){lo===null?lo=[t]:lo.push(t)}function fI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ly(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ti(t,r)}function Ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ji=!1;function My(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ti(t,n)}return i=r.interleaved,i===null?(e.next=e,Ly(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ti(t,n)}function Dd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vy(t,n)}}function ew(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pf(t,e,n,r){var i=t.updateQueue;Ji=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,m=u.next;u.next=null,a===null?s=m:a.next=m,a=u;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==a&&(c===null?g.firstBaseUpdate=m:c.next=m,g.lastBaseUpdate=u))}if(s!==null){var _=i.baseState;a=0,g=m=u=null,c=s;do{var x=c.lane,E=c.eventTime;if((r&x)===x){g!==null&&(g=g.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,N=c;switch(x=e,E=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){_=C.call(E,_,x);break e}_=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,x=typeof C=="function"?C.call(E,_,x):C,x==null)break e;_=ct({},_,x);break e;case 2:Ji=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,x=i.effects,x===null?i.effects=[c]:x.push(c))}else E={eventTime:E,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(m=g=E,u=_):g=g.next=E,a|=x;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;x=c,c=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(g===null&&(u=_),i.baseState=u,i.firstBaseUpdate=m,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);To|=a,t.lanes=a,t.memoizedState=_}}function tw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var th={},Dr=Rs(th),ku=Rs(th),Su=Rs(th);function co(t){if(t===th)throw Error(J(174));return t}function Oy(t,e){switch(Ze(Su,e),Ze(ku,t),Ze(Dr,th),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sg(e,t)}et(Dr),Ze(Dr,e)}function ol(){et(Dr),et(ku),et(Su)}function pI(t){co(Su.current);var e=co(Dr.current),n=Sg(e,t.type);e!==n&&(Ze(ku,t),Ze(Dr,n))}function jy(t){ku.current===t&&(et(Dr),et(ku))}var ot=Rs(0);function gf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zp=[];function Dy(){for(var t=0;t<zp.length;t++)zp[t]._workInProgressVersionPrimary=null;zp.length=0}var Fd=Li.ReactCurrentDispatcher,Bp=Li.ReactCurrentBatchConfig,Eo=0,lt=null,kt=null,jt=null,_f=!1,Xc=!1,Pu=0,WA=0;function Zt(){throw Error(J(321))}function Fy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function Vy(t,e,n,r,i,s){if(Eo=s,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fd.current=t===null||t.memoizedState===null?GA:KA,t=n(r,i),Xc){s=0;do{if(Xc=!1,Pu=0,25<=s)throw Error(J(301));s+=1,jt=kt=null,e.updateQueue=null,Fd.current=ZA,t=n(r,i)}while(Xc)}if(Fd.current=yf,e=kt!==null&&kt.next!==null,Eo=0,jt=kt=lt=null,_f=!1,e)throw Error(J(300));return t}function Uy(){var t=Pu!==0;return Pu=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?lt.memoizedState=jt=t:jt=jt.next=t,jt}function Jn(){if(kt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=jt===null?lt.memoizedState:jt.next;if(e!==null)jt=e,kt=t;else{if(t===null)throw Error(J(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},jt===null?lt.memoizedState=jt=t:jt=jt.next=t}return jt}function Nu(t,e){return typeof e=="function"?e(t):e}function Wp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,u=null,m=s;do{var g=m.lane;if((Eo&g)===g)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var _={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(c=u=_,a=r):u=u.next=_,lt.lanes|=g,To|=g}m=m.next}while(m!==null&&m!==s);u===null?a=r:u.next=c,wr(r,e.memoizedState)||(yn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,lt.lanes|=s,To|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);wr(s,e.memoizedState)||(yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function gI(){}function _I(t,e){var n=lt,r=Jn(),i=e(),s=!wr(r.memoizedState,i);if(s&&(r.memoizedState=i,yn=!0),r=r.queue,zy(xI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Au(9,vI.bind(null,n,r,i,e),void 0,null),Ut===null)throw Error(J(349));Eo&30||yI(n,e,i)}return i}function yI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vI(t,e,n,r){e.value=n,e.getSnapshot=r,wI(e)&&EI(t)}function xI(t,e,n){return n(function(){wI(e)&&EI(t)})}function wI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function EI(t){var e=Ti(t,1);e!==null&&_r(e,t,1,-1)}function nw(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:t},e.queue=t,t=t.dispatch=$A.bind(null,lt,t),[e.memoizedState,t]}function Au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TI(){return Jn().memoizedState}function Vd(t,e,n,r){var i=Rr();lt.flags|=t,i.memoizedState=Au(1|e,n,void 0,r===void 0?null:r)}function _m(t,e,n,r){var i=Jn();r=r===void 0?null:r;var s=void 0;if(kt!==null){var a=kt.memoizedState;if(s=a.destroy,r!==null&&Fy(r,a.deps)){i.memoizedState=Au(e,n,s,r);return}}lt.flags|=t,i.memoizedState=Au(1|e,n,s,r)}function rw(t,e){return Vd(8390656,8,t,e)}function zy(t,e){return _m(2048,8,t,e)}function bI(t,e){return _m(4,2,t,e)}function II(t,e){return _m(4,4,t,e)}function CI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kI(t,e,n){return n=n!=null?n.concat([t]):null,_m(4,4,CI.bind(null,e,t),n)}function By(){}function SI(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PI(t,e){var n=Jn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NI(t,e,n){return Eo&21?(wr(n,e)||(n=Ob(),lt.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yn=!0),t.memoizedState=n)}function qA(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var r=Bp.transition;Bp.transition={};try{t(!1),e()}finally{ze=n,Bp.transition=r}}function AI(){return Jn().memoizedState}function HA(t,e,n){var r=ps(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RI(t))LI(e,n);else if(n=fI(t,e,n,r),n!==null){var i=un();_r(n,t,r,i),MI(n,e,r)}}function $A(t,e,n){var r=ps(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RI(t))LI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,wr(c,a)){var u=e.interleaved;u===null?(i.next=i,Ly(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=fI(t,e,i,r),n!==null&&(i=un(),_r(n,t,r,i),MI(n,e,r))}}function RI(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function LI(t,e){Xc=_f=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vy(t,n)}}var yf={readContext:Xn,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},GA={readContext:Xn,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:rw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vd(4194308,4,CI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vd(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HA.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:nw,useDebugValue:By,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=nw(!1),e=t[0];return t=qA.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,i=Rr();if(rt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Ut===null)throw Error(J(349));Eo&30||yI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rw(xI.bind(null,r,s,t),[t]),r.flags|=2048,Au(9,vI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Ut.identifierPrefix;if(rt){var n=ui,r=ci;n=(r&~(1<<32-gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KA={readContext:Xn,useCallback:SI,useContext:Xn,useEffect:zy,useImperativeHandle:kI,useInsertionEffect:bI,useLayoutEffect:II,useMemo:PI,useReducer:Wp,useRef:TI,useState:function(){return Wp(Nu)},useDebugValue:By,useDeferredValue:function(t){var e=Jn();return NI(e,kt.memoizedState,t)},useTransition:function(){var t=Wp(Nu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:gI,useSyncExternalStore:_I,useId:AI,unstable_isNewReconciler:!1},ZA={readContext:Xn,useCallback:SI,useContext:Xn,useEffect:zy,useImperativeHandle:kI,useInsertionEffect:bI,useLayoutEffect:II,useMemo:PI,useReducer:qp,useRef:TI,useState:function(){return qp(Nu)},useDebugValue:By,useDeferredValue:function(t){var e=Jn();return kt===null?e.memoizedState=t:NI(e,kt.memoizedState,t)},useTransition:function(){var t=qp(Nu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:gI,useSyncExternalStore:_I,useId:AI,unstable_isNewReconciler:!1};function lr(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ym={isMounted:function(t){return(t=t._reactInternals)?Fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=ps(t),s=gi(r,i);s.payload=e,n!=null&&(s.callback=n),e=fs(t,s,i),e!==null&&(_r(e,t,i,r),Dd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=ps(t),s=gi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fs(t,s,i),e!==null&&(_r(e,t,i,r),Dd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=ps(t),i=gi(n,r);i.tag=2,e!=null&&(i.callback=e),e=fs(t,i,r),e!==null&&(_r(e,t,r,n),Dd(e,t,r))}};function iw(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Tu(n,r)||!Tu(i,s):!0}function OI(t,e,n){var r=!1,i=Ts,s=e.contextType;return typeof s=="object"&&s!==null?s=Xn(s):(i=En(e)?xo:sn.current,r=e.contextTypes,s=(r=r!=null)?rl(t,i):Ts),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ym,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ym.enqueueReplaceState(e,e.state,null)}function Qg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},My(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xn(s):(s=En(e)?xo:sn.current,i.context=rl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ym.enqueueReplaceState(i,i.state,null),pf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function al(t,e){try{var n="",r=e;do n+=TN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QA=typeof WeakMap=="function"?WeakMap:Map;function jI(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xf||(xf=!0,a_=r),Yg(t,e)},n}function DI(t,e,n){n=gi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yg(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ow(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=uR.bind(null,t,e,n),e.then(t,t))}function aw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gi(-1,1),e.tag=2,fs(n,e,1))),n.lanes|=1),t)}var YA=Li.ReactCurrentOwner,yn=!1;function cn(t,e,n,r){e.child=t===null?dI(e,null,n,r):sl(e,t.child,n,r)}function cw(t,e,n,r,i){n=n.render;var s=e.ref;return $a(e,i),r=Vy(t,e,n,r,s,i),n=Uy(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,bi(t,e,i)):(rt&&n&&ky(e),e.flags|=1,cn(t,e,r,i),e.child)}function uw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FI(t,e,s,r,i)):(t=Wd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Tu,n(a,r)&&t.ref===e.ref)return bi(t,e,i)}return e.flags|=1,t=gs(s,r),t.ref=e.ref,t.return=e,e.child=t}function FI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Tu(s,r)&&t.ref===e.ref)if(yn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(yn=!0);else return e.lanes=t.lanes,bi(t,e,i)}return Xg(t,e,n,r,i)}function VI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Va,Pn),Pn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(Va,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ze(Va,Pn),Pn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ze(Va,Pn),Pn|=r;return cn(t,e,i,n),e.child}function UI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xg(t,e,n,r,i){var s=En(n)?xo:sn.current;return s=rl(e,s),$a(e,i),n=Vy(t,e,n,r,s,i),r=Uy(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,bi(t,e,i)):(rt&&r&&ky(e),e.flags|=1,cn(t,e,n,i),e.child)}function hw(t,e,n,r,i){if(En(n)){var s=!0;uf(e)}else s=!1;if($a(e,i),e.stateNode===null)Ud(t,e),OI(e,n,r),Qg(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,m=n.contextType;typeof m=="object"&&m!==null?m=Xn(m):(m=En(n)?xo:sn.current,m=rl(e,m));var g=n.getDerivedStateFromProps,_=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==m)&&sw(e,a,r,m),Ji=!1;var x=e.memoizedState;a.state=x,pf(e,r,a,i),u=e.memoizedState,c!==r||x!==u||wn.current||Ji?(typeof g=="function"&&(Zg(e,n,g,r),u=e.memoizedState),(c=Ji||iw(e,n,c,r,x,u,m))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=m,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,mI(t,e),c=e.memoizedProps,m=e.type===e.elementType?c:lr(e.type,c),a.props=m,_=e.pendingProps,x=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xn(u):(u=En(n)?xo:sn.current,u=rl(e,u));var E=n.getDerivedStateFromProps;(g=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==_||x!==u)&&sw(e,a,r,u),Ji=!1,x=e.memoizedState,a.state=x,pf(e,r,a,i);var C=e.memoizedState;c!==_||x!==C||wn.current||Ji?(typeof E=="function"&&(Zg(e,n,E,r),C=e.memoizedState),(m=Ji||iw(e,n,m,r,x,C,u)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=m):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Jg(t,e,n,r,s,i)}function Jg(t,e,n,r,i,s){UI(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Qx(e,n,!1),bi(t,e,s);r=e.stateNode,YA.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=sl(e,t.child,null,s),e.child=sl(e,null,c,s)):cn(t,e,c,s),e.memoizedState=r.state,i&&Qx(e,n,!0),e.child}function zI(t){var e=t.stateNode;e.pendingContext?Zx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zx(t,e.context,!1),Oy(t,e.containerInfo)}function dw(t,e,n,r,i){return il(),Py(i),e.flags|=256,cn(t,e,n,r),e.child}var e_={dehydrated:null,treeContext:null,retryLane:0};function t_(t){return{baseLanes:t,cachePool:null,transitions:null}}function BI(t,e,n){var r=e.pendingProps,i=ot.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ze(ot,i&1),t===null)return Gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=wm(a,r,0,null),t=_o(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=t_(n),e.memoizedState=e_,t):Wy(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return XA(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gs(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=gs(c,s):(s=_o(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?t_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=e_,r}return s=t.child,t=s.sibling,r=gs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wy(t,e){return e=wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&Py(r),sl(e,t.child,null,n),t=Wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XA(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Hp(Error(J(422))),vd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wm({mode:"visible",children:r.children},i,0,null),s=_o(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&sl(e,t.child,null,a),e.child.memoizedState=t_(a),e.memoizedState=e_,s);if(!(e.mode&1))return vd(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(J(419)),r=Hp(s,r,void 0),vd(t,e,a,r)}if(c=(a&t.childLanes)!==0,yn||c){if(r=Ut,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ti(t,i),_r(r,t,i,-1))}return Zy(),r=Hp(Error(J(421))),vd(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Nn=ds(i.nextSibling),Rn=e,rt=!0,ur=null,t!==null&&($n[Gn++]=ci,$n[Gn++]=ui,$n[Gn++]=wo,ci=t.id,ui=t.overflow,wo=e),e=Wy(e,r.children),e.flags|=4096,e)}function fw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kg(t.return,e,n)}function $p(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(cn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fw(t,n,e);else if(t.tag===19)fw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(ot,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$p(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$p(e,!0,n,null,s);break;case"together":$p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JA(t,e,n){switch(e.tag){case 3:zI(e),il();break;case 5:pI(e);break;case 1:En(e.type)&&uf(e);break;case 4:Oy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ze(ff,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?BI(t,e,n):(Ze(ot,ot.current&1),t=bi(t,e,n),t!==null?t.sibling:null);Ze(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,VI(t,e,n)}return bi(t,e,n)}var qI,n_,HI,$I;qI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n_=function(){};HI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,co(Dr.current);var s=null;switch(n){case"input":i=bg(t,i),r=bg(t,r),s=[];break;case"select":i=ct({},i,{value:void 0}),r=ct({},r,{value:void 0}),s=[];break;case"textarea":i=kg(t,i),r=kg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lf)}Pg(n,r);var a;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var c=i[m];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(gu.hasOwnProperty(m)?s||(s=[]):(s=s||[]).push(m,null));for(m in r){var u=r[m];if(c=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&u!==c&&(u!=null||c!=null))if(m==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(m,n)),n=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(gu.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&Ye("scroll",t),s||c===u||(s=[])):(s=s||[]).push(m,u))}n&&(s=s||[]).push("style",n);var m=s;(e.updateQueue=m)&&(e.flags|=4)}};$I=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nc(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eR(t,e,n){var r=e.pendingProps;switch(Sy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return En(e.type)&&cf(),Qt(e),null;case 3:return r=e.stateNode,ol(),et(wn),et(sn),Dy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_d(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(u_(ur),ur=null))),n_(t,e),Qt(e),null;case 5:jy(e);var i=co(Su.current);if(n=e.type,t!==null&&e.stateNode!=null)HI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Qt(e),null}if(t=co(Dr.current),_d(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lr]=e,r[Cu]=s,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(i=0;i<zc.length;i++)Ye(zc[i],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Ex(r,s),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ye("invalid",r);break;case"textarea":bx(r,s),Ye("invalid",r)}Pg(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&gd(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&gd(r.textContent,c,t),i=["children",""+c]):gu.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ye("scroll",r)}switch(n){case"input":ld(r),Tx(r,s,!0);break;case"textarea":ld(r),Ix(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Lr]=e,t[Cu]=r,qI(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ng(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),i=r;break;case"iframe":case"object":case"embed":Ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<zc.length;i++)Ye(zc[i],t);i=r;break;case"source":Ye("error",t),i=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),i=r;break;case"details":Ye("toggle",t),i=r;break;case"input":Ex(t,r),i=bg(t,r),Ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ct({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":bx(t,r),i=kg(t,r),Ye("invalid",t);break;default:i=r}Pg(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?Tb(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wb(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_u(t,u):typeof u=="number"&&_u(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gu.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ye("scroll",t):u!=null&&fy(t,s,u,a))}switch(n){case"input":ld(t),Tx(t,r,!1);break;case"textarea":ld(t),Ix(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ba(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)$I(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=co(Su.current),co(Dr.current),_d(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lr]=e,(s=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:gd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=e,e.stateNode=r}return Qt(e),null;case 13:if(et(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Nn!==null&&e.mode&1&&!(e.flags&128))uI(),il(),e.flags|=98560,s=!1;else if(s=_d(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Lr]=e}else il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else ur!==null&&(u_(ur),ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Pt===0&&(Pt=3):Zy())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return ol(),n_(t,e),t===null&&bu(e.stateNode.containerInfo),Qt(e),null;case 10:return Ry(e.type._context),Qt(e),null;case 17:return En(e.type)&&cf(),Qt(e),null;case 19:if(et(ot),s=e.memoizedState,s===null)return Qt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Nc(s,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=gf(t),a!==null){for(e.flags|=128,Nc(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(ot,ot.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>ll&&(e.flags|=128,r=!0,Nc(s,!1),e.lanes=4194304)}else{if(!r)if(t=gf(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!rt)return Qt(e),null}else 2*pt()-s.renderingStartTime>ll&&n!==1073741824&&(e.flags|=128,r=!0,Nc(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=ot.current,Ze(ot,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Ky(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function tR(t,e){switch(Sy(e),e.tag){case 1:return En(e.type)&&cf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ol(),et(wn),et(sn),Dy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jy(e),null;case 13:if(et(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(ot),null;case 4:return ol(),null;case 10:return Ry(e.type._context),null;case 22:case 23:return Ky(),null;case 24:return null;default:return null}}var xd=!1,en=!1,nR=typeof WeakSet=="function"?WeakSet:Set,se=null;function Fa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function r_(t,e,n){try{n()}catch(r){dt(t,e,r)}}var mw=!1;function rR(t,e){if(Ug=sf,t=Yb(),Cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,m=0,g=0,_=t,x=null;t:for(;;){for(var E;_!==n||i!==0&&_.nodeType!==3||(c=a+i),_!==s||r!==0&&_.nodeType!==3||(u=a+r),_.nodeType===3&&(a+=_.nodeValue.length),(E=_.firstChild)!==null;)x=_,_=E;for(;;){if(_===t)break t;if(x===n&&++m===i&&(c=a),x===s&&++g===r&&(u=a),(E=_.nextSibling)!==null)break;_=x,x=_.parentNode}_=E}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zg={focusedElem:t,selectionRange:n},sf=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,M=C.memoizedState,b=e.stateNode,I=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:lr(e.type,N),M);b.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(O){dt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return C=mw,mw=!1,C}function Jc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&r_(e,n,s)}i=i.next}while(i!==r)}}function vm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function i_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function GI(t){var e=t.alternate;e!==null&&(t.alternate=null,GI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lr],delete e[Cu],delete e[qg],delete e[VA],delete e[UA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KI(t){return t.tag===5||t.tag===3||t.tag===4}function pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function s_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lf));else if(r!==4&&(t=t.child,t!==null))for(s_(t,e,n),t=t.sibling;t!==null;)s_(t,e,n),t=t.sibling}function o_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(o_(t,e,n),t=t.sibling;t!==null;)o_(t,e,n),t=t.sibling}var Wt=null,cr=!1;function Ki(t,e,n){for(n=n.child;n!==null;)ZI(t,e,n),n=n.sibling}function ZI(t,e,n){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(hm,n)}catch{}switch(n.tag){case 5:en||Fa(n,e);case 6:var r=Wt,i=cr;Wt=null,Ki(t,e,n),Wt=r,cr=i,Wt!==null&&(cr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(cr?(t=Wt,n=n.stateNode,t.nodeType===8?Vp(t.parentNode,n):t.nodeType===1&&Vp(t,n),wu(t)):Vp(Wt,n.stateNode));break;case 4:r=Wt,i=cr,Wt=n.stateNode.containerInfo,cr=!0,Ki(t,e,n),Wt=r,cr=i;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&r_(n,e,a),i=i.next}while(i!==r)}Ki(t,e,n);break;case 1:if(!en&&(Fa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){dt(n,e,c)}Ki(t,e,n);break;case 21:Ki(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Ki(t,e,n),en=r):Ki(t,e,n);break;default:Ki(t,e,n)}}function gw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nR),e.forEach(function(r){var i=dR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Wt=c.stateNode,cr=!1;break e;case 3:Wt=c.stateNode.containerInfo,cr=!0;break e;case 4:Wt=c.stateNode.containerInfo,cr=!0;break e}c=c.return}if(Wt===null)throw Error(J(160));ZI(s,a,i),Wt=null,cr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(m){dt(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QI(e,t),e=e.sibling}function QI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(or(e,t),Nr(t),r&4){try{Jc(3,t,t.return),vm(3,t)}catch(N){dt(t,t.return,N)}try{Jc(5,t,t.return)}catch(N){dt(t,t.return,N)}}break;case 1:or(e,t),Nr(t),r&512&&n!==null&&Fa(n,n.return);break;case 5:if(or(e,t),Nr(t),r&512&&n!==null&&Fa(n,n.return),t.flags&32){var i=t.stateNode;try{_u(i,"")}catch(N){dt(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&yb(i,s),Ng(c,a);var m=Ng(c,s);for(a=0;a<u.length;a+=2){var g=u[a],_=u[a+1];g==="style"?Tb(i,_):g==="dangerouslySetInnerHTML"?wb(i,_):g==="children"?_u(i,_):fy(i,g,_,m)}switch(c){case"input":Ig(i,s);break;case"textarea":vb(i,s);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?Ba(i,!!s.multiple,E,!1):x!==!!s.multiple&&(s.defaultValue!=null?Ba(i,!!s.multiple,s.defaultValue,!0):Ba(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cu]=s}catch(N){dt(t,t.return,N)}}break;case 6:if(or(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){dt(t,t.return,N)}}break;case 3:if(or(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wu(e.containerInfo)}catch(N){dt(t,t.return,N)}break;case 4:or(e,t),Nr(t);break;case 13:or(e,t),Nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($y=pt())),r&4&&gw(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(en=(m=en)||g,or(e,t),en=m):or(e,t),Nr(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!g&&t.mode&1)for(se=t,g=t.child;g!==null;){for(_=se=g;se!==null;){switch(x=se,E=x.child,x.tag){case 0:case 11:case 14:case 15:Jc(4,x,x.return);break;case 1:Fa(x,x.return);var C=x.stateNode;if(typeof C.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(N){dt(r,n,N)}}break;case 5:Fa(x,x.return);break;case 22:if(x.memoizedState!==null){yw(_);continue}}E!==null?(E.return=x,se=E):yw(_)}g=g.sibling}e:for(g=null,_=t;;){if(_.tag===5){if(g===null){g=_;try{i=_.stateNode,m?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=_.stateNode,u=_.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Eb("display",a))}catch(N){dt(t,t.return,N)}}}else if(_.tag===6){if(g===null)try{_.stateNode.nodeValue=m?"":_.memoizedProps}catch(N){dt(t,t.return,N)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;g===_&&(g=null),_=_.return}g===_&&(g=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:or(e,t),Nr(t),r&4&&gw(t);break;case 21:break;default:or(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KI(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_u(i,""),r.flags&=-33);var s=pw(t);o_(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=pw(t);s_(t,c,a);break;default:throw Error(J(161))}}catch(u){dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iR(t,e,n){se=t,YI(t)}function YI(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||xd;if(!a){var c=i.alternate,u=c!==null&&c.memoizedState!==null||en;c=xd;var m=en;if(xd=a,(en=u)&&!m)for(se=i;se!==null;)a=se,u=a.child,a.tag===22&&a.memoizedState!==null?vw(i):u!==null?(u.return=a,se=u):vw(i);for(;s!==null;)se=s,YI(s),s=s.sibling;se=i,xd=c,en=m}_w(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):_w(t)}}function _w(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||vm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tw(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tw(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var _=g.dehydrated;_!==null&&wu(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}en||e.flags&512&&i_(e)}catch(x){dt(e,e.return,x)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function yw(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function vw(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vm(4,e)}catch(u){dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){dt(e,i,u)}}var s=e.return;try{i_(e)}catch(u){dt(e,s,u)}break;case 5:var a=e.return;try{i_(e)}catch(u){dt(e,a,u)}}}catch(u){dt(e,e.return,u)}if(e===t){se=null;break}var c=e.sibling;if(c!==null){c.return=e.return,se=c;break}se=e.return}}var sR=Math.ceil,vf=Li.ReactCurrentDispatcher,qy=Li.ReactCurrentOwner,Zn=Li.ReactCurrentBatchConfig,Oe=0,Ut=null,Et=null,Ht=0,Pn=0,Va=Rs(0),Pt=0,Ru=null,To=0,xm=0,Hy=0,eu=null,gn=null,$y=0,ll=1/0,oi=null,xf=!1,a_=null,ms=null,wd=!1,os=null,wf=0,tu=0,l_=null,zd=-1,Bd=0;function un(){return Oe&6?pt():zd!==-1?zd:zd=pt()}function ps(t){return t.mode&1?Oe&2&&Ht!==0?Ht&-Ht:BA.transition!==null?(Bd===0&&(Bd=Ob()),Bd):(t=ze,t!==0||(t=window.event,t=t===void 0?16:Bb(t.type)),t):1}function _r(t,e,n,r){if(50<tu)throw tu=0,l_=null,Error(J(185));Xu(t,n,r),(!(Oe&2)||t!==Ut)&&(t===Ut&&(!(Oe&2)&&(xm|=n),Pt===4&&ts(t,Ht)),Tn(t,r),n===1&&Oe===0&&!(e.mode&1)&&(ll=pt()+500,gm&&Ls()))}function Tn(t,e){var n=t.callbackNode;BN(t,e);var r=rf(t,t===Ut?Ht:0);if(r===0)n!==null&&Sx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sx(n),e===1)t.tag===0?zA(xw.bind(null,t)):aI(xw.bind(null,t)),DA(function(){!(Oe&6)&&Ls()}),n=null;else{switch(jb(r)){case 1:n=yy;break;case 4:n=Lb;break;case 16:n=nf;break;case 536870912:n=Mb;break;default:n=nf}n=sC(n,XI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XI(t,e){if(zd=-1,Bd=0,Oe&6)throw Error(J(327));var n=t.callbackNode;if(Ga()&&t.callbackNode!==n)return null;var r=rf(t,t===Ut?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ef(t,r);else{e=r;var i=Oe;Oe|=2;var s=eC();(Ut!==t||Ht!==e)&&(oi=null,ll=pt()+500,go(t,e));do try{lR();break}catch(c){JI(t,c)}while(!0);Ay(),vf.current=s,Oe=i,Et!==null?e=0:(Ut=null,Ht=0,e=Pt)}if(e!==0){if(e===2&&(i=Og(t),i!==0&&(r=i,e=c_(t,i))),e===1)throw n=Ru,go(t,0),ts(t,r),Tn(t,pt()),n;if(e===6)ts(t,r);else{if(i=t.current.alternate,!(r&30)&&!oR(i)&&(e=Ef(t,r),e===2&&(s=Og(t),s!==0&&(r=s,e=c_(t,s))),e===1))throw n=Ru,go(t,0),ts(t,r),Tn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:ro(t,gn,oi);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=$y+500-pt(),10<e)){if(rf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wg(ro.bind(null,t,gn,oi),e);break}ro(t,gn,oi);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-gr(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sR(r/1960))-r,10<r){t.timeoutHandle=Wg(ro.bind(null,t,gn,oi),r);break}ro(t,gn,oi);break;case 5:ro(t,gn,oi);break;default:throw Error(J(329))}}}return Tn(t,pt()),t.callbackNode===n?XI.bind(null,t):null}function c_(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=Ef(t,e),t!==2&&(e=gn,gn=n,e!==null&&u_(e)),t}function u_(t){gn===null?gn=t:gn.push.apply(gn,t)}function oR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~Hy,e&=~xm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gr(e),r=1<<n;t[n]=-1,e&=~r}}function xw(t){if(Oe&6)throw Error(J(327));Ga();var e=rf(t,0);if(!(e&1))return Tn(t,pt()),null;var n=Ef(t,e);if(t.tag!==0&&n===2){var r=Og(t);r!==0&&(e=r,n=c_(t,r))}if(n===1)throw n=Ru,go(t,0),ts(t,e),Tn(t,pt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,gn,oi),Tn(t,pt()),null}function Gy(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(ll=pt()+500,gm&&Ls())}}function bo(t){os!==null&&os.tag===0&&!(Oe&6)&&Ga();var e=Oe;Oe|=1;var n=Zn.transition,r=ze;try{if(Zn.transition=null,ze=1,t)return t()}finally{ze=r,Zn.transition=n,Oe=e,!(Oe&6)&&Ls()}}function Ky(){Pn=Va.current,et(Va)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jA(n)),Et!==null)for(n=Et.return;n!==null;){var r=n;switch(Sy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cf();break;case 3:ol(),et(wn),et(sn),Dy();break;case 5:jy(r);break;case 4:ol();break;case 13:et(ot);break;case 19:et(ot);break;case 10:Ry(r.type._context);break;case 22:case 23:Ky()}n=n.return}if(Ut=t,Et=t=gs(t.current,null),Ht=Pn=e,Pt=0,Ru=null,Hy=xm=To=0,gn=eu=null,lo!==null){for(e=0;e<lo.length;e++)if(n=lo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}lo=null}return t}function JI(t,e){do{var n=Et;try{if(Ay(),Fd.current=yf,_f){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_f=!1}if(Eo=0,jt=kt=lt=null,Xc=!1,Pu=0,qy.current=null,n===null||n.return===null){Pt=1,Ru=e,Et=null;break}e:{var s=t,a=n.return,c=n,u=e;if(e=Ht,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,g=c,_=g.tag;if(!(g.mode&1)&&(_===0||_===11||_===15)){var x=g.alternate;x?(g.updateQueue=x.updateQueue,g.memoizedState=x.memoizedState,g.lanes=x.lanes):(g.updateQueue=null,g.memoizedState=null)}var E=aw(a);if(E!==null){E.flags&=-257,lw(E,a,c,s,e),E.mode&1&&ow(s,m,e),e=E,u=m;var C=e.updateQueue;if(C===null){var N=new Set;N.add(u),e.updateQueue=N}else C.add(u);break e}else{if(!(e&1)){ow(s,m,e),Zy();break e}u=Error(J(426))}}else if(rt&&c.mode&1){var M=aw(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),lw(M,a,c,s,e),Py(al(u,c));break e}}s=u=al(u,c),Pt!==4&&(Pt=2),eu===null?eu=[s]:eu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=jI(s,u,e);ew(s,b);break e;case 1:c=u;var I=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ms===null||!ms.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=DI(s,c,e);ew(s,O);break e}}s=s.return}while(s!==null)}nC(n)}catch(z){e=z,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function eC(){var t=vf.current;return vf.current=yf,t===null?yf:t}function Zy(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ut===null||!(To&268435455)&&!(xm&268435455)||ts(Ut,Ht)}function Ef(t,e){var n=Oe;Oe|=2;var r=eC();(Ut!==t||Ht!==e)&&(oi=null,go(t,e));do try{aR();break}catch(i){JI(t,i)}while(!0);if(Ay(),Oe=n,vf.current=r,Et!==null)throw Error(J(261));return Ut=null,Ht=0,Pt}function aR(){for(;Et!==null;)tC(Et)}function lR(){for(;Et!==null&&!LN();)tC(Et)}function tC(t){var e=iC(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?nC(t):Et=e,qy.current=null}function nC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tR(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,Et=null;return}}else if(n=eR(n,e,Pn),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);Pt===0&&(Pt=5)}function ro(t,e,n){var r=ze,i=Zn.transition;try{Zn.transition=null,ze=1,cR(t,e,n,r)}finally{Zn.transition=i,ze=r}return null}function cR(t,e,n,r){do Ga();while(os!==null);if(Oe&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(WN(t,s),t===Ut&&(Et=Ut=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wd||(wd=!0,sC(nf,function(){return Ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zn.transition,Zn.transition=null;var a=ze;ze=1;var c=Oe;Oe|=4,qy.current=null,rR(t,n),QI(n,t),PA(zg),sf=!!Ug,zg=Ug=null,t.current=n,iR(n),MN(),Oe=c,ze=a,Zn.transition=s}else t.current=n;if(wd&&(wd=!1,os=t,wf=i),s=t.pendingLanes,s===0&&(ms=null),DN(n.stateNode),Tn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xf)throw xf=!1,t=a_,a_=null,t;return wf&1&&t.tag!==0&&Ga(),s=t.pendingLanes,s&1?t===l_?tu++:(tu=0,l_=t):tu=0,Ls(),null}function Ga(){if(os!==null){var t=jb(wf),e=Zn.transition,n=ze;try{if(Zn.transition=null,ze=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,wf=0,Oe&6)throw Error(J(331));var i=Oe;for(Oe|=4,se=t.current;se!==null;){var s=se,a=s.child;if(se.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var m=c[u];for(se=m;se!==null;){var g=se;switch(g.tag){case 0:case 11:case 15:Jc(8,g,s)}var _=g.child;if(_!==null)_.return=g,se=_;else for(;se!==null;){g=se;var x=g.sibling,E=g.return;if(GI(g),g===m){se=null;break}if(x!==null){x.return=E,se=x;break}se=E}}}var C=s.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var M=N.sibling;N.sibling=null,N=M}while(N!==null)}}se=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,se=a;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jc(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,se=b;break e}se=s.return}}var I=t.current;for(se=I;se!==null;){a=se;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,se=S;else e:for(a=I;se!==null;){if(c=se,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:vm(9,c)}}catch(z){dt(c,c.return,z)}if(c===a){se=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,se=O;break e}se=c.return}}if(Oe=i,Ls(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(hm,t)}catch{}r=!0}return r}finally{ze=n,Zn.transition=e}}return!1}function ww(t,e,n){e=al(n,e),e=jI(t,e,1),t=fs(t,e,1),e=un(),t!==null&&(Xu(t,1,e),Tn(t,e))}function dt(t,e,n){if(t.tag===3)ww(t,t,n);else for(;e!==null;){if(e.tag===3){ww(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=al(n,t),t=DI(e,t,1),e=fs(e,t,1),t=un(),e!==null&&(Xu(e,1,t),Tn(e,t));break}}e=e.return}}function uR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Ht&n)===n&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>pt()-$y?go(t,0):Hy|=n),Tn(t,e)}function rC(t,e){e===0&&(t.mode&1?(e=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):e=1);var n=un();t=Ti(t,e),t!==null&&(Xu(t,e,n),Tn(t,n))}function hR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rC(t,n)}function dR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),rC(t,n)}var iC;iC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yn=!1,JA(t,e,n);yn=!!(t.flags&131072)}else yn=!1,rt&&e.flags&1048576&&lI(e,df,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ud(t,e),t=e.pendingProps;var i=rl(e,sn.current);$a(e,n),i=Vy(null,e,r,t,i,n);var s=Uy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(s=!0,uf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,My(e),i.updater=ym,e.stateNode=i,i._reactInternals=e,Qg(e,r,t,n),e=Jg(null,e,r,!0,s,n)):(e.tag=0,rt&&s&&ky(e),cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ud(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mR(r),t=lr(r,t),i){case 0:e=Xg(null,e,r,t,n);break e;case 1:e=hw(null,e,r,t,n);break e;case 11:e=cw(null,e,r,t,n);break e;case 14:e=uw(null,e,r,lr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),Xg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),hw(t,e,r,i,n);case 3:e:{if(zI(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mI(t,e),pf(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=al(Error(J(423)),e),e=dw(t,e,r,n,i);break e}else if(r!==i){i=al(Error(J(424)),e),e=dw(t,e,r,n,i);break e}else for(Nn=ds(e.stateNode.containerInfo.firstChild),Rn=e,rt=!0,ur=null,n=dI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(il(),r===i){e=bi(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return pI(e),t===null&&Gg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Bg(r,i)?a=null:s!==null&&Bg(r,s)&&(e.flags|=32),UI(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&Gg(e),null;case 13:return BI(t,e,n);case 4:return Oy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sl(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),cw(t,e,r,i,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ze(ff,r._currentValue),r._currentValue=a,s!==null)if(wr(s.value,a)){if(s.children===i.children&&!wn.current){e=bi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=gi(-1,n&-n),u.tag=2;var m=s.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?u.next=u:(u.next=g.next,g.next=u),m.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Kg(s.return,n,e),c.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(J(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Kg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$a(e,n),i=Xn(i),r=r(i),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,i=lr(r,e.pendingProps),i=lr(r.type,i),uw(t,e,r,i,n);case 15:return FI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),Ud(t,e),e.tag=1,En(r)?(t=!0,uf(e)):t=!1,$a(e,n),OI(e,r,i),Qg(e,r,i,n),Jg(null,e,r,!0,t,n);case 19:return WI(t,e,n);case 22:return VI(t,e,n)}throw Error(J(156,e.tag))};function sC(t,e){return Rb(t,e)}function fR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new fR(t,e,n,r)}function Qy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mR(t){if(typeof t=="function")return Qy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===py)return 11;if(t===gy)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wd(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Qy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Pa:return _o(n.children,i,s,e);case my:a=8,i|=8;break;case xg:return t=Kn(12,n,e,i|2),t.elementType=xg,t.lanes=s,t;case wg:return t=Kn(13,n,e,i),t.elementType=wg,t.lanes=s,t;case Eg:return t=Kn(19,n,e,i),t.elementType=Eg,t.lanes=s,t;case pb:return wm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fb:a=10;break e;case mb:a=9;break e;case py:a=11;break e;case gy:a=14;break e;case Xi:a=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Kn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _o(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function wm(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=pb,t.lanes=n,t.stateNode={isHidden:!1},t}function Gp(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function Kp(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yy(t,e,n,r,i,s,a,c,u){return t=new pR(t,e,n,c,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(s),t}function gR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oC(t){if(!t)return Ts;t=t._reactInternals;e:{if(Fo(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(En(n))return oI(t,n,e)}return e}function aC(t,e,n,r,i,s,a,c,u){return t=Yy(n,r,!0,t,i,s,a,c,u),t.context=oC(null),n=t.current,r=un(),i=ps(n),s=gi(r,i),s.callback=e??null,fs(n,s,i),t.current.lanes=i,Xu(t,i,r),Tn(t,r),t}function Em(t,e,n,r){var i=e.current,s=un(),a=ps(i);return n=oC(n),e.context===null?e.context=n:e.pendingContext=n,e=gi(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fs(i,e,a),t!==null&&(_r(t,i,a,s),Dd(t,i,a)),a}function Tf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ew(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xy(t,e){Ew(t,e),(t=t.alternate)&&Ew(t,e)}function _R(){return null}var lC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jy(t){this._internalRoot=t}Tm.prototype.render=Jy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Em(t,e,null,null)};Tm.prototype.unmount=Jy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bo(function(){Em(null,t,null,null)}),e[Ei]=null}};function Tm(t){this._internalRoot=t}Tm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&zb(t)}};function ev(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tw(){}function yR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var m=Tf(a);s.call(m)}}var a=aC(e,r,t,0,null,!1,!1,"",Tw);return t._reactRootContainer=a,t[Ei]=a.current,bu(t.nodeType===8?t.parentNode:t),bo(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var m=Tf(u);c.call(m)}}var u=Yy(t,0,!1,null,null,!1,!1,"",Tw);return t._reactRootContainer=u,t[Ei]=u.current,bu(t.nodeType===8?t.parentNode:t),bo(function(){Em(e,u,n,r)}),u}function Im(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var u=Tf(a);c.call(u)}}Em(e,a,t,i)}else a=yR(n,e,t,i,r);return Tf(a)}Db=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uc(e.pendingLanes);n!==0&&(vy(e,n|1),Tn(e,pt()),!(Oe&6)&&(ll=pt()+500,Ls()))}break;case 13:bo(function(){var r=Ti(t,1);if(r!==null){var i=un();_r(r,t,1,i)}}),Xy(t,1)}};xy=function(t){if(t.tag===13){var e=Ti(t,134217728);if(e!==null){var n=un();_r(e,t,134217728,n)}Xy(t,134217728)}};Fb=function(t){if(t.tag===13){var e=ps(t),n=Ti(t,e);if(n!==null){var r=un();_r(n,t,e,r)}Xy(t,e)}};Vb=function(){return ze};Ub=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Rg=function(t,e,n){switch(e){case"input":if(Ig(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pm(r);if(!i)throw Error(J(90));_b(r),Ig(r,i)}}}break;case"textarea":vb(t,n);break;case"select":e=n.value,e!=null&&Ba(t,!!n.multiple,e,!1)}};Cb=Gy;kb=bo;var vR={usingClientEntryPoint:!1,Events:[eh,La,pm,bb,Ib,Gy]},Ac={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xR={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{hm=Ed.inject(xR),jr=Ed}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vR;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ev(e))throw Error(J(200));return gR(t,e,null,n)};On.createRoot=function(t,e){if(!ev(t))throw Error(J(299));var n=!1,r="",i=lC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yy(t,1,!1,null,null,n,!1,r,i),t[Ei]=e.current,bu(t.nodeType===8?t.parentNode:t),new Jy(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Nb(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return bo(t)};On.hydrate=function(t,e,n){if(!bm(e))throw Error(J(200));return Im(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!ev(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=lC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=aC(e,null,t,1,n??null,i,!1,s,a),t[Ei]=e.current,bu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tm(e)};On.render=function(t,e,n){if(!bm(e))throw Error(J(200));return Im(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!bm(t))throw Error(J(40));return t._reactRootContainer?(bo(function(){Im(null,null,t,!1,function(){t._reactRootContainer=null,t[Ei]=null})}),!0):!1};On.unstable_batchedUpdates=Gy;On.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bm(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Im(t,e,n,!1,r)};On.version="18.3.1-next-f1338f8080-20240426";function cC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cC)}catch(t){console.error(t)}}cC(),cb.exports=On;var wR=cb.exports,bw=wR;yg.createRoot=bw.createRoot,yg.hydrateRoot=bw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lu.apply(this,arguments)}var as;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(as||(as={}));const Iw="popstate";function ER(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return h_("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bf(i)}return bR(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TR(){return Math.random().toString(36).substr(2,8)}function Cw(t,e){return{usr:t.state,key:t.key,idx:e}}function h_(t,e,n,r){return n===void 0&&(n=null),Lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pl(e):e,{state:n,key:e&&e.key||r||TR()})}function bf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c=as.Pop,u=null,m=g();m==null&&(m=0,a.replaceState(Lu({},a.state,{idx:m}),""));function g(){return(a.state||{idx:null}).idx}function _(){c=as.Pop;let M=g(),b=M==null?null:M-m;m=M,u&&u({action:c,location:N.location,delta:b})}function x(M,b){c=as.Push;let I=h_(N.location,M,b);m=g()+1;let S=Cw(I,m),O=N.createHref(I);try{a.pushState(S,"",O)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(O)}s&&u&&u({action:c,location:N.location,delta:1})}function E(M,b){c=as.Replace;let I=h_(N.location,M,b);m=g();let S=Cw(I,m),O=N.createHref(I);a.replaceState(S,"",O),s&&u&&u({action:c,location:N.location,delta:0})}function C(M){let b=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof M=="string"?M:bf(M);return I=I.replace(/ $/,"%20"),gt(b,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,b)}let N={get action(){return c},get location(){return t(i,a)},listen(M){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iw,_),u=M,()=>{i.removeEventListener(Iw,_),u=null}},createHref(M){return e(i,M)},createURL:C,encodeLocation(M){let b=C(M);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:E,go(M){return a.go(M)}};return N}var kw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kw||(kw={}));function IR(t,e,n){return n===void 0&&(n="/"),CR(t,e,n)}function CR(t,e,n,r){let i=typeof e=="string"?Pl(e):e,s=nv(i.pathname||"/",n);if(s==null)return null;let a=uC(t);kR(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let m=VR(s);c=jR(a[u],m)}return c}function uC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(gt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let m=_s([r,u.relativePath]),g=n.concat(u);s.children&&s.children.length>0&&(gt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),uC(s.children,e,g,m)),!(s.path==null&&!s.index)&&e.push({path:m,score:MR(m,s.index),routesMeta:g})};return t.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let u of hC(s.path))i(s,a,u)}),e}function hC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=hC(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function kR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SR=/^:[\w-]+$/,PR=3,NR=2,AR=1,RR=10,LR=-2,Sw=t=>t==="*";function MR(t,e){let n=t.split("/"),r=n.length;return n.some(Sw)&&(r+=LR),e&&(r+=NR),n.filter(i=>!Sw(i)).reduce((i,s)=>i+(SR.test(s)?PR:s===""?AR:RR),r)}function OR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jR(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],m=c===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",_=DR({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},g),x=u.route;if(!_)return null;Object.assign(i,_.params),a.push({params:i,pathname:_s([s,_.pathname]),pathnameBase:qR(_s([s,_.pathnameBase])),route:x}),_.pathnameBase!=="/"&&(s=_s([s,_.pathnameBase]))}return a}function DR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((m,g,_)=>{let{paramName:x,isOptional:E}=g;if(x==="*"){let N=c[_]||"";a=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const C=c[_];return E&&!C?m[x]=void 0:m[x]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:s,pathnameBase:a,pattern:t}}function FR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const UR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zR=t=>UR.test(t);function BR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Pl(t):t,s;if(n)if(zR(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),tv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=Pw(n.substring(1),"/"):s=Pw(n,e)}else s=e;return{pathname:s,search:HR(r),hash:$R(i)}}function Pw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rv(t,e){let n=WR(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function iv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Pl(t):(i=Lu({},t),gt(!i.pathname||!i.pathname.includes("?"),Zp("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),Zp("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),Zp("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=n;else{let _=e.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),_-=1;i.pathname=x.join("/")}c=_>=0?e[_]:"/"}let u=BR(i,c),m=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(m||g)&&(u.pathname+="/"),u}const _s=t=>t.join("/").replace(/\/\/+/g,"/"),qR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$R=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dC=["post","put","patch","delete"];new Set(dC);const KR=["get",...dC];new Set(KR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mu.apply(this,arguments)}const sv=B.createContext(null),ZR=B.createContext(null),Ms=B.createContext(null),Cm=B.createContext(null),Mi=B.createContext({outlet:null,matches:[],isDataRoute:!1}),fC=B.createContext(null);function QR(t,e){let{relative:n}=e===void 0?{}:e;Nl()||gt(!1);let{basename:r,navigator:i}=B.useContext(Ms),{hash:s,pathname:a,search:c}=pC(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:_s([r,a])),i.createHref({pathname:u,search:c,hash:s})}function Nl(){return B.useContext(Cm)!=null}function Al(){return Nl()||gt(!1),B.useContext(Cm).location}function mC(t){B.useContext(Ms).static||B.useLayoutEffect(t)}function Os(){let{isDataRoute:t}=B.useContext(Mi);return t?u2():YR()}function YR(){Nl()||gt(!1);let t=B.useContext(sv),{basename:e,future:n,navigator:r}=B.useContext(Ms),{matches:i}=B.useContext(Mi),{pathname:s}=Al(),a=JSON.stringify(rv(i,n.v7_relativeSplatPath)),c=B.useRef(!1);return mC(()=>{c.current=!0}),B.useCallback(function(m,g){if(g===void 0&&(g={}),!c.current)return;if(typeof m=="number"){r.go(m);return}let _=iv(m,JSON.parse(a),s,g.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:_s([e,_.pathname])),(g.replace?r.replace:r.push)(_,g.state,g)},[e,r,a,s,t])}function XR(){let{matches:t}=B.useContext(Mi),e=t[t.length-1];return e?e.params:{}}function pC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=B.useContext(Ms),{matches:i}=B.useContext(Mi),{pathname:s}=Al(),a=JSON.stringify(rv(i,r.v7_relativeSplatPath));return B.useMemo(()=>iv(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function JR(t,e){return e2(t,e)}function e2(t,e,n,r){Nl()||gt(!1);let{navigator:i}=B.useContext(Ms),{matches:s}=B.useContext(Mi),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let m=Al(),g;if(e){var _;let M=typeof e=="string"?Pl(e):e;u==="/"||(_=M.pathname)!=null&&_.startsWith(u)||gt(!1),g=M}else g=m;let x=g.pathname||"/",E=x;if(u!=="/"){let M=u.replace(/^\//,"").split("/");E="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let C=IR(t,{pathname:E}),N=s2(C&&C.map(M=>Object.assign({},M,{params:Object.assign({},c,M.params),pathname:_s([u,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?u:_s([u,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,n,r);return e&&N?B.createElement(Cm.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:as.Pop}},N):N}function t2(){let t=c2(),e=GR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,null)}const n2=B.createElement(t2,null);class r2 extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(Mi.Provider,{value:this.props.routeContext},B.createElement(fC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i2(t){let{routeContext:e,match:n,children:r}=t,i=B.useContext(sv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(Mi.Provider,{value:e},r)}function s2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let g=a.findIndex(_=>_.route.id&&(c==null?void 0:c[_.route.id])!==void 0);g>=0||gt(!1),a=a.slice(0,Math.min(a.length,g+1))}let u=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<a.length;g++){let _=a[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:x,errors:E}=n,C=_.route.loader&&x[_.route.id]===void 0&&(!E||E[_.route.id]===void 0);if(_.route.lazy||C){u=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((g,_,x)=>{let E,C=!1,N=null,M=null;n&&(E=c&&_.route.id?c[_.route.id]:void 0,N=_.route.errorElement||n2,u&&(m<0&&x===0?(h2("route-fallback"),C=!0,M=null):m===x&&(C=!0,M=_.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,x+1)),I=()=>{let S;return E?S=N:C?S=M:_.route.Component?S=B.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=g,B.createElement(i2,{match:_,routeContext:{outlet:g,matches:b,isDataRoute:n!=null},children:S})};return n&&(_.route.ErrorBoundary||_.route.errorElement||x===0)?B.createElement(r2,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:I(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):I()},null)}var gC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gC||{}),_C=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_C||{});function o2(t){let e=B.useContext(sv);return e||gt(!1),e}function a2(t){let e=B.useContext(ZR);return e||gt(!1),e}function l2(t){let e=B.useContext(Mi);return e||gt(!1),e}function yC(t){let e=l2(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function c2(){var t;let e=B.useContext(fC),n=a2(),r=yC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function u2(){let{router:t}=o2(gC.UseNavigateStable),e=yC(_C.UseNavigateStable),n=B.useRef(!1);return mC(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Mu({fromRouteId:e},s)))},[t,e])}const Nw={};function h2(t,e,n){Nw[t]||(Nw[t]=!0)}function d2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vC(t){let{to:e,replace:n,state:r,relative:i}=t;Nl()||gt(!1);let{future:s,static:a}=B.useContext(Ms),{matches:c}=B.useContext(Mi),{pathname:u}=Al(),m=Os(),g=iv(e,rv(c,s.v7_relativeSplatPath),u,i==="path"),_=JSON.stringify(g);return B.useEffect(()=>m(JSON.parse(_),{replace:n,state:r,relative:i}),[m,_,i,n,r]),null}function ar(t){gt(!1)}function f2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=as.Pop,navigator:s,static:a=!1,future:c}=t;Nl()&&gt(!1);let u=e.replace(/^\/*/,"/"),m=B.useMemo(()=>({basename:u,navigator:s,static:a,future:Mu({v7_relativeSplatPath:!1},c)}),[u,c,s,a]);typeof r=="string"&&(r=Pl(r));let{pathname:g="/",search:_="",hash:x="",state:E=null,key:C="default"}=r,N=B.useMemo(()=>{let M=nv(g,u);return M==null?null:{location:{pathname:M,search:_,hash:x,state:E,key:C},navigationType:i}},[u,g,_,x,E,C,i]);return N==null?null:B.createElement(Ms.Provider,{value:m},B.createElement(Cm.Provider,{children:n,value:N}))}function m2(t){let{children:e,location:n}=t;return JR(d_(e),n)}new Promise(()=>{});function d_(t,e){e===void 0&&(e=[]);let n=[];return B.Children.forEach(t,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){n.push.apply(n,d_(r.props.children,s));return}r.type!==ar&&gt(!1),!r.props.index||!r.props.children||gt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=d_(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f_.apply(this,arguments)}function p2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function g2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _2(t,e){return t.button===0&&(!e||e==="_self")&&!g2(t)}const y2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v2="6";try{window.__reactRouterVersion=v2}catch{}const x2="startTransition",Aw=uN[x2];function w2(t){let{basename:e,children:n,future:r,window:i}=t,s=B.useRef();s.current==null&&(s.current=ER({window:i,v5Compat:!0}));let a=s.current,[c,u]=B.useState({action:a.action,location:a.location}),{v7_startTransition:m}=r||{},g=B.useCallback(_=>{m&&Aw?Aw(()=>u(_)):u(_)},[u,m]);return B.useLayoutEffect(()=>a.listen(g),[a,g]),B.useEffect(()=>d2(r),[r]),B.createElement(f2,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const E2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=B.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:c,target:u,to:m,preventScrollReset:g,viewTransition:_}=e,x=p2(e,y2),{basename:E}=B.useContext(Ms),C,N=!1;if(typeof m=="string"&&T2.test(m)&&(C=m,E2))try{let S=new URL(window.location.href),O=m.startsWith("//")?new URL(S.protocol+m):new URL(m),z=nv(O.pathname,E);O.origin===S.origin&&z!=null?m=z+O.search+O.hash:N=!0}catch{}let M=QR(m,{relative:i}),b=b2(m,{replace:a,state:c,target:u,preventScrollReset:g,relative:i,viewTransition:_});function I(S){r&&r(S),S.defaultPrevented||b(S)}return B.createElement("a",f_({},x,{href:C||M,onClick:N||s?r:I,ref:n,target:u}))});var Rw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rw||(Rw={}));var Lw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lw||(Lw={}));function b2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:c}=e===void 0?{}:e,u=Os(),m=Al(),g=pC(t,{relative:a});return B.useCallback(_=>{if(_2(_,n)){_.preventDefault();let x=r!==void 0?r:bf(m)===bf(g);u(t,{replace:x,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[m,u,g,r,i,n,t,s,a,c])}var Mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=function(t,e){if(!t)throw Rl(e)},Rl=function(t){return new Error("Firebase Database ("+xC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},I2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,m=u?t[i+2]:0,g=s>>2,_=(s&3)<<4|c>>4;let x=(c&15)<<2|m>>6,E=m&63;u||(E=64,a||(x=64)),r.push(n[g],n[_],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||m==null||_==null)throw new C2;const x=s<<2|c>>4;if(r.push(x),m!==64){const E=c<<4&240|m>>2;if(r.push(E),_!==64){const C=m<<6&192|_;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EC=function(t){const e=wC(t);return ov.encodeByteArray(e,!0)},If=function(t){return EC(t).replace(/\./g,"")},Cf=function(t){try{return ov.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t){return TC(void 0,t)}function TC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!S2(n)||(t[n]=TC(t[n],e[n]));return t}function S2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=()=>P2().__FIREBASE_DEFAULTS__,A2=()=>{if(typeof process>"u"||typeof Mw>"u")return;const t=Mw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cf(t[1]);return e&&JSON.parse(e)},km=()=>{try{return N2()||A2()||R2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bC=t=>{var e,n;return(n=(e=km())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},av=t=>{const e=bC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IC=()=>{var t;return(t=km())===null||t===void 0?void 0:t.config},CC=t=>{var e;return(e=km())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[If(JSON.stringify(n)),If(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function L2(){var t;const e=(t=km())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j2(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D2(){return xC.NODE_ADMIN===!0}function F2(){return!L2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V2(){try{return typeof indexedDB=="object"}catch{return!1}}function U2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z2,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nh.prototype.create)}}class nh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?B2(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new qr(i,c,r)}}function B2(t,e){return t.replace(W2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const W2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return JSON.parse(t)}function Ft(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ou(Cf(s[0])||""),n=Ou(Cf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},q2=function(t){const e=SC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},H2=function(t){const e=SC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function m_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ul(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Ow(s)&&Ow(a)){if(!ul(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ow(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)r[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)r[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const x=r[_-3]^r[_-8]^r[_-14]^r[_-16];r[_]=(x<<1|x>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4],m,g;for(let _=0;_<80;_++){_<40?_<20?(m=c^s&(a^c),g=1518500249):(m=s^a^c,g=1859775393):_<60?(m=s&a|c&(s|a),g=2400959708):(m=s^a^c,g=3395469782);const x=(i<<5|i>>>27)+m+u+g+r[_]&4294967295;u=c,c=a,a=(s<<30|s>>>2)&4294967295,s=i,i=x}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function G2(t,e){const n=new K2(t,e);return n.subscribe.bind(n)}class K2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Qp),i.error===void 0&&(i.error=Qp),i.complete===void 0&&(i.complete=Qp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}function uv(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ee(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Pm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ii{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J2(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X2(t){return t===io?void 0:t}function J2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const tL={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},nL=Ae.INFO,rL={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},iL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=nL,this._logHandler=iL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const sL=(t,e)=>e.some(n=>t instanceof n);let jw,Dw;function oL(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aL(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PC=new WeakMap,p_=new WeakMap,NC=new WeakMap,Yp=new WeakMap,hv=new WeakMap;function lL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ys(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&PC.set(n,t)}).catch(()=>{}),hv.set(e,t),e}function cL(t){if(p_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});p_.set(t,e)}let g_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return p_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uL(t){g_=t(g_)}function hL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xp(this),e,...n);return NC.set(r,e.sort?e.sort():[e]),ys(r)}:aL().includes(t)?function(...e){return t.apply(Xp(this),e),ys(PC.get(this))}:function(...e){return ys(t.apply(Xp(this),e))}}function dL(t){return typeof t=="function"?hL(t):(t instanceof IDBTransaction&&cL(t),sL(t,oL())?new Proxy(t,g_):t)}function ys(t){if(t instanceof IDBRequest)return lL(t);if(Yp.has(t))return Yp.get(t);const e=dL(t);return e!==t&&(Yp.set(t,e),hv.set(e,t)),e}const Xp=t=>hv.get(t);function fL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=ys(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ys(a.result),u.oldVersion,u.newVersion,ys(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const mL=["get","getKey","getAll","getAllKeys","count"],pL=["put","add","delete","clear"],Jp=new Map;function Fw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mL.includes(n)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let m=u.store;return r&&(m=m.index(c.shift())),(await Promise.all([m[n](...c),i&&u.done]))[0]};return Jp.set(e,s),s}uL(t=>({...t,get:(e,n,r)=>Fw(e,n)||t.get(e,n,r),has:(e,n)=>!!Fw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_L(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _L(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const __="@firebase/app",Vw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Nm("@firebase/app"),yL="@firebase/app-compat",vL="@firebase/analytics-compat",xL="@firebase/analytics",wL="@firebase/app-check-compat",EL="@firebase/app-check",TL="@firebase/auth",bL="@firebase/auth-compat",IL="@firebase/database",CL="@firebase/data-connect",kL="@firebase/database-compat",SL="@firebase/functions",PL="@firebase/functions-compat",NL="@firebase/installations",AL="@firebase/installations-compat",RL="@firebase/messaging",LL="@firebase/messaging-compat",ML="@firebase/performance",OL="@firebase/performance-compat",jL="@firebase/remote-config",DL="@firebase/remote-config-compat",FL="@firebase/storage",VL="@firebase/storage-compat",UL="@firebase/firestore",zL="@firebase/vertexai-preview",BL="@firebase/firestore-compat",WL="firebase",qL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="[DEFAULT]",HL={[__]:"fire-core",[yL]:"fire-core-compat",[xL]:"fire-analytics",[vL]:"fire-analytics-compat",[EL]:"fire-app-check",[wL]:"fire-app-check-compat",[TL]:"fire-auth",[bL]:"fire-auth-compat",[IL]:"fire-rtdb",[CL]:"fire-data-connect",[kL]:"fire-rtdb-compat",[SL]:"fire-fn",[PL]:"fire-fn-compat",[NL]:"fire-iid",[AL]:"fire-iid-compat",[RL]:"fire-fcm",[LL]:"fire-fcm-compat",[ML]:"fire-perf",[OL]:"fire-perf-compat",[jL]:"fire-rc",[DL]:"fire-rc-compat",[FL]:"fire-gcs",[VL]:"fire-gcs-compat",[UL]:"fire-fst",[BL]:"fire-fst-compat",[zL]:"fire-vertex","fire-js":"fire-js",[WL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,$L=new Map,v_=new Map;function Uw(t,e){try{t.container.addComponent(e)}catch(n){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bs(t){const e=t.name;if(v_.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;v_.set(e,t);for(const n of Sf.values())Uw(n,t);for(const n of $L.values())Uw(n,t);return!0}function rh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new nh("app","Firebase",GL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=qL;function AC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:y_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(n||(n=IC()),!n)throw vs.create("no-options");const s=Sf.get(i);if(s){if(ul(n,s.options)&&ul(r,s.config))return s;throw vs.create("duplicate-app",{appName:i})}const a=new eL(i);for(const u of v_.values())a.addComponent(u);const c=new KL(n,r,a);return Sf.set(i,c),c}function Am(t=y_){const e=Sf.get(t);if(!e&&t===y_&&IC())return AC();if(!e)throw vs.create("no-app",{appName:t});return e}function Qn(t,e,n){var r;let i=(r=HL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(c.join(" "));return}bs(new Ii(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="firebase-heartbeat-database",QL=1,ju="firebase-heartbeat-store";let eg=null;function RC(){return eg||(eg=fL(ZL,QL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw vs.create("idb-open",{originalErrorMessage:t.message})})),eg}async function YL(t){try{const n=(await RC()).transaction(ju),r=await n.objectStore(ju).get(LC(t));return await n.done,r}catch(e){if(e instanceof qr)Ci.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ci.warn(n.message)}}}async function zw(t,e){try{const r=(await RC()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,LC(t)),await r.done}catch(n){if(n instanceof qr)Ci.warn(n.message);else{const r=vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ci.warn(r.message)}}}function LC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1024,JL=30*24*60*60*1e3;class eM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=JL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bw(),{heartbeatsToSend:r,unsentEntries:i}=tM(this._heartbeatsCache.heartbeats),s=If(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ci.warn(n),""}}}function Bw(){return new Date().toISOString().substring(0,10)}function tM(t,e=XL){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ww(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ww(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V2()?U2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ww(t){return If(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){bs(new Ii("platform-logger",e=>new gL(e),"PRIVATE")),bs(new Ii("heartbeat",e=>new eM(e),"PRIVATE")),Qn(__,Vw,t),Qn(__,Vw,"esm2017"),Qn("fire-js","")}rM("");function dv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function MC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iM=MC,OC=new nh("auth","Firebase",MC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Nm("@firebase/auth");function sM(t,...e){Pf.logLevel<=Ae.WARN&&Pf.warn(`Auth (${js}): ${t}`,...e)}function qd(t,...e){Pf.logLevel<=Ae.ERROR&&Pf.error(`Auth (${js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,...e){throw mv(t,...e)}function yr(t,...e){return mv(t,...e)}function fv(t,e,n){const r=Object.assign(Object.assign({},iM()),{[e]:n});return new nh("auth","Firebase",r).create(e,{appName:t.name})}function _i(t){return fv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oM(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&er(t,"argument-error"),fv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OC.create(t,...e)}function de(t,e,...n){if(!t)throw mv(e,...n)}function hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qd(e),new Error(e)}function ki(t,e){t||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aM(){return qw()==="http:"||qw()==="https:"}function qw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aM()||O2()||"connection"in navigator)?navigator.onLine:!0}function cM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=cv()||kC()}get(){return lM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new ih(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oi(t,e,n,r,i={}){return DC(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=Ll(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:u},s);return M2()||(m.referrerPolicy="no-referrer"),jC.fetch()(FC(t,t.config.apiHost,n,c),m)})}async function DC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uM),e);try{const i=new fM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Td(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,m]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Td(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Td(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Td(t,"user-disabled",a);const g=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw fv(t,g,m);er(t,g)}}catch(i){if(i instanceof qr)throw i;er(t,"network-request-failed",{message:String(i)})}}async function sh(t,e,n,r,i={}){const s=await Oi(t,e,n,r,i);return"mfaPendingCredential"in s&&er(t,"multi-factor-auth-required",{_serverResponse:s}),s}function FC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?pv(t.config,i):`${t.config.apiScheme}://${i}`}function dM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),hM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Td(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yr(t,e,r);return i.customData._tokenResponse=n,i}function Hw(t){return t!==void 0&&t.enterprise!==void 0}class mM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pM(t,e){return Oi(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e){return Oi(t,"POST","/v1/accounts:delete",e)}async function VC(t,e){return Oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _M(t,e=!1){const n=He(t),r=await n.getIdToken(e),i=gv(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:nu(tg(i.auth_time)),issuedAtTime:nu(tg(i.iat)),expirationTime:nu(tg(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tg(t){return Number(t)*1e3}function gv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cf(n);return i?JSON.parse(i):(qd("Failed to decode base64 JWT payload"),null)}catch(i){return qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $w(t){const e=gv(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&yM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hl(t,VC(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UC(s.providerUserInfo):[],c=wM(t.providerData,a),u=t.isAnonymous,m=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),g=u?m:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new w_(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(t,_)}async function xM(t){const e=He(t);await Nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UC(t){return t.map(e=>{var{providerId:n}=e,r=dv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){const n=await DC(t,{},async()=>{const r=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=FC(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",jC.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TM(t,e){return Oi(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=$w(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await EM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Ka;return r&&(de(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new w_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _M(this,e)}reload(){return xM(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await hl(this,gM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,u,m,g;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(m=n.createdAt)!==null&&m!==void 0?m:void 0,I=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:S,emailVerified:O,isAnonymous:z,providerData:H,stsTokenManager:A}=n;de(S&&A,e,"internal-error");const P=Ka.fromJSON(this.name,A);de(typeof S=="string",e,"internal-error"),Zi(_,e.name),Zi(x,e.name),de(typeof O=="boolean",e,"internal-error"),de(typeof z=="boolean",e,"internal-error"),Zi(E,e.name),Zi(C,e.name),Zi(N,e.name),Zi(M,e.name),Zi(b,e.name),Zi(I,e.name);const R=new di({uid:S,auth:e,email:x,emailVerified:O,displayName:_,isAnonymous:z,photoURL:C,phoneNumber:E,tenantId:N,stsTokenManager:P,createdAt:b,lastLoginAt:I});return H&&Array.isArray(H)&&(R.providerData=H.map(j=>Object.assign({},j))),M&&(R._redirectEventId=M),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ka;i.updateFromServerResponse(n);const s=new di({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];de(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UC(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Ka;c.updateFromIdToken(r);const u=new di({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new w_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,m),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;function fi(t){ki(t instanceof Function,"Expected a class definition");let e=Gw.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zC.type="NONE";const Kw=zC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?di._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Za(fi(Kw),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let s=i[0]||fi(Kw);const a=Hd(r,e.config.apiKey,e.name);let c=null;for(const m of n)try{const g=await m._get(a);if(g){const _=di._fromJSON(e,g);m!==s&&(c=_),s=m;break}}catch{}const u=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Za(s,e,r):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async m=>{if(m!==s)try{await m._remove(a)}catch{}})),new Za(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GC(e))return"Blackberry";if(KC(e))return"Webos";if(WC(e))return"Safari";if((e.includes("chrome/")||qC(e))&&!e.includes("edge/"))return"Chrome";if($C(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BC(t=on()){return/firefox\//i.test(t)}function WC(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qC(t=on()){return/crios\//i.test(t)}function HC(t=on()){return/iemobile/i.test(t)}function $C(t=on()){return/android/i.test(t)}function GC(t=on()){return/blackberry/i.test(t)}function KC(t=on()){return/webos/i.test(t)}function _v(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bM(t=on()){var e;return _v(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IM(){return j2()&&document.documentMode===10}function ZC(t=on()){return _v(t)||$C(t)||KC(t)||GC(t)||/windows phone/i.test(t)||HC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t,e=[]){let n;switch(t){case"Browser":n=Zw(on());break;case"Worker":n=`${Zw(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e={}){return Oi(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=6;class PM{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:SM,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qw(this),this.idTokenSubscription=new Qw(this),this.beforeStateQueue=new CM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await VC(this,{idToken:e}),r=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(_i(this));const n=e?He(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kM(this),n=new PM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fs(t){return He(t)}class Qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=G2(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AM(t){Rm=t}function YC(t){return Rm.loadJS(t)}function RM(){return Rm.recaptchaEnterpriseScript}function LM(){return Rm.gapiScript}function MM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const OM="recaptcha-enterprise",jM="NO_RECAPTCHA";class DM{constructor(e){this.type=OM,this.auth=Fs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{pM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const m=new mM(u);return s.tenantId==null?s._agentRecaptchaConfig=m:s._tenantRecaptchaConfigs[s.tenantId]=m,a(m.siteKey)}}).catch(u=>{c(u)})})}function i(s,a,c){const u=window.grecaptcha;Hw(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(m=>{a(m)}).catch(()=>{a(jM)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!n&&Hw(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=RM();u.length!==0&&(u+=c),YC(u).then(()=>{i(c,s,a)}).catch(m=>{a(m)})}}).catch(c=>{a(c)})})}}async function Yw(t,e,n,r=!1){const i=new DM(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function E_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Yw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Yw(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t,e){const n=rh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ul(s,e??{}))return i;er(i,"already-initialized")}return n.initialize({options:e})}function VM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UM(t,e,n){const r=Fs(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=XC(e),{host:a,port:c}=zM(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),BM()}function XC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zM(t){const e=XC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xw(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Xw(a)}}}function Xw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}async function WM(t,e){return Oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e){return sh(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){return sh(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function $M(t,e){return sh(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends yv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Du(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E_(e,n,"signInWithPassword",qM);case"emailLink":return HM(e,{email:this._email,oobCode:this._password});default:er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E_(e,r,"signUpPassword",WM);case"emailLink":return $M(e,{idToken:n,email:this._email,oobCode:this._password});default:er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t,e){return sh(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="http://localhost";class Io extends yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=dv(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Io(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Qa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qa(e,n)}buildRequest(){const e={requestUri:GM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ll(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZM(t){const e=Bc(Wc(t)).link,n=e?Bc(Wc(e)).deep_link_id:null,r=Bc(Wc(t)).deep_link_id;return(r?Bc(Wc(r)).link:null)||r||n||e||t}class vv{constructor(e){var n,r,i,s,a,c;const u=Bc(Wc(e)),m=(n=u.apiKey)!==null&&n!==void 0?n:null,g=(r=u.oobCode)!==null&&r!==void 0?r:null,_=KM((i=u.mode)!==null&&i!==void 0?i:null);de(m&&g&&_,"argument-error"),this.apiKey=m,this.operation=_,this.code=g,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=ZM(e);try{return new vv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.providerId=Ml.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=vv.parseLink(n);return de(r,"argument-error"),Du._fromEmailAndCode(e,r.code,r.tenantId)}}Ml.PROVIDER_ID="password";Ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends oh{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Io._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends oh{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends oh{constructor(){super("twitter.com")}static credential(e,n){return Io._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return is.credential(n,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t,e){return sh(t,"POST","/v1/accounts:signUp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await di._fromIdTokenResponse(e,r,i),a=Jw(r);return new Co({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jw(r);return new Co({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends qr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Af(e,n,r,i)}}function JC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(t,s,e,r):s})}async function YM(t,e,n=!1){const r=await hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Co._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e,n=!1){const{auth:r}=t;if(dr(r.app))return Promise.reject(_i(r));const i="reauthenticate";try{const s=await hl(t,JC(r,i,e,t),n);de(s.idToken,r,"internal-error");const a=gv(s.idToken);de(a,r,"internal-error");const{sub:c}=a;return de(t.uid===c,r,"user-mismatch"),Co._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&er(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e,n=!1){if(dr(t.app))return Promise.reject(_i(t));const r="signIn",i=await JC(t,r,e),s=await Co._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JM(t,e){return ek(Fs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t){const e=Fs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eO(t,e,n){if(dr(t.app))return Promise.reject(_i(t));const r=Fs(t),a=await E_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QM).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&tk(t),u}),c=await Co._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function tO(t,e,n){return dr(t.app)?Promise.reject(_i(t)):JM(He(t),Ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e){return Oi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=He(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await hl(r,nO(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function iO(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function sO(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function oO(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function aO(t){return He(t).signOut()}const Rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=1e3,cO=10;class rk extends nk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);IM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,cO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rk.type="LOCAL";const uO=rk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends nk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ik.type="SESSION";const sk=ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async m=>m(n.origin,s)),u=await hO(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const m=wv("",20);i.port1.start();const g=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const x=_;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(x.data.response);break;default:clearTimeout(g),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function fO(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function mO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gO(){return ok()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="firebaseLocalStorageDb",_O=1,Lf="firebaseLocalStorage",lk="fbase_key";class ah{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function yO(){const t=indexedDB.deleteDatabase(ak);return new ah(t).toPromise()}function T_(){const t=indexedDB.open(ak,_O);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lf,{keyPath:lk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await yO(),e(await T_()))})})}async function eE(t,e,n){const r=Mm(t,!0).put({[lk]:e,value:n});return new ah(r).toPromise()}async function vO(t,e){const n=Mm(t,!1).get(e),r=await new ah(n).toPromise();return r===void 0?null:r.value}function tE(t,e){const n=Mm(t,!0).delete(e);return new ah(n).toPromise()}const xO=800,wO=3;class ck{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ok()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(gO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mO(),!this.activeServiceWorker)return;this.sender=new dO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T_();return await eE(e,Rf,"1"),await tE(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>eE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mm(i,!1).getAll();return new ah(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ck.type="LOCAL";const EO=ck;new ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){return e?fi(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends yv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TO(t){return ek(t.auth,new Ev(t),t.bypassAuthState)}function bO(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),XM(n,new Ev(t),t.bypassAuthState)}async function IO(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),YM(n,new Ev(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return bO;default:er(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new ih(2e3,1e4);async function kO(t,e,n){if(dr(t.app))return Promise.reject(yr(t,"operation-not-supported-in-this-environment"));const r=Fs(t);oM(t,e,xv);const i=uk(r,n);return new uo(r,"signInViaPopup",e,i).executeNotNull()}class uo extends hk{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=wv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CO.get())};e()}}uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="pendingRedirect",$d=new Map;class PO extends hk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$d.get(this.auth._key());if(!e){try{const r=await NO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$d.set(this.auth._key(),e)}return this.bypassAuthState||$d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NO(t,e){const n=LO(e),r=RO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function AO(t,e){$d.set(t._key(),e)}function RO(t){return fi(t._redirectPersistence)}function LO(t){return Hd(SO,t.config.apiKey,t.name)}async function MO(t,e,n=!1){if(dr(t.app))return Promise.reject(_i(t));const r=Fs(t),i=uk(r,e),a=await new PO(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=10*60*1e3;class jO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OO&&this.cachedEventUids.clear(),this.cachedEventUids.has(nE(e))}saveEventToCache(e){this.cachedEventUids.add(nE(e)),this.lastProcessedEventTime=Date.now()}}function nE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e={}){return Oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UO=/^https?/;async function zO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FO(t);for(const n of e)try{if(BO(n))return}catch{}er(t,"unauthorized-domain")}function BO(t){const e=x_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!UO.test(n))return!1;if(VO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new ih(3e4,6e4);function rE(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qO(t){return new Promise((e,n)=>{var r,i,s;function a(){rE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rE(),n(yr(t,"network-request-failed"))},timeout:WO.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fr().gapi)===null||s===void 0)&&s.load)a();else{const c=MM("iframefcb");return Fr()[c]=()=>{gapi.load?a():n(yr(t,"network-request-failed"))},YC(`${LM()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function HO(t){return Gd=Gd||qO(t),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new ih(5e3,15e3),GO="__/auth/iframe",KO="emulator/auth/iframe",ZO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YO(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pv(e,KO):`https://${t.config.authDomain}/${GO}`,r={apiKey:e.apiKey,appName:t.name,v:js},i=QO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ll(r).slice(1)}`}async function XO(t){const e=await HO(t),n=Fr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:YO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=yr(t,"network-request-failed"),c=Fr().setTimeout(()=>{s(a)},$O.get());function u(){Fr().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ej=500,tj=600,nj="_blank",rj="http://localhost";class iE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ij(t,e,n,r=ej,i=tj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},JO),{width:r.toString(),height:i.toString(),top:s,left:a}),m=on().toLowerCase();n&&(c=qC(m)?nj:n),BC(m)&&(e=e||rj,u.scrollbars="yes");const g=Object.entries(u).reduce((x,[E,C])=>`${x}${E}=${C},`,"");if(bM(m)&&c!=="_self")return sj(e||"",c),new iE(null);const _=window.open(e||"",c,g);de(_,t,"popup-blocked");try{_.focus()}catch{}return new iE(_)}function sj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="__/auth/handler",aj="emulator/auth/handler",lj=encodeURIComponent("fac");async function sE(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:i};if(e instanceof xv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",m_(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))a[g]=_}if(e instanceof oh){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(a.scopes=g.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const u=await t._getAppCheckToken(),m=u?`#${lj}=${encodeURIComponent(u)}`:"";return`${cj(t)}?${Ll(c).slice(1)}${m}`}function cj({config:t}){return t.emulator?pv(t,aj):`https://${t.authDomain}/${oj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="webStorageSupport";class uj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sk,this._completeRedirectFn=MO,this._overrideRedirectResult=AO}async _openPopup(e,n,r,i){var s;ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await sE(e,n,r,x_(),i);return ij(e,a,wv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await sE(e,n,r,x_(),i);return fO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ki(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XO(e),r=new jO(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ng,{type:ng},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ng];a!==void 0&&n(!!a),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZC()||WC()||_v()}}const hj=uj;var oE="@firebase/auth",aE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mj(t){bs(new Ii("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;de(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QC(t)},m=new NM(r,i,s,u);return VM(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bs(new Ii("auth-internal",e=>{const n=Fs(e.getProvider("auth").getImmediate());return(r=>new dj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(oE,aE,fj(t)),Qn(oE,aE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=5*60,gj=CC("authIdTokenMaxAge")||pj;let lE=null;const _j=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gj)return;const i=n==null?void 0:n.token;lE!==i&&(lE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yj(t=Am()){const e=rh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FM(t,{popupRedirectResolver:hj,persistence:[EO,uO,sk]}),r=CC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=_j(s.toString());sO(n,a,()=>a(n.currentUser)),iO(n,c=>a(c))}}const i=bC("auth");return i&&UM(n,`http://${i}`),n}function vj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=yr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",vj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mj("Browser");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,fk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,P){function R(){}R.prototype=P.prototype,A.D=P.prototype,A.prototype=new R,A.prototype.constructor=A,A.C=function(j,V,U){for(var D=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)D[Qe-2]=arguments[Qe];return P.prototype[V].apply(j,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,P,R){R||(R=0);var j=Array(16);if(typeof P=="string")for(var V=0;16>V;++V)j[V]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(V=0;16>V;++V)j[V]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=A.g[0],R=A.g[1],V=A.g[2];var U=A.g[3],D=P+(U^R&(V^U))+j[0]+3614090360&4294967295;P=R+(D<<7&4294967295|D>>>25),D=U+(V^P&(R^V))+j[1]+3905402710&4294967295,U=P+(D<<12&4294967295|D>>>20),D=V+(R^U&(P^R))+j[2]+606105819&4294967295,V=U+(D<<17&4294967295|D>>>15),D=R+(P^V&(U^P))+j[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(U^R&(V^U))+j[4]+4118548399&4294967295,P=R+(D<<7&4294967295|D>>>25),D=U+(V^P&(R^V))+j[5]+1200080426&4294967295,U=P+(D<<12&4294967295|D>>>20),D=V+(R^U&(P^R))+j[6]+2821735955&4294967295,V=U+(D<<17&4294967295|D>>>15),D=R+(P^V&(U^P))+j[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(U^R&(V^U))+j[8]+1770035416&4294967295,P=R+(D<<7&4294967295|D>>>25),D=U+(V^P&(R^V))+j[9]+2336552879&4294967295,U=P+(D<<12&4294967295|D>>>20),D=V+(R^U&(P^R))+j[10]+4294925233&4294967295,V=U+(D<<17&4294967295|D>>>15),D=R+(P^V&(U^P))+j[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(U^R&(V^U))+j[12]+1804603682&4294967295,P=R+(D<<7&4294967295|D>>>25),D=U+(V^P&(R^V))+j[13]+4254626195&4294967295,U=P+(D<<12&4294967295|D>>>20),D=V+(R^U&(P^R))+j[14]+2792965006&4294967295,V=U+(D<<17&4294967295|D>>>15),D=R+(P^V&(U^P))+j[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=P+(V^U&(R^V))+j[1]+4129170786&4294967295,P=R+(D<<5&4294967295|D>>>27),D=U+(R^V&(P^R))+j[6]+3225465664&4294967295,U=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(U^P))+j[11]+643717713&4294967295,V=U+(D<<14&4294967295|D>>>18),D=R+(U^P&(V^U))+j[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^U&(R^V))+j[5]+3593408605&4294967295,P=R+(D<<5&4294967295|D>>>27),D=U+(R^V&(P^R))+j[10]+38016083&4294967295,U=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(U^P))+j[15]+3634488961&4294967295,V=U+(D<<14&4294967295|D>>>18),D=R+(U^P&(V^U))+j[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^U&(R^V))+j[9]+568446438&4294967295,P=R+(D<<5&4294967295|D>>>27),D=U+(R^V&(P^R))+j[14]+3275163606&4294967295,U=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(U^P))+j[3]+4107603335&4294967295,V=U+(D<<14&4294967295|D>>>18),D=R+(U^P&(V^U))+j[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(V^U&(R^V))+j[13]+2850285829&4294967295,P=R+(D<<5&4294967295|D>>>27),D=U+(R^V&(P^R))+j[2]+4243563512&4294967295,U=P+(D<<9&4294967295|D>>>23),D=V+(P^R&(U^P))+j[7]+1735328473&4294967295,V=U+(D<<14&4294967295|D>>>18),D=R+(U^P&(V^U))+j[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=P+(R^V^U)+j[5]+4294588738&4294967295,P=R+(D<<4&4294967295|D>>>28),D=U+(P^R^V)+j[8]+2272392833&4294967295,U=P+(D<<11&4294967295|D>>>21),D=V+(U^P^R)+j[11]+1839030562&4294967295,V=U+(D<<16&4294967295|D>>>16),D=R+(V^U^P)+j[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^U)+j[1]+2763975236&4294967295,P=R+(D<<4&4294967295|D>>>28),D=U+(P^R^V)+j[4]+1272893353&4294967295,U=P+(D<<11&4294967295|D>>>21),D=V+(U^P^R)+j[7]+4139469664&4294967295,V=U+(D<<16&4294967295|D>>>16),D=R+(V^U^P)+j[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^U)+j[13]+681279174&4294967295,P=R+(D<<4&4294967295|D>>>28),D=U+(P^R^V)+j[0]+3936430074&4294967295,U=P+(D<<11&4294967295|D>>>21),D=V+(U^P^R)+j[3]+3572445317&4294967295,V=U+(D<<16&4294967295|D>>>16),D=R+(V^U^P)+j[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(R^V^U)+j[9]+3654602809&4294967295,P=R+(D<<4&4294967295|D>>>28),D=U+(P^R^V)+j[12]+3873151461&4294967295,U=P+(D<<11&4294967295|D>>>21),D=V+(U^P^R)+j[15]+530742520&4294967295,V=U+(D<<16&4294967295|D>>>16),D=R+(V^U^P)+j[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=P+(V^(R|~U))+j[0]+4096336452&4294967295,P=R+(D<<6&4294967295|D>>>26),D=U+(R^(P|~V))+j[7]+1126891415&4294967295,U=P+(D<<10&4294967295|D>>>22),D=V+(P^(U|~R))+j[14]+2878612391&4294967295,V=U+(D<<15&4294967295|D>>>17),D=R+(U^(V|~P))+j[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~U))+j[12]+1700485571&4294967295,P=R+(D<<6&4294967295|D>>>26),D=U+(R^(P|~V))+j[3]+2399980690&4294967295,U=P+(D<<10&4294967295|D>>>22),D=V+(P^(U|~R))+j[10]+4293915773&4294967295,V=U+(D<<15&4294967295|D>>>17),D=R+(U^(V|~P))+j[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~U))+j[8]+1873313359&4294967295,P=R+(D<<6&4294967295|D>>>26),D=U+(R^(P|~V))+j[15]+4264355552&4294967295,U=P+(D<<10&4294967295|D>>>22),D=V+(P^(U|~R))+j[6]+2734768916&4294967295,V=U+(D<<15&4294967295|D>>>17),D=R+(U^(V|~P))+j[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=P+(V^(R|~U))+j[4]+4149444226&4294967295,P=R+(D<<6&4294967295|D>>>26),D=U+(R^(P|~V))+j[11]+3174756917&4294967295,U=P+(D<<10&4294967295|D>>>22),D=V+(P^(U|~R))+j[2]+718787259&4294967295,V=U+(D<<15&4294967295|D>>>17),D=R+(U^(V|~P))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+P&4294967295,A.g[1]=A.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.u=function(A,P){P===void 0&&(P=A.length);for(var R=P-this.blockSize,j=this.B,V=this.h,U=0;U<P;){if(V==0)for(;U<=R;)i(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<P;)if(j[V++]=A.charCodeAt(U++),V==this.blockSize){i(this,j),V=0;break}}else for(;U<P;)if(j[V++]=A[U++],V==this.blockSize){i(this,j),V=0;break}}this.h=V,this.o+=P},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var P=1;P<A.length-8;++P)A[P]=0;var R=8*this.o;for(P=A.length-8;P<A.length;++P)A[P]=R&255,R/=256;for(this.u(A),A=Array(16),P=R=0;4>P;++P)for(var j=0;32>j;j+=8)A[R++]=this.g[P]>>>j&255;return A};function s(A,P){var R=c;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=P(A)}function a(A,P){this.h=P;for(var R=[],j=!0,V=A.length-1;0<=V;V--){var U=A[V]|0;j&&U==P||(R[V]=U,j=!1)}this.g=R}var c={};function u(A){return-128<=A&&128>A?s(A,function(P){return new a([P|0],0>P?-1:0)}):new a([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return _;if(0>A)return M(m(-A));for(var P=[],R=1,j=0;A>=R;j++)P[j]=A/R|0,R*=4294967296;return new a(P,0)}function g(A,P){if(A.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(A.charAt(0)=="-")return M(g(A.substring(1),P));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(P,8)),j=_,V=0;V<A.length;V+=8){var U=Math.min(8,A.length-V),D=parseInt(A.substring(V,V+U),P);8>U?(U=m(Math.pow(P,U)),j=j.j(U).add(m(D))):(j=j.j(R),j=j.add(m(D)))}return j}var _=u(0),x=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-M(this).m();for(var A=0,P=1,R=0;R<this.g.length;R++){var j=this.i(R);A+=(0<=j?j:4294967296+j)*P,P*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(N(this))return"-"+M(this).toString(A);for(var P=m(Math.pow(A,6)),R=this,j="";;){var V=O(R,P).g;R=b(R,V.j(P));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(A);if(R=V,C(R))return U+j;for(;6>U.length;)U="0"+U;j=U+j}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var P=0;P<A.g.length;P++)if(A.g[P]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=b(this,A),N(A)?-1:C(A)?0:1};function M(A){for(var P=A.g.length,R=[],j=0;j<P;j++)R[j]=~A.g[j];return new a(R,~A.h).add(x)}t.abs=function(){return N(this)?M(this):this},t.add=function(A){for(var P=Math.max(this.g.length,A.g.length),R=[],j=0,V=0;V<=P;V++){var U=j+(this.i(V)&65535)+(A.i(V)&65535),D=(U>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);j=D>>>16,U&=65535,D&=65535,R[V]=D<<16|U}return new a(R,R[R.length-1]&-2147483648?-1:0)};function b(A,P){return A.add(M(P))}t.j=function(A){if(C(this)||C(A))return _;if(N(this))return N(A)?M(this).j(M(A)):M(M(this).j(A));if(N(A))return M(this.j(M(A)));if(0>this.l(E)&&0>A.l(E))return m(this.m()*A.m());for(var P=this.g.length+A.g.length,R=[],j=0;j<2*P;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var V=0;V<A.g.length;V++){var U=this.i(j)>>>16,D=this.i(j)&65535,Qe=A.i(V)>>>16,Dn=A.i(V)&65535;R[2*j+2*V]+=D*Dn,I(R,2*j+2*V),R[2*j+2*V+1]+=U*Dn,I(R,2*j+2*V+1),R[2*j+2*V+1]+=D*Qe,I(R,2*j+2*V+1),R[2*j+2*V+2]+=U*Qe,I(R,2*j+2*V+2)}for(j=0;j<P;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=P;j<2*P;j++)R[j]=0;return new a(R,0)};function I(A,P){for(;(A[P]&65535)!=A[P];)A[P+1]+=A[P]>>>16,A[P]&=65535,P++}function S(A,P){this.g=A,this.h=P}function O(A,P){if(C(P))throw Error("division by zero");if(C(A))return new S(_,_);if(N(A))return P=O(M(A),P),new S(M(P.g),M(P.h));if(N(P))return P=O(A,M(P)),new S(M(P.g),P.h);if(30<A.g.length){if(N(A)||N(P))throw Error("slowDivide_ only works with positive integers.");for(var R=x,j=P;0>=j.l(A);)R=z(R),j=z(j);var V=H(R,1),U=H(j,1);for(j=H(j,2),R=H(R,2);!C(j);){var D=U.add(j);0>=D.l(A)&&(V=V.add(R),U=D),j=H(j,1),R=H(R,1)}return P=b(A,V.j(P)),new S(V,P)}for(V=_;0<=A.l(P);){for(R=Math.max(1,Math.floor(A.m()/P.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),U=m(R),D=U.j(P);N(D)||0<D.l(A);)R-=j,U=m(R),D=U.j(P);C(U)&&(U=x),V=V.add(U),A=b(A,D)}return new S(V,A)}t.A=function(A){return O(this,A).h},t.and=function(A){for(var P=Math.max(this.g.length,A.g.length),R=[],j=0;j<P;j++)R[j]=this.i(j)&A.i(j);return new a(R,this.h&A.h)},t.or=function(A){for(var P=Math.max(this.g.length,A.g.length),R=[],j=0;j<P;j++)R[j]=this.i(j)|A.i(j);return new a(R,this.h|A.h)},t.xor=function(A){for(var P=Math.max(this.g.length,A.g.length),R=[],j=0;j<P;j++)R[j]=this.i(j)^A.i(j);return new a(R,this.h^A.h)};function z(A){for(var P=A.g.length+1,R=[],j=0;j<P;j++)R[j]=A.i(j)<<1|A.i(j-1)>>>31;return new a(R,A.h)}function H(A,P){var R=P>>5;P%=32;for(var j=A.g.length-R,V=[],U=0;U<j;U++)V[U]=0<P?A.i(U+R)>>>P|A.i(U+R+1)<<32-P:A.i(U+R);return new a(V,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fk=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=g,yo=a}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mk,qc,pk,Kd,b_,gk,_k,yk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,w){return h==Array.prototype||h==Object.prototype||(h[y]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(h,y){if(y)e:{var w=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var W=h[k];if(!(W in w))break e;w=w[W]}h=h[h.length-1],k=w[h],y=y(k),y!=k&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}function s(h,y){h instanceof String&&(h+="");var w=0,k=!1,W={next:function(){if(!k&&w<h.length){var G=w++;return{value:y(G,h[G]),done:!1}}return k=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(h){return h||function(){return s(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function _(h,y,w){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,k),h.apply(y,W)}}return function(){return h.apply(y,arguments)}}function x(h,y,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,x.apply(null,arguments)}function E(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function C(h,y){function w(){}w.prototype=y.prototype,h.aa=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(k,W,G){for(var te=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)te[Ve-2]=arguments[Ve];return y.prototype[W].apply(k,te)}}function N(h){const y=h.length;if(0<y){const w=Array(y);for(let k=0;k<y;k++)w[k]=h[k];return w}return[]}function M(h,y){for(let w=1;w<arguments.length;w++){const k=arguments[w];if(u(k)){const W=h.length||0,G=k.length||0;h.length=W+G;for(let te=0;te<G;te++)h[W+te]=k[te]}else h.push(k)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function I(h){return/^[\s\xa0]*$/.test(h)}function S(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function O(h){return O[" "](h),h}O[" "]=function(){};var z=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function H(h,y,w){for(const k in h)y.call(w,h[k],k,h)}function A(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function P(h){const y={};for(const w in h)y[w]=h[w];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,y){let w,k;for(let W=1;W<arguments.length;W++){k=arguments[W];for(w in k)h[w]=k[w];for(let G=0;G<R.length;G++)w=R[G],Object.prototype.hasOwnProperty.call(k,w)&&(h[w]=k[w])}}function V(h){var y=1;h=h.split(":");const w=[];for(;0<y&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function U(h){c.setTimeout(()=>{throw h},0)}function D(){var h=ne;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Qe{constructor(){this.h=this.g=null}add(y,w){const k=Dn.get();k.set(y,w),this.h?this.h.next=k:this.g=k,this.h=k}}var Dn=new b(()=>new ut,h=>h.reset());class ut{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Nt,K=!1,ne=new Qe,Y=()=>{const h=c.Promise.resolve(void 0);Nt=()=>{h.then(ce)}};var ce=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(w){U(w)}var y=Dn;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}K=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h}();function Ee(h,y){if(Pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(z){e:{try{O(y.nodeName);var W=!0;break e}catch{}W=!1}W||(y=null)}}else w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement);this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ge[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ee.aa.h.call(this)}}C(Ee,Pe);var ge={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),Ir=0;function bh(h,y,w,k,W){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!k,this.ha=W,this.key=++Ir,this.da=this.fa=!1}function Di(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Fi(h){this.src=h,this.g={},this.h=0}Fi.prototype.add=function(h,y,w,k,W){var G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);var te=Bs(h,y,k,W);return-1<te?(y=h[te],w||(y.fa=!1)):(y=new bh(y,this.src,G,!!k,W),y.fa=w,h.push(y)),y};function Gr(h,y){var w=y.type;if(w in h.g){var k=h.g[w],W=Array.prototype.indexOf.call(k,y,void 0),G;(G=0<=W)&&Array.prototype.splice.call(k,W,1),G&&(Di(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Bs(h,y,w,k){for(var W=0;W<h.length;++W){var G=h[W];if(!G.da&&G.listener==y&&G.capture==!!w&&G.ha==k)return W}return-1}var Bl="closure_lm_"+(1e6*Math.random()|0),qo={};function Wl(h,y,w,k,W){if(Array.isArray(y)){for(var G=0;G<y.length;G++)Wl(h,y[G],w,k,W);return null}return w=kh(w),h&&h[Ct]?h.K(y,w,m(k)?!!k.capture:!1,W):ql(h,y,w,!1,k,W)}function ql(h,y,w,k,W,G){if(!y)throw Error("Invalid event type");var te=m(W)?!!W.capture:!!W,Ve=Ko(h);if(Ve||(h[Bl]=Ve=new Fi(h)),w=Ve.add(y,w,k,te,G),w.proxy)return w;if(k=Ho(),w.proxy=k,k.src=h,k.listener=w,h.addEventListener)Fe||(W=te),W===void 0&&(W=!1),h.addEventListener(y.toString(),k,W);else if(h.attachEvent)h.attachEvent(Go(y.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ho(){function h(w){return y.call(h.src,h.listener,w)}const y=Ch;return h}function Ih(h,y,w,k,W){if(Array.isArray(y))for(var G=0;G<y.length;G++)Ih(h,y[G],w,k,W);else k=m(k)?!!k.capture:!!k,w=kh(w),h&&h[Ct]?(h=h.i,y=String(y).toString(),y in h.g&&(G=h.g[y],w=Bs(G,w,k,W),-1<w&&(Di(G[w]),Array.prototype.splice.call(G,w,1),G.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ko(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Bs(y,w,k,W)),(w=-1<h?y[h]:null)&&$o(w))}function $o(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ct])Gr(y.i,h);else{var w=h.type,k=h.proxy;y.removeEventListener?y.removeEventListener(w,k,h.capture):y.detachEvent?y.detachEvent(Go(w),k):y.addListener&&y.removeListener&&y.removeListener(k),(w=Ko(y))?(Gr(w,h),w.h==0&&(w.src=null,y[Bl]=null)):Di(h)}}}function Go(h){return h in qo?qo[h]:qo[h]="on"+h}function Ch(h,y){if(h.da)h=!0;else{y=new Ee(y,this);var w=h.listener,k=h.ha||h.src;h.fa&&$o(h),h=w.call(k,y)}return h}function Ko(h){return h=h[Bl],h instanceof Fi?h:null}var Hl="__closure_events_fn_"+(1e9*Math.random()>>>0);function kh(h){return typeof h=="function"?h:(h[Hl]||(h[Hl]=function(y){return h.handleEvent(y)}),h[Hl])}function _t(){xe.call(this),this.i=new Fi(this),this.M=this,this.F=null}C(_t,xe),_t.prototype[Ct]=!0,_t.prototype.removeEventListener=function(h,y,w,k){Ih(this,h,y,w,k)};function At(h,y){var w,k=h.F;if(k)for(w=[];k;k=k.F)w.push(k);if(h=h.M,k=y.type||y,typeof y=="string")y=new Pe(y,h);else if(y instanceof Pe)y.target=y.target||h;else{var W=y;y=new Pe(k,h),j(y,W)}if(W=!0,w)for(var G=w.length-1;0<=G;G--){var te=y.g=w[G];W=Ws(te,k,!0,y)&&W}if(te=y.g=h,W=Ws(te,k,!0,y)&&W,W=Ws(te,k,!1,y)&&W,w)for(G=0;G<w.length;G++)te=y.g=w[G],W=Ws(te,k,!1,y)&&W}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var w=h.g[y],k=0;k<w.length;k++)Di(w[k]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,w,k){return this.i.add(String(h),y,!1,w,k)},_t.prototype.L=function(h,y,w,k){return this.i.add(String(h),y,!0,w,k)};function Ws(h,y,w,k){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var W=!0,G=0;G<y.length;++G){var te=y[G];if(te&&!te.da&&te.capture==w){var Ve=te.listener,yt=te.ha||te.src;te.fa&&Gr(h.i,te),W=Ve.call(yt,k)!==!1&&W}}return W&&!k.defaultPrevented}function Sh(h,y,w){if(typeof h=="function")w&&(h=x(h,w));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(h,y||0)}function $l(h){h.g=Sh(()=>{h.g=null,h.i&&(h.i=!1,$l(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ph extends xe{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$l(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(h){xe.call(this),this.h=h,this.g={}}C(qs,xe);var Gl=[];function Zo(h){H(h.g,function(y,w){this.g.hasOwnProperty(w)&&$o(y)},h),h.g={}}qs.prototype.N=function(){qs.aa.N.call(this),Zo(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=c.JSON.stringify,pp=c.JSON.parse,Hs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Kl(){}Kl.prototype.h=null;function Nh(h){return h.h||(h.h=h.i())}function Zl(){}var Vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yo(){Pe.call(this,"d")}C(Yo,Pe);function Ql(){Pe.call(this,"c")}C(Ql,Pe);var Kr={},Ah=null;function Xo(){return Ah=Ah||new _t}Kr.La="serverreachability";function Rh(h){Pe.call(this,Kr.La,h)}C(Rh,Pe);function $s(h){const y=Xo();At(y,new Rh(y))}Kr.STAT_EVENT="statevent";function Jo(h,y){Pe.call(this,Kr.STAT_EVENT,h),this.stat=y}C(Jo,Pe);function Bt(h){const y=Xo();At(y,new Jo(y,h))}Kr.Ma="timingevent";function Lh(h,y){Pe.call(this,Kr.Ma,h),this.size=y}C(Lh,Pe);function Gs(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Ks(){this.g=!0}Ks.prototype.xa=function(){this.g=!1};function Fn(h,y,w,k,W,G){h.info(function(){if(h.g)if(G)for(var te="",Ve=G.split("&"),yt=0;yt<Ve.length;yt++){var Le=Ve[yt].split("=");if(1<Le.length){var qe=Le[0];Le=Le[1];var st=qe.split("_");te=2<=st.length&&st[1]=="type"?te+(qe+"="+Le+"&"):te+(qe+"=redacted&")}}else te=null;else te=G;return"XMLHTTP REQ ("+k+") [attempt "+W+"]: "+y+`
`+w+`
`+te})}function ae(h,y,w,k,W,G,te){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+W+"]: "+y+`
`+w+`
`+G+" "+te})}function Zr(h,y,w,k){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Oh(h,w)+(k?" "+k:"")})}function Mh(h,y){h.info(function(){return"TIMEOUT: "+y})}Ks.prototype.info=function(){};function Oh(h,y){if(!h.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var k=w[h];if(!(2>k.length)){var W=k[1];if(Array.isArray(W)&&!(1>W.length)){var G=W[0];if(G!="noop"&&G!="stop"&&G!="close")for(var te=1;te<W.length;te++)W[te]=""}}}}return Qo(w)}catch{return y}}var Zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ea={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ta;function tr(){}C(tr,Kl),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},ta=new tr;function nr(h,y,w,k){this.j=h,this.i=y,this.l=w,this.R=k||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jh}function jh(){this.i=null,this.g="",this.h=!1}var Dh={},Yl={};function Xl(h,y,w){h.L=1,h.v=Un(ht(y)),h.m=w,h.P=!0,Jl(h,null)}function Jl(h,y){h.F=Date.now(),ra(h),h.A=ht(h.v);var w=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),Uh(w.i,"t",k),h.C=0,w=h.j.J,h.h=new jh,h.g=Gh(h.j,w?y:null,!h.m),0<h.O&&(h.M=new Ph(x(h.Y,h,h.g),h.O)),y=h.U,w=h.g,k=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Gl[0]=W.toString()),W=Gl);for(var G=0;G<W.length;G++){var te=Wl(w,W[G],k||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),$s(),Fn(h.i,h.u,h.A,h.l,h.R,h.m)}nr.prototype.ca=function(h){h=h.target;const y=this.M;y&&an(h)==3?y.j():this.Y(h)},nr.prototype.Y=function(h){try{if(h==this.g)e:{const st=an(this.g);var y=this.g.Ba();const $i=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||pc(this.g)))){this.J||st!=4||y==7||(y==8||0>=$i?$s(3):$s(2)),ec(this);var w=this.g.Z();this.X=w;t:if(Fh(this)){var k=pc(this.g);h="";var W=k.length,G=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Qs(this);var te="";break t}this.h.i=new c.TextDecoder}for(y=0;y<W;y++)this.h.h=!0,h+=this.h.i.decode(k[y],{stream:!(G&&y==W-1)});k.length=0,this.h.g+=h,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=w==200,ae(this.i,this.u,this.A,this.l,this.R,st,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,yt=this.g;if((Ve=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ve)){var Le=Ve;break t}}Le=null}if(w=Le)Zr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ys(this,w);else{this.o=!1,this.s=3,Bt(12),Qr(this),Qs(this);break e}}if(this.P){w=!0;let ft;for(;!this.J&&this.C<te.length;)if(ft=na(this,te),ft==Yl){st==4&&(this.s=4,Bt(14),w=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Dh){this.s=4,Bt(15),Zr(this.i,this.l,te,"[Invalid Chunk]"),w=!1;break}else Zr(this.i,this.l,ft,null),Ys(this,ft);if(Fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||te.length!=0||this.h.h||(this.s=1,Bt(16),w=!1),this.o=this.o&&w,!w)Zr(this.i,this.l,te,"[Invalid Chunked Response]"),Qr(this),Qs(this);else if(0<te.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),da(qe),qe.M=!0,Bt(11))}}else Zr(this.i,this.l,te,null),Ys(this,te);st==4&&Qr(this),this.o&&!this.J&&(st==4?_c(this.j,this):(this.o=!1,ra(this)))}else gp(this.g),w==400&&0<te.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Qr(this),Qs(this)}}}catch{}finally{}};function Fh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function na(h,y){var w=h.C,k=y.indexOf(`
`,w);return k==-1?Yl:(w=Number(y.substring(w,k)),isNaN(w)?Dh:(k+=1,k+w>y.length?Yl:(y=y.slice(k,k+w),h.C=k+w,y)))}nr.prototype.cancel=function(){this.J=!0,Qr(this)};function ra(h){h.S=Date.now()+h.I,Vh(h,h.I)}function Vh(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Gs(x(h.ba,h),y)}function ec(h){h.B&&(c.clearTimeout(h.B),h.B=null)}nr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Mh(this.i,this.A),this.L!=2&&($s(),Bt(17)),Qr(this),this.s=2,Qs(this)):Vh(this,this.S-h)};function Qs(h){h.j.G==0||h.J||_c(h.j,h)}function Qr(h){ec(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Zo(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ys(h,y){try{var w=h.j;if(w.G!=0&&(w.g==h||Ne(w.h,h))){if(!h.K&&Ne(w.h,h)&&w.G==3){try{var k=w.Da.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var W=k;if(W[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)ma(w),ua(w);else break e;ha(w),Bt(18)}}else w.za=W[1],0<w.za-w.T&&37500>W[2]&&w.F&&w.v==0&&!w.C&&(w.C=Gs(x(w.Za,w),6e3));if(1>=Ui(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ti(w,11)}else if((h.K||w.g==h)&&ma(w),!I(y))for(W=w.Da.g.parse(y),y=0;y<W.length;y++){let Le=W[y];if(w.T=Le[0],Le=Le[1],w.G==2)if(Le[0]=="c"){w.K=Le[1],w.ia=Le[2];const qe=Le[3];qe!=null&&(w.la=qe,w.j.info("VER="+w.la));const st=Le[4];st!=null&&(w.Aa=st,w.j.info("SVER="+w.Aa));const $i=Le[5];$i!=null&&typeof $i=="number"&&0<$i&&(k=1.5*$i,w.L=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;const ft=h.g;if(ft){const ga=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var G=k.h;G.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Ge(G,G.h),G.h=null))}if(k.D){const Sr=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Sr&&(k.ya=Sr,me(k.I,k.D,Sr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),k=w;var te=h;if(k.qa=pa(k,k.J?k.ia:null,k.W),te.K){Js(k.h,te);var Ve=te,yt=k.L;yt&&(Ve.I=yt),Ve.B&&(ec(Ve),ra(Ve)),k.g=te}else sr(k);0<w.i.length&&Hi(w)}else Le[0]!="stop"&&Le[0]!="close"||ti(w,7);else w.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?ti(w,7):ca(w):Le[0]!="noop"&&w.l&&w.l.ta(Le),w.v=0)}}$s(4)}catch{}}var Xs=class{constructor(h,y){this.g=h,this.map=y}};function tc(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ui(h){return h.h?1:h.g?h.g.size:0}function Ne(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ge(h,y){h.g?h.g.add(y):h.h=y}function Js(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}tc.prototype.cancel=function(){if(this.i=Yr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Yr(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.D);return y}return N(h.i)}function zi(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(u(h)){for(var y=[],w=h.length,k=0;k<w;k++)y.push(h[k]);return y}y=[],w=0;for(k in h)y[w++]=h[k];return y}function rc(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||typeof h=="string"){var y=[];h=h.length;for(var w=0;w<h;w++)y.push(w);return y}y=[],w=0;for(const k in h)y[w++]=k;return y}}}function ve(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(u(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var w=rc(h),k=zi(h),W=k.length,G=0;G<W;G++)y.call(void 0,k[G],w&&w[G],h)}var tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ic(h,y){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var k=h[w].indexOf("="),W=null;if(0<=k){var G=h[w].substring(0,k);W=h[w].substring(k+1)}else G=h[w];y(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Vn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Vn){this.h=h.h,ia(this,h.j),this.o=h.o,this.g=h.g,Xr(this,h.s),this.l=h.l;var y=h.i,w=new Jr;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),Cr(this,w),this.m=h.m}else h&&(y=String(h).match(tt))?(this.h=!1,ia(this,y[1]||"",!0),this.o=rr(y[2]||""),this.g=rr(y[3]||"",!0),Xr(this,y[4]),this.l=rr(y[5]||"",!0),Cr(this,y[6]||"",!0),this.m=rr(y[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}Vn.prototype.toString=function(){var h=[],y=this.j;y&&h.push(ir(y,Bi,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ir(y,Bi,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(ir(w,w.charAt(0)=="/"?ac:oc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",ir(w,lc)),h.join("")};function ht(h){return new Vn(h)}function ia(h,y,w){h.j=w?rr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Xr(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Cr(h,y,w){y instanceof Jr?(h.i=y,zn(h.i,h.h)):(w||(y=ir(y,sa)),h.i=new Jr(y,h.h))}function me(h,y,w){h.i.set(y,w)}function Un(h){return me(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function rr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ir(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,sc),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bi=/[#\/\?@]/g,oc=/[#\?:]/g,ac=/[#\?]/g,sa=/[#\?@]/g,lc=/#/g;function Jr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&ic(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Jr.prototype,t.add=function(h,y){Cn(this),this.i=null,h=ue(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function cc(h,y){Cn(h),y=ue(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function oa(h,y){return Cn(h),y=ue(h,y),h.g.has(y)}t.forEach=function(h,y){Cn(this),this.g.forEach(function(w,k){w.forEach(function(W){h.call(y,W,k,this)},this)},this)},t.na=function(){Cn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let k=0;k<y.length;k++){const W=h[k];for(let G=0;G<W.length;G++)w.push(y[k])}return w},t.V=function(h){Cn(this);let y=[];if(typeof h=="string")oa(this,h)&&(y=y.concat(this.g.get(ue(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)y=y.concat(h[w])}return y},t.set=function(h,y){return Cn(this),this.i=null,h=ue(this,h),oa(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Uh(h,y,w){cc(h,y),0<w.length&&(h.i=null,h.g.set(ue(h,y),N(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var k=y[w];const G=encodeURIComponent(String(k)),te=this.V(k);for(k=0;k<te.length;k++){var W=G;te[k]!==""&&(W+="="+encodeURIComponent(String(te[k]))),h.push(W)}}return this.i=h.join("&")};function ue(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function zn(h,y){y&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(w,k){var W=k.toLowerCase();k!=W&&(cc(this,k),Uh(this,W,w))},h)),h.j=y}function We(h,y){const w=new Ks;if(c.Image){const k=new Image;k.onload=E(Bn,w,"TestLoadImage: loaded",!0,y,k),k.onerror=E(Bn,w,"TestLoadImage: error",!1,y,k),k.onabort=E(Bn,w,"TestLoadImage: abort",!1,y,k),k.ontimeout=E(Bn,w,"TestLoadImage: timeout",!1,y,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else y(!1)}function zh(h,y){const w=new Ks,k=new AbortController,W=setTimeout(()=>{k.abort(),Bn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:k.signal}).then(G=>{clearTimeout(W),G.ok?Bn(w,"TestPingServer: ok",!0,y):Bn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Bn(w,"TestPingServer: error",!1,y)})}function Bn(h,y,w,k,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),k(w)}catch{}}function uc(){this.g=new Hs}function hc(h,y,w){const k=w||"";try{ve(h,function(W,G){let te=W;m(W)&&(te=Qo(W)),y.push(k+G+"="+encodeURIComponent(te))})}catch(W){throw y.push(k+"type="+encodeURIComponent("_badmap")),W}}function Wn(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Wn,Kl),Wn.prototype.g=function(){return new Wi(this.l,this.j)},Wn.prototype.i=function(h){return function(){return h}}({});function Wi(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Wi,_t),t=Wi.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,kn(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,it(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?it(this):kn(this),this.readyState==3&&qi(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,it(this))},t.Qa=function(h){this.g&&(this.response=h,it(this))},t.ga=function(){this.g&&it(this)};function it(h){h.readyState=4,h.l=null,h.j=null,h.v=null,kn(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function kn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function dc(h){let y="";return H(h,function(w,k){y+=k,y+=":",y+=w,y+=`\r
`}),y}function aa(h,y,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=dc(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):me(h,y,w))}function nt(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(nt,_t);var Bh=/^https?$/i,fc=["POST","PUT"];t=nt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ta.g(),this.v=this.o?Nh(this.o):Nh(ta),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){Wh(this,G);return}if(h=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var W in k)w.set(W,k[W]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const G of k.keys())w.set(G,k.get(G));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(G=>G.toLowerCase()=="content-type"),W=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fc,y,void 0))||k||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,te]of w)this.g.setRequestHeader(G,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mn(this),this.u=!0,this.g.send(h),this.u=!1}catch(G){Wh(this,G)}};function Wh(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,mc(h),la(h)}function mc(h){h.A||(h.A=!0,At(h,"complete"),At(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,At(this,"complete"),At(this,"abort"),la(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ke(this):this.bb())},t.bb=function(){ke(this)};function ke(h){if(h.h&&typeof a<"u"&&(!h.v[1]||an(h)!=4||h.Z()!=2)){if(h.u&&an(h)==4)Sh(h.Ea,0,h);else if(At(h,"readystatechange"),an(h)==4){h.h=!1;try{const te=h.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var k;if(k=te===0){var W=String(h.D).match(tt)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),k=!Bh.test(W?W.toLowerCase():"")}w=k}if(w)At(h,"complete"),At(h,"success");else{h.m=6;try{var G=2<an(h)?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.Z()+"]",mc(h)}}finally{la(h)}}}}function la(h,y){if(h.g){mn(h);const w=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||At(h,"ready");try{w.onreadystatechange=k}catch{}}}function mn(h){h.I&&(c.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function an(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),pp(y)}};function pc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function gp(h){const y={};h=(h.g&&2<=an(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(I(h[k]))continue;var w=V(h[k]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const G=y[W]||[];y[W]=G,G.push(w)}A(y,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function qh(h){this.Aa=0,this.i=[],this.j=new Ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,h),this.cb=ei("retryDelaySeedMs",1e4,h),this.Wa=ei("forwardChannelMaxRetries",2,h),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new tc(h&&h.concurrentRequestLimit),this.Da=new uc,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qh.prototype,t.la=8,t.G=1,t.connect=function(h,y,w,k){Bt(0),this.W=h,this.H=y||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.I=pa(this,null,this.W),Hi(this)};function ca(h){if(Hh(h),h.G==3){var y=h.U++,w=ht(h.I);if(me(w,"SID",h.K),me(w,"RID",y),me(w,"TYPE","terminate"),eo(h,w),y=new nr(h,h.j,y),y.L=2,y.v=Un(ht(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.v,w=!0),w||(y.g=Gh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ra(y)}$h(h)}function ua(h){h.g&&(da(h),h.g.cancel(),h.g=null)}function Hh(h){ua(h),h.u&&(c.clearTimeout(h.u),h.u=null),ma(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Hi(h){if(!nc(h.h)&&!h.s){h.s=!0;var y=h.Ga;Nt||Y(),K||(Nt(),K=!0),ne.add(y,h),h.B=0}}function _p(h,y){return Ui(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Gs(x(h.Ga,h,y),yc(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new nr(this,this.j,h);let G=this.o;if(this.S&&(G?(G=P(G),j(G,this.S)):G=this.S),this.m!==null||this.O||(W.H=G,G=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=gc(this,W,y),w=ht(this.I),me(w,"RID",h),me(w,"CVER",22),this.D&&me(w,"X-HTTP-Session-Id",this.D),eo(this,w),G&&(this.O?y="headers="+encodeURIComponent(String(dc(G)))+"&"+y:this.m&&aa(w,this.m,G)),Ge(this.h,W),this.Ua&&me(w,"TYPE","init"),this.P?(me(w,"$req",y),me(w,"SID","null"),W.T=!0,Xl(W,w,null)):Xl(W,w,y),this.G=2}}else this.G==3&&(h?Sn(this,h):this.i.length==0||nc(this.h)||Sn(this))};function Sn(h,y){var w;y?w=y.l:w=h.U++;const k=ht(h.I);me(k,"SID",h.K),me(k,"RID",w),me(k,"AID",h.T),eo(h,k),h.m&&h.o&&aa(k,h.m,h.o),w=new nr(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),y&&(h.i=y.D.concat(h.i)),y=gc(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ge(h.h,w),Xl(w,k,y)}function eo(h,y){h.H&&H(h.H,function(w,k){me(y,k,w)}),h.l&&ve({},function(w,k){me(y,k,w)})}function gc(h,y,w){w=Math.min(h.i.length,w);var k=h.l?x(h.l.Na,h.l,h):null;e:{var W=h.i;let G=-1;for(;;){const te=["count="+w];G==-1?0<w?(G=W[0].g,te.push("ofs="+G)):G=0:te.push("ofs="+G);let Ve=!0;for(let yt=0;yt<w;yt++){let Le=W[yt].g;const qe=W[yt].map;if(Le-=G,0>Le)G=Math.max(0,W[yt].g-100),Ve=!1;else try{hc(qe,te,"req"+Le+"_")}catch{k&&k(qe)}}if(Ve){k=te.join("&");break e}}}return h=h.i.splice(0,w),y.D=h,k}function sr(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;Nt||Y(),K||(Nt(),K=!0),ne.add(y,h),h.v=0}}function ha(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Gs(x(h.Fa,h),yc(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,fa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Gs(x(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),ua(this),fa(this))};function da(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function fa(h){h.g=new nr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=ht(h.qa);me(y,"RID","rpc"),me(y,"SID",h.K),me(y,"AID",h.T),me(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&me(y,"TO",h.ja),me(y,"TYPE","xmlhttp"),eo(h,y),h.m&&h.o&&aa(y,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Un(ht(y)),w.m=null,w.P=!0,Jl(w,h)}t.Za=function(){this.C!=null&&(this.C=null,ua(this),ha(this),Bt(19))};function ma(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function _c(h,y){var w=null;if(h.g==y){ma(h),da(h),h.g=null;var k=2}else if(Ne(h.h,y))w=y.D,Js(h.h,y),k=1;else return;if(h.G!=0){if(y.o)if(k==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var W=h.B;k=Xo(),At(k,new Lh(k,w)),Hi(h)}else sr(h);else if(W=y.s,W==3||W==0&&0<y.X||!(k==1&&_p(h,y)||k==2&&ha(h)))switch(w&&0<w.length&&(y=h.h,y.i=y.i.concat(w)),W){case 1:ti(h,5);break;case 4:ti(h,10);break;case 3:ti(h,6);break;default:ti(h,2)}}}function yc(h,y){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*y}function ti(h,y){if(h.j.info("Error code "+y),y==2){var w=x(h.fb,h),k=h.Xa;const W=!k;k=new Vn(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ia(k,"https"),Un(k),W?We(k.toString(),w):zh(k.toString(),w)}else Bt(2);h.G=0,h.l&&h.l.sa(y),$h(h),Hh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function $h(h){if(h.G=0,h.ka=[],h.l){const y=Yr(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ka,y),M(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function pa(h,y,w){var k=w instanceof Vn?ht(w):new Vn(w);if(k.g!="")y&&(k.g=y+"."+k.g),Xr(k,k.s);else{var W=c.location;k=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;var G=new Vn(null);k&&ia(G,k),y&&(G.g=y),W&&Xr(G,W),w&&(G.l=w),k=G}return w=h.D,y=h.ya,w&&y&&me(k,w,y),me(k,"VER",h.la),eo(h,k),k}function Gh(h,y,w){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new nt(new Wn({eb:w})):new nt(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vc(){}t=vc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function to(){}to.prototype.g=function(h,y){return new Rt(h,y)};function Rt(h,y){_t.call(this),this.g=new qh(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!I(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qn(this)}C(Rt,_t),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){ca(this.g)},Rt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Qo(h),h=w);y.i.push(new Xs(y.Ya++,h)),y.G==3&&Hi(y)},Rt.prototype.N=function(){this.g.l=null,delete this.j,ca(this.g),delete this.g,Rt.aa.N.call(this)};function kr(h){Yo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}C(kr,Yo);function Kh(){Ql.call(this),this.status=1}C(Kh,Ql);function qn(h){this.g=h}C(qn,vc),qn.prototype.ua=function(){At(this.g,"a")},qn.prototype.ta=function(h){At(this.g,new kr(h))},qn.prototype.sa=function(h){At(this.g,new Kh)},qn.prototype.ra=function(){At(this.g,"b")},to.prototype.createWebChannel=to.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,yk=function(){return new to},_k=function(){return Xo()},gk=Kr,b_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zs.NO_ERROR=0,Zs.TIMEOUT=8,Zs.HTTP_ERROR=6,Kd=Zs,ea.COMPLETE="complete",pk=ea,Zl.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",_t.prototype.listen=_t.prototype.K,qc=Zl,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,mk=nt}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const uE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new Nm("@firebase/firestore");function Rc(){return ko.logLevel}function oe(t,...e){if(ko.logLevel<=Ae.DEBUG){const n=e.map(Tv);ko.debug(`Firestore (${Ol}): ${t}`,...n)}}function Si(t,...e){if(ko.logLevel<=Ae.ERROR){const n=e.map(Tv);ko.error(`Firestore (${Ol}): ${t}`,...n)}}function So(t,...e){if(ko.logLevel<=Ae.WARN){const n=e.map(Tv);ko.warn(`Firestore (${Ol}): ${t}`,...n)}}function Tv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: `+t;throw Si(e),new Error(e)}function Be(t,e){t||pe()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wj{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new vk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Xt(e)}}class Ej{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Tj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ej(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ij{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new bj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Cj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new bt(0,0))}static max(){return new _e(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends Fu{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const kj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Fu{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return kj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ie(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ie(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Je.fromString(e))}static fromName(e){return new le(Je.fromString(e).popFirst(5))}static empty(){return new le(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Je(e.slice()))}}function Sj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new Is(i,le.empty(),e)}function Pj(t){return new Is(t.readTime,t.key,-1)}class Is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Is(_e.min(),le.empty(),-1)}static max(){return new Is(_e.max(),le.empty(),-1)}}function Nj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==Aj)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(i=>i?X.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new X((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const m=u;n(e[m]).next(g=>{a[m]=g,++c,c===s&&r(a)},g=>i(g))}})}static doWhile(e,n){return new X((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Lj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ch(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Iv.oe=-1;function Om(t){return t==null}function Mf(t){return t===0&&1/t==-1/0}function Mj(t){return typeof t=="number"&&Number.isInteger(t)&&!Mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class I_{constructor(e,n){this.comparator=e,this.root=n||xs.EMPTY}insert(e,n){return new I_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xs.BLACK,null,null))}remove(e){return new I_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Id(this.root,e,this.comparator,!1)}getReverseIterator(){return new Id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Id(this.root,e,this.comparator,!0)}},Id=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xs=class si{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??si.RED,this.left=i??si.EMPTY,this.right=s??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new si(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}};xs.EMPTY=null,xs.RED=!0,xs.BLACK=!1;xs.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new An([])}unionWith(e){let n=new $t(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ek("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const Oj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(t){if(Be(!!t),typeof t=="string"){let e=0;const n=Oj.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Po(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kv(t){const e=t.mapValue.fields.__previous_value__;return Cv(e)?kv(e):e}function Vu(t){const e=Cs(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r,i,s,a,c,u,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=m}}class fl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd={mapValue:{}};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:Fj(t)?9007199254740991:Dj(t)?10:11:pe()}function zr(t,e){if(t===e)return!0;const n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Cs(i.timestampValue),c=Cs(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Po(i.bytesValue).isEqual(Po(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return mt(i.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mt(i.integerValue)===mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=mt(i.doubleValue),c=mt(s.doubleValue);return a===c?Mf(a)===Mf(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(hE(a)!==hE(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!zr(a[u],c[u])))return!1;return!0}(t,e);default:return pe()}}function Uu(t,e){return(t.values||[]).find(n=>zr(n,e))!==void 0}function ml(t,e){if(t===e)return 0;const n=No(t),r=No(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,a){const c=mt(s.integerValue||s.doubleValue),u=mt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return fE(t.timestampValue,e.timestampValue);case 4:return fE(Vu(t),Vu(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,a){const c=Po(s),u=Po(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),u=a.split("/");for(let m=0;m<c.length&&m<u.length;m++){const g=je(c[m],u[m]);if(g!==0)return g}return je(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const c=je(mt(s.latitude),mt(a.latitude));return c!==0?c:je(mt(s.longitude),mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mE(t.arrayValue,e.arrayValue);case 10:return function(s,a){var c,u,m,g;const _=s.fields||{},x=a.fields||{},E=(c=_.value)===null||c===void 0?void 0:c.arrayValue,C=(u=x.value)===null||u===void 0?void 0:u.arrayValue,N=je(((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return N!==0?N:mE(E,C)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Cd.mapValue&&a===Cd.mapValue)return 0;if(s===Cd.mapValue)return 1;if(a===Cd.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),m=a.fields||{},g=Object.keys(m);u.sort(),g.sort();for(let _=0;_<u.length&&_<g.length;++_){const x=je(u[_],g[_]);if(x!==0)return x;const E=ml(c[u[_]],m[g[_]]);if(E!==0)return E}return je(u.length,g.length)}(t.mapValue,e.mapValue);default:throw pe()}}function fE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Cs(t),r=Cs(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function mE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ml(n[i],r[i]);if(s)return s}return je(n.length,r.length)}function pl(t){return C_(t)}function C_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Po(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=C_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${C_(n.fields[a])}`;return i+"}"}(t.mapValue):pe()}function pE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k_(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function gE(t){return!!t&&"nullValue"in t}function _E(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zd(t){return!!t&&"mapValue"in t}function Dj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=ru(a):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Zd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _n(ru(this.value))}}function Tk(t){const e=[];return Vo(t.fields,(n,r)=>{const i=new Vt([n]);if(Zd(r)){const s=Tk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new tn(e,0,_e.min(),_e.min(),_e.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new tn(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new tn(e,2,n,_e.min(),_e.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,_e.min(),_e.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.position=e,this.inclusive=n}}function yE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(a.referenceValue),n.key):r=ml(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bk=class{};class Tt extends bk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zj(e,n,r):n==="array-contains"?new qj(e,r):n==="in"?new Hj(e,r):n==="not-in"?new $j(e,r):n==="array-contains-any"?new Gj(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Bj(e,r):new Wj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ml(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends bk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Er(e,n)}matches(e){return Ik(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ik(t){return t.op==="and"}function Ck(t){return Uj(t)&&Ik(t)}function Uj(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function S_(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+pl(t.value);if(Ck(t))return t.filters.map(e=>S_(e)).join(",");{const e=t.filters.map(n=>S_(n)).join(",");return`${t.op}(${e})`}}function kk(t,e){return t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&zr(r.value,i.value)}(t,e):t instanceof Er?function(r,i){return i instanceof Er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&kk(a,i.filters[c]),!0):!1}(t,e):void pe()}function Sk(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`}(t):t instanceof Er?function(n){return n.op.toString()+" {"+n.getFilters().map(Sk).join(" ,")+"}"}(t):"Filter"}class zj extends Tt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class Bj extends Tt{constructor(e,n){super(e,"in",n),this.keys=Pk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Wj extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=Pk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Pk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class qj extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sv(n)&&Uu(n.arrayValue,this.value)}}class Hj extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class $j extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}}class Gj extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function xE(t,e=null,n=[],r=[],i=null,s=null,a=null){return new Kj(t,e,n,r,i,s,a)}function Pv(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>S_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pl(r)).join(",")),e.ue=n}return e.ue}function Nv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vE(t.startAt,e.startAt)&&vE(t.endAt,e.endAt)}function P_(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zj(t,e,n,r,i,s,a,c){return new jl(t,e,n,r,i,s,a,c)}function jm(t){return new jl(t)}function wE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nk(t){return t.collectionGroup!==null}function iu(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new $t(Vt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zu(s,r))}),n.has(Vt.keyField().canonicalString())||e.ce.push(new zu(Vt.keyField(),r))}return e.ce}function Vr(t){const e=ye(t);return e.le||(e.le=Qj(e,iu(t))),e.le}function Qj(t,e){if(t.limitType==="F")return xE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zu(i.field,s)});const n=t.endAt?new Of(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Of(t.startAt.position,t.startAt.inclusive):null;return xE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function N_(t,e){const n=t.filters.concat([e]);return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function A_(t,e,n){return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dm(t,e){return Nv(Vr(t),Vr(e))&&t.limitType===e.limitType}function Ak(t){return`${Pv(Vr(t))}|lt:${t.limitType}`}function Ia(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sk(i)).join(", ")}]`),Om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pl(i)).join(",")),`Target(${r})`}(Vr(t))}; limitType=${t.limitType})`}function Fm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of iu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){const m=yE(a,c,u);return a.inclusive?m<=0:m<0}(r.startAt,iu(r),i)||r.endAt&&!function(a,c,u){const m=yE(a,c,u);return a.inclusive?m>=0:m>0}(r.endAt,iu(r),i))}(t,e)}function Yj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rk(t){return(e,n)=>{let r=!1;for(const i of iu(t)){const s=Xj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Xj(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,a,c){const u=a.data.field(s),m=c.data.field(s);return u!==null&&m!==null?ml(u,m):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=new It(le.comparator);function Pi(){return Jj}const Lk=new It(le.comparator);function Hc(...t){let e=Lk;for(const n of t)e=e.insert(n.key,n);return e}function Mk(t){let e=Lk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ho(){return su()}function Ok(){return su()}function su(){return new Dl(t=>t.toString(),(t,e)=>t.isEqual(e))}const eD=new It(le.comparator),tD=new $t(le.comparator);function Re(...t){let e=tD;for(const n of t)e=e.add(n);return e}const nD=new $t(je);function rD(){return nD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function jk(t){return{integerValue:""+t}}function iD(t,e){return Mj(e)?jk(e):Av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this._=void 0}}function sD(t,e,n){return t instanceof Bu?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cv(s)&&(s=kv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof gl?Fk(t,e):t instanceof _l?Vk(t,e):function(i,s){const a=Dk(i,s),c=EE(a)+EE(i.Pe);return k_(a)&&k_(i.Pe)?jk(c):Av(i.serializer,c)}(t,e)}function oD(t,e,n){return t instanceof gl?Fk(t,e):t instanceof _l?Vk(t,e):n}function Dk(t,e){return t instanceof jf?function(r){return k_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Bu extends Vm{}class gl extends Vm{constructor(e){super(),this.elements=e}}function Fk(t,e){const n=Uk(e);for(const r of t.elements)n.some(i=>zr(i,r))||n.push(r);return{arrayValue:{values:n}}}class _l extends Vm{constructor(e){super(),this.elements=e}}function Vk(t,e){let n=Uk(e);for(const r of t.elements)n=n.filter(i=>!zr(i,r));return{arrayValue:{values:n}}}class jf extends Vm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function EE(t){return mt(t.integerValue||t.doubleValue)}function Uk(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n){this.field=e,this.transform=n}}function aD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gl&&i instanceof gl||r instanceof _l&&i instanceof _l?dl(r.elements,i.elements,zr):r instanceof jf&&i instanceof jf?zr(r.Pe,i.Pe):r instanceof Bu&&i instanceof Bu}(t.transform,e.transform)}class lD{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Um{}function zk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lv(t.key,Yn.none()):new uh(t.key,t.data,Yn.none());{const n=t.data,r=_n.empty();let i=new $t(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Vs(t.key,r,new An(i.toArray()),Yn.none())}}function cD(t,e,n){t instanceof uh?function(i,s,a){const c=i.value.clone(),u=bE(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(i,s,a){if(!Qd(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=bE(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(Bk(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ou(t,e,n,r){return t instanceof uh?function(s,a,c,u){if(!Qd(s.precondition,a))return c;const m=s.value.clone(),g=IE(s.fieldTransforms,u,a);return m.setAll(g),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vs?function(s,a,c,u){if(!Qd(s.precondition,a))return c;const m=IE(s.fieldTransforms,u,a),g=a.data;return g.setAll(Bk(s)),g.setAll(m),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(s,a,c){return Qd(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function uD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Dk(r.transform,i||null);s!=null&&(n===null&&(n=_n.empty()),n.set(r.field,s))}return n||null}function TE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dl(r,i,(s,a)=>aD(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uh extends Um{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vs extends Um{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bE(t,e,n){const r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,oD(a,c,n[i]))}return r}function IE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,sD(s,a,e))}return r}class Lv extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends Um{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ok();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const u=zk(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>TE(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>TE(n,r))}}class Mv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return eD}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Mv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Me;function pD(t){switch(t){default:return pe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Wk(t){if(t===void 0)return Si("GRPC error has no .code"),Z.UNKNOWN;switch(t){case xt.OK:return Z.OK;case xt.CANCELLED:return Z.CANCELLED;case xt.UNKNOWN:return Z.UNKNOWN;case xt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case xt.INTERNAL:return Z.INTERNAL;case xt.UNAVAILABLE:return Z.UNAVAILABLE;case xt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case xt.NOT_FOUND:return Z.NOT_FOUND;case xt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case xt.ABORTED:return Z.ABORTED;case xt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case xt.DATA_LOSS:return Z.DATA_LOSS;default:return pe()}}(Me=xt||(xt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new yo([4294967295,4294967295],0);function CE(t){const e=gD().encode(t),n=new fk;return n.update(e),new Uint8Array(n.digest())}function kE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yo([n,r],0),new yo([i,s],0)]}class Ov{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $c(`Invalid padding: ${n}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $c(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yo.fromNumber(r)));return i.compare(_D)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=CE(e),[r,i]=kE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ov(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=CE(e),[r,i]=kE(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zm(_e.min(),i,new It(je),Pi(),Re())}}class hh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hh(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class qk{constructor(e,n){this.targetId=e,this.me=n}}class Hk{constructor(e,n,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class SE{constructor(){this.fe=0,this.ge=NE(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new hh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=NE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=PE(),this.Qe=new It(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(P_(s))if(r===0){const a=new le(s.path);this.Ue(n,a,tn.newNoDocument(a,_e.min()))}else Be(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const m=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=Po(r).toUint8Array()}catch(u){if(u instanceof Ek)return So("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ov(a,i,s)}catch(u){return So(u instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&P_(c.target)){const u=new le(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,tn.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Re();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(u=>{const m=this.Je(u);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new zm(e,n,this.Qe,this.ke,r);return this.ke=Pi(),this.qe=PE(),this.Qe=new It(je),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new SE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $t(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new SE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function PE(){return new It(le.comparator)}function NE(){return new It(le.comparator)}const vD={asc:"ASCENDING",desc:"DESCENDING"},xD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wD={and:"AND",or:"OR"};class ED{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function R_(t,e){return t.useProto3Json||Om(e)?e:{value:e}}function Df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TD(t,e){return Df(t,e.toTimestamp())}function Ur(t){return Be(!!t),_e.fromTimestamp(function(n){const r=Cs(n);return new bt(r.seconds,r.nanos)}(t))}function jv(t,e){return L_(t,e).canonicalString()}function L_(t,e){const n=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Gk(t){const e=Je.fromString(t);return Be(Xk(e)),e}function M_(t,e){return jv(t.databaseId,e.path)}function rg(t,e){const n=Gk(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(Zk(n))}function Kk(t,e){return jv(t.databaseId,e)}function bD(t){const e=Gk(t);return e.length===4?Je.emptyPath():Zk(e)}function O_(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zk(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AE(t,e,n){return{name:M_(t,e),fields:n.value.mapValue.fields}}function ID(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(m,g){return m.useProto3Json?(Be(g===void 0||typeof g=="string"),zt.fromBase64String(g||"")):(Be(g===void 0||g instanceof Buffer||g instanceof Uint8Array),zt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(m){const g=m.code===void 0?Z.UNKNOWN:Wk(m.code);return new ie(g,m.message||"")}(a);n=new Hk(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rg(t,r.document.name),s=Ur(r.document.updateTime),a=r.document.createTime?Ur(r.document.createTime):_e.min(),c=new _n({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,s,a,c),m=r.targetIds||[],g=r.removedTargetIds||[];n=new Yd(m,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rg(t,r.document),s=r.readTime?Ur(r.readTime):_e.min(),a=tn.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Yd([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rg(t,r.document),s=r.removedTargetIds||[];n=new Yd([],s,i,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new mD(i,s),c=r.targetId;n=new qk(c,a)}}return n}function CD(t,e){let n;if(e instanceof uh)n={update:AE(t,e.key,e.value)};else if(e instanceof Lv)n={delete:M_(t,e.key)};else if(e instanceof Vs)n={update:AE(t,e.key,e.data),updateMask:OD(e.fieldMask)};else{if(!(e instanceof hD))return pe();n={verify:M_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Bu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof gl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _l)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jf)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:TD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe()}(t,e.precondition)),n}function kD(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Ur(i.updateTime):Ur(s);return a.isEqual(_e.min())&&(a=Ur(s)),new lD(a,i.transformResults||[])}(n,e))):[]}function SD(t,e){return{documents:[Kk(t,e.path)]}}function PD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kk(t,i);const s=function(m){if(m.length!==0)return Yk(Er.create(m,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(m){if(m.length!==0)return m.map(g=>function(x){return{field:Ca(x.field),direction:RD(x.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=R_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:i}}function ND(t){let e=bD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];n.where&&(s=function(_){const x=Qk(_);return x instanceof Er&&Ck(x)?x.getFilters():[x]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(x=>function(C){return new zu(ka(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(n.orderBy));let c=null;n.limit&&(c=function(_){let x;return x=typeof _=="object"?_.value:_,Om(x)?null:x}(n.limit));let u=null;n.startAt&&(u=function(_){const x=!!_.before,E=_.values||[];return new Of(E,x)}(n.startAt));let m=null;return n.endAt&&(m=function(_){const x=!_.before,E=_.values||[];return new Of(E,x)}(n.endAt)),Zj(e,i,a,s,c,"F",u,m)}function AD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ka(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ka(n.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ka(n.unaryFilter.field);return Tt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(ka(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Er.create(n.compositeFilter.filters.map(r=>Qk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function RD(t){return vD[t]}function LD(t){return xD[t]}function MD(t){return wD[t]}function Ca(t){return{fieldPath:t.canonicalString()}}function ka(t){return Vt.fromServerFormat(t.fieldPath)}function Yk(t){return t instanceof Tt?function(n){if(n.op==="=="){if(_E(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NAN"}};if(gE(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_E(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NAN"}};if(gE(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(n.field),op:LD(n.op),value:n.value}}}(t):t instanceof Er?function(n){const r=n.getFilters().map(i=>Yk(i));return r.length===1?r[0]:{compositeFilter:{op:MD(n.op),filters:r}}}(t):pe()}function OD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r,i,s=_e.min(),a=_e.min(),c=zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.ct=e}}function DD(t){const e=ND({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?A_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.un=new VD}addToCollectionParentIndex(e,n){return this.un.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Is.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class VD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $t(Je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $t(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yl(0)}static kn(){return new yl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.changes=new Dl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ou(r.mutation,i,An.empty(),bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Hc();return s.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let s=Pi();const a=su(),c=function(){return su()}();return n.forEach((u,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof Vs)?s=s.insert(m.key,m):g!==void 0?(a.set(m.key,g.mutation.getFieldMask()),ou(g.mutation,m,g.mutation.getFieldMask(),bt.now())):a.set(m.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((m,g)=>a.set(m,g)),n.forEach((m,g)=>{var _;return c.set(m,new zD(g,(_=a.get(m))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const r=su();let i=new It((a,c)=>a-c),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const m=n.get(u);if(m===null)return;let g=r.get(u)||An.empty();g=c.applyToLocalView(m,g),r.set(u,g);const _=(i.get(c.batchId)||Re()).add(u);i=i.insert(c.batchId,_)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),m=u.key,g=u.value,_=Ok();g.forEach(x=>{if(!s.has(x)){const E=zk(n.get(x),r.get(x));E!==null&&_.set(x,E),s=s.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,_))}return X.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):X.resolve(ho());let c=-1,u=s;return a.next(m=>X.forEach(m,(g,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(g)?X.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{u=u.insert(g,x)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,u,m,Re())).next(g=>({batchId:c,changes:Mk(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=Hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Hc();return this.indexManager.getCollectionParents(e,s).next(c=>X.forEach(c,u=>{const m=function(_,x){return new jl(x,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(g=>{g.forEach((_,x)=>{a=a.insert(_,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,m)=>{const g=m.getKey();a.get(g)===null&&(a=a.insert(g,tn.newInvalidDocument(g)))});let c=Hc();return a.forEach((u,m)=>{const g=s.get(u);g!==void 0&&ou(g.mutation,m,An.empty(),bt.now()),Fm(n,m)&&(c=c.insert(u,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return X.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:DD(i.bundledQuery),readTime:Ur(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.overlays=new It(le.comparator),this.Ir=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return X.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=ho(),s=n.length+1,a=new le(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,m=u.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new It((m,g)=>m-g);const a=this.overlays.getIterator();for(;a.hasNext();){const m=a.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=s.get(m.largestBatchId);g===null&&(g=ho(),s=s.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const c=ho(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((m,g)=>c.set(m,g)),!(c.size()>=i)););return X.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fD(n,r));let s=this.Ir.get(n);s===void 0&&(s=Re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.Tr=new $t(Ot.Er),this.dr=new $t(Ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ot(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Je([])),r=new Ot(n,e),i=new Ot(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Je([])),r=new Ot(n,e),i=new Ot(n,e+1);let s=Re();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ot(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new $t(Ot.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dD(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new Ot(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,n){return X.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return X.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),i=new Ot(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),X.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(je);return n.forEach(i=>{const s=new Ot(i,0),a=new Ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const a=new Ot(new le(s),0);let c=new $t(je);return this.br.forEachWhile(u=>{const m=u.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(c=c.add(u.wr)),!0)},a),X.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return X.forEach(n.mutations,i=>{const s=new Ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ot(n,0),i=this.br.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.Mr=e,this.docs=function(){return new It(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=Pi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pi();const a=n.path,c=new le(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:m,value:{document:g}}=u.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Nj(Pj(g),r)<=0||(i.has(g.key)||Fm(n,g))&&(s=s.insert(g.key,g.mutableCopy()))}return X.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}Or(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KD(this)}getSize(e){return X.resolve(this.size)}}class KD extends UD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.persistence=e,this.Nr=new Dl(n=>Pv(n),Nv),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dv,this.targetCount=0,this.kr=yl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),X.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Kn(n),X.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),X.waitFor(s).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),X.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Iv(0),this.Kr=!1,this.Kr=!0,this.$r=new HD,this.referenceDelegate=e(this),this.Ur=new ZD(this),this.indexManager=new FD,this.remoteDocumentCache=function(i){return new GD(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new jD(n),this.Gr=new WD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new $D(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new YD(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class YD extends Rj{constructor(e){super(),this.currentSequenceNumber=e}}class Fv{constructor(e){this.persistence=e,this.Jr=new Dv,this.Yr=null}static Zr(e){return new Fv(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),X.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,_e.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return X.or([()=>X.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Re(),i=Re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Vv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return F2()?8:Lj(on())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new XD;return this.Xi(e,n,a).next(c=>{if(s.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Rc()<=Ae.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Rc()<=Ae.DEBUG&&oe("QueryEngine","Query:",Ia(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rc()<=Ae.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(n))):X.resolve())}Yi(e,n){if(wE(n))return X.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=A_(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Re(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const m=this.ts(n,c);return this.ns(n,m,a,u.readTime)?this.Yi(e,A_(n,null,"F")):this.rs(e,m,n,u)}))})))}Zi(e,n,r,i){return wE(n)||i.isEqual(_e.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?X.resolve(null):(Rc()<=Ae.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ia(n)),this.rs(e,a,n,Sj(i,-1)).next(c=>c))})}ts(e,n){let r=new $t(Rk(e));return n.forEach((i,s)=>{Fm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Rc()<=Ae.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,Is.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new It(je),this._s=new Dl(s=>Pv(s),Nv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function t4(t,e,n,r){return new e4(t,e,n,r)}async function Jk(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let u=Re();for(const m of i){a.push(m.batchId);for(const g of m.mutations)u=u.add(g.key)}for(const m of s){c.push(m.batchId);for(const g of m.mutations)u=u.add(g.key)}return n.localDocuments.getDocuments(r,u).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:c}))})})}function n4(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,m,g){const _=m.batch,x=_.keys();let E=X.resolve();return x.forEach(C=>{E=E.next(()=>g.getEntry(u,C)).next(N=>{const M=m.docVersions.get(C);Be(M!==null),N.version.compareTo(M)<0&&(_.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),g.addEntry(N)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,_))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Re();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(u=u.add(c.batch.mutations[m].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function e1(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function r4(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((g,_)=>{const x=i.get(_);if(!x)return;c.push(n.Ur.removeMatchingKeys(s,g.removedDocuments,_).next(()=>n.Ur.addMatchingKeys(s,g.addedDocuments,_)));let E=x.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(zt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),i=i.insert(_,E),function(N,M,b){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(x,E,g)&&c.push(n.Ur.updateTargetData(s,E))});let u=Pi(),m=Re();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,g))}),c.push(i4(s,a,e.documentUpdates).next(g=>{u=g.Ps,m=g.Is})),!r.isEqual(_e.min())){const g=n.Ur.getLastRemoteSnapshotVersion(s).next(_=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(g)}return X.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,m)).next(()=>u)}).then(s=>(n.os=i,s))}function i4(t,e,n){let r=Re(),i=Re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Pi();return n.forEach((c,u)=>{const m=s.get(c);u.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(_e.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!m.isValidDocument()||u.version.compareTo(m.version)>0||u.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):oe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function s4(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function o4(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,X.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new ls(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function j_(t,e,n){const r=ye(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ch(a))throw a;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function RE(t,e,n){const r=ye(t);let i=_e.min(),s=Re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,m,g){const _=ye(u),x=_._s.get(g);return x!==void 0?X.resolve(_.os.get(x)):_.Ur.getTargetData(m,g)}(r,a,Vr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:_e.min(),n?s:Re())).next(c=>(a4(r,Yj(e),c),{documents:c,Ts:s})))}function a4(t,e,n){let r=t.us.get(e)||_e.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class LE{constructor(){this.activeTargetIds=rD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l4{constructor(){this.so=new LE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function ig(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class d4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const c=ig(),u=this.xo(n,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,s,a),this.No(n,u,m,i).then(g=>(oe("RestConnection",`Received RPC '${n}' ${c}: `,g),g),g=>{throw So("RestConnection",`RPC '${n}' ${c} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(n,r,i,s,a,c){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=u4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ig();return new Promise((a,c)=>{const u=new mk;u.setWithCredentials(!0),u.listenOnce(pk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Kd.NO_ERROR:const g=u.getResponseJson();oe(Yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),a(g);break;case Kd.TIMEOUT:oe(Yt,`RPC '${e}' ${s} timed out`),c(new ie(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const _=u.getStatus();if(oe(Yt,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const C=function(M){const b=M.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(b)>=0?b:Z.UNKNOWN}(E.status);c(new ie(C,E.message))}else c(new ie(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ie(Z.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{oe(Yt,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(i);oe(Yt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",m,r,15)})}Bo(e,n,r){const i=ig(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yk(),c=_k(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(u.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const g=s.join("");oe(Yt,`Creating RPC '${e}' stream ${i}: ${g}`,u);const _=a.createWebChannel(g,u);let x=!1,E=!1;const C=new h4({Io:M=>{E?oe(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(x||(oe(Yt,`Opening RPC '${e}' stream ${i} transport.`),_.open(),x=!0),oe(Yt,`RPC '${e}' stream ${i} sending:`,M),_.send(M))},To:()=>_.close()}),N=(M,b,I)=>{M.listen(b,S=>{try{I(S)}catch(O){setTimeout(()=>{throw O},0)}})};return N(_,qc.EventType.OPEN,()=>{E||(oe(Yt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(_,qc.EventType.CLOSE,()=>{E||(E=!0,oe(Yt,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(_,qc.EventType.ERROR,M=>{E||(E=!0,So(Yt,`RPC '${e}' stream ${i} transport errored:`,M),C.So(new ie(Z.UNAVAILABLE,"The operation could not be completed")))}),N(_,qc.EventType.MESSAGE,M=>{var b;if(!E){const I=M.data[0];Be(!!I);const S=I,O=S.error||((b=S[0])===null||b===void 0?void 0:b.error);if(O){oe(Yt,`RPC '${e}' stream ${i} received error:`,O);const z=O.status;let H=function(R){const j=xt[R];if(j!==void 0)return Wk(j)}(z),A=O.message;H===void 0&&(H=Z.INTERNAL,A="Unknown error status: "+z+" with message "+O.message),E=!0,C.So(new ie(H,A)),_.close()}else oe(Yt,`RPC '${e}' stream ${i} received:`,I),C.bo(I)}}),N(c,gk.STAT_EVENT,M=>{M.stat===b_.PROXY?oe(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===b_.NOPROXY&&oe(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t){return new ED(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,r,i,s,a,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ie(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f4 extends n1{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ID(this.serializer,e),r=function(s){if(!("targetChange"in s))return _e.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?_e.min():a.readTime?Ur(a.readTime):_e.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=O_(this.serializer),n.addTarget=function(s,a){let c;const u=a.target;if(c=P_(u)?{documents:SD(s,u)}:{query:PD(s,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=$k(s,a.resumeToken);const m=R_(s,a.expectedCount);m!==null&&(c.expectedCount=m)}else if(a.snapshotVersion.compareTo(_e.min())>0){c.readTime=Df(s,a.snapshotVersion.toTimestamp());const m=R_(s,a.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const r=AD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=O_(this.serializer),n.removeTarget=e,this.a_(n)}}class m4 extends n1{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kD(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=O_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,L_(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(Z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,L_(n,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(Z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class g4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Si(n),this.D_=!1):oe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Uo(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(u){const m=ye(u);m.L_.add(4),await dh(m),m.q_.set("Unknown"),m.L_.delete(4),await Wm(m)}(this))})}),this.q_=new g4(r,i)}}async function Wm(t){if(Uo(t))for(const e of t.B_)await e(!0)}async function dh(t){for(const e of t.B_)await e(!1)}function r1(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wv(n)?Bv(n):Fl(n).r_()&&zv(n,e))}function Uv(t,e){const n=ye(t),r=Fl(n);n.N_.delete(e),r.r_()&&i1(n,e),n.N_.size===0&&(r.r_()?r.o_():Uo(n)&&n.q_.set("Unknown"))}function zv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).A_(e)}function i1(t,e){t.Q_.xe(e),Fl(t).R_(e)}function Bv(t){t.Q_=new yD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.q_.v_()}function Wv(t){return Uo(t)&&!Fl(t).n_()&&t.N_.size>0}function Uo(t){return ye(t).L_.size===0}function s1(t){t.Q_=void 0}async function y4(t){t.q_.set("Online")}async function v4(t){t.N_.forEach((e,n)=>{zv(t,e)})}async function x4(t,e){s1(t),Wv(t)?(t.q_.M_(e),Bv(t)):t.q_.set("Unknown")}async function w4(t,e,n){if(t.q_.set("Online"),e instanceof Hk&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ff(t,r)}else if(e instanceof Yd?t.Q_.Ke(e):e instanceof qk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(_e.min()))try{const r=await e1(t.localStore);n.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((u,m)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(m);g&&s.N_.set(m,g.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,m)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(zt.EMPTY_BYTE_STRING,g.snapshotVersion)),i1(s,u);const _=new ls(g.target,u,m,g.sequenceNumber);zv(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await Ff(t,r)}}async function Ff(t,e,n){if(!ch(e))throw e;t.L_.add(1),await dh(t),t.q_.set("Offline"),n||(n=()=>e1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wm(t)})}function o1(t,e){return e().catch(n=>Ff(t,n,e))}async function qm(t){const e=ye(t),n=ks(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;E4(e);)try{const i=await s4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,T4(e,i)}catch(i){await Ff(e,i)}a1(e)&&l1(e)}function E4(t){return Uo(t)&&t.O_.length<10}function T4(t,e){t.O_.push(e);const n=ks(t);n.r_()&&n.V_&&n.m_(e.mutations)}function a1(t){return Uo(t)&&!ks(t).n_()&&t.O_.length>0}function l1(t){ks(t).start()}async function b4(t){ks(t).p_()}async function I4(t){const e=ks(t);for(const n of t.O_)e.m_(n.mutations)}async function C4(t,e,n){const r=t.O_.shift(),i=Mv.from(r,e,n);await o1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qm(t)}async function k4(t,e){e&&ks(t).V_&&await async function(r,i){if(function(a){return pD(a)&&a!==Z.ABORTED}(i.code)){const s=r.O_.shift();ks(r).s_(),await o1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qm(r)}}(t,e),a1(t)&&l1(t)}async function OE(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=Uo(n);n.L_.add(3),await dh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wm(n)}async function S4(t,e){const n=ye(t);e?(n.L_.delete(2),await Wm(n)):e||(n.L_.add(2),await dh(n),n.q_.set("Unknown"))}function Fl(t){return t.K_||(t.K_=function(n,r,i){const s=ye(n);return s.w_(),new f4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:y4.bind(null,t),Ro:v4.bind(null,t),mo:x4.bind(null,t),d_:w4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wv(t)?Bv(t):t.q_.set("Unknown")):(await t.K_.stop(),s1(t))})),t.K_}function ks(t){return t.U_||(t.U_=function(n,r,i){const s=ye(n);return s.w_(),new m4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b4.bind(null,t),mo:k4.bind(null,t),f_:I4.bind(null,t),g_:C4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qm(t)):(await t.U_.stop(),t.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new qv(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hv(t,e){if(Si("AsyncQueue",`${e}: ${t}`),ch(t))return new ie(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Hc(),this.sortedSet=new It(this.comparator)}static emptySet(e){return new Ya(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.W_=new It(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vl{constructor(e,n,r,i,s,a,c,u,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new vl(e,n,Ya.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N4{constructor(){this.queries=DE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=DE(),s.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ie(Z.ABORTED,"Firestore shutting down"))}}function DE(){return new Dl(t=>Ak(t),Dm)}async function $v(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new P4,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=Hv(a,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Kv(n)}async function Gv(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A4(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Kv(n)}function R4(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Kv(t){t.Y_.forEach(e=>{e.next()})}var D_,FE;(FE=D_||(D_={})).ea="default",FE.Cache="cache";class Zv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==D_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class L4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=Rk(e),this.Ra=new Ya(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new jE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,_)=>{const x=i.get(g),E=Fm(this.query,_)?_:null,C=!!x&&this.mutatedKeys.has(x.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;x&&E?x.data.isEqual(E.data)?C!==N&&(r.track({type:3,doc:E}),M=!0):this.ga(x,E)||(r.track({type:2,doc:E}),M=!0,(u&&this.Aa(E,u)>0||m&&this.Aa(E,m)<0)&&(c=!0)):!x&&E?(r.track({type:0,doc:E}),M=!0):x&&!E&&(r.track({type:1,doc:x}),M=!0,(u||m)&&(c=!0)),M&&(E?(a=a.add(E),s=N?s.add(g):s.delete(g)):(a=a.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((g,_)=>function(E,C){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return N(E)-N(C)}(g.type,_.type)||this.Aa(g.doc,_.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,m=u!==this.Ea;return this.Ea=u,a.length!==0||m?{snapshot:new vl(this.query,e.Ra,s,a,e.mutatedKeys,u===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new u1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new c1(r))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return vl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class M4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class O4{constructor(e){this.key=e,this.va=!1}}class j4{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Dl(c=>Ak(c),Dm),this.Ma=new Map,this.xa=new Set,this.Oa=new It(le.comparator),this.Na=new Map,this.La=new Dv,this.Ba={},this.ka=new Map,this.qa=yl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function D4(t,e,n=!0){const r=g1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await h1(r,e,n,!0),i}async function F4(t,e){const n=g1(t);await h1(n,e,!0,!1)}async function h1(t,e,n,r){const i=await o4(t.localStore,Vr(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await V4(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&r1(t.remoteStore,i),c}async function V4(t,e,n,r,i){t.Ka=(_,x,E)=>async function(N,M,b,I){let S=M.view.ma(b);S.ns&&(S=await RE(N.localStore,M.query,!1).then(({documents:A})=>M.view.ma(A,S)));const O=I&&I.targetChanges.get(M.targetId),z=I&&I.targetMismatches.get(M.targetId)!=null,H=M.view.applyChanges(S,N.isPrimaryClient,O,z);return UE(N,M.targetId,H.wa),H.snapshot}(t,_,x,E);const s=await RE(t.localStore,e,!0),a=new L4(e,s.Ts),c=a.ma(s.documents),u=hh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=a.applyChanges(c,t.isPrimaryClient,u);UE(t,n,m.wa);const g=new M4(e,n,a);return t.Fa.set(e,g),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function U4(t,e,n){const r=ye(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Dm(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await j_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Uv(r.remoteStore,i.targetId),F_(r,i.targetId)}).catch(lh)):(F_(r,i.targetId),await j_(r.localStore,i.targetId,!0))}async function z4(t,e){const n=ye(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Uv(n.remoteStore,r.targetId))}async function B4(t,e,n){const r=Z4(t);try{const i=await function(a,c){const u=ye(a),m=bt.now(),g=c.reduce((E,C)=>E.add(C.key),Re());let _,x;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=Pi(),N=Re();return u.cs.getEntries(E,g).next(M=>{C=M,C.forEach((b,I)=>{I.isValidDocument()||(N=N.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,C)).next(M=>{_=M;const b=[];for(const I of c){const S=uD(I,_.get(I.key).overlayedDocument);S!=null&&b.push(new Vs(I.key,S,Tk(S.value.mapValue),Yn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,m,b,c)}).next(M=>{x=M;const b=M.applyToLocalDocumentSet(_,N);return u.documentOverlayCache.saveOverlays(E,M.batchId,b)})}).then(()=>({batchId:x.batchId,changes:Mk(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let m=a.Ba[a.currentUser.toKey()];m||(m=new It(je)),m=m.insert(c,u),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,n),await fh(r,i.changes),await qm(r.remoteStore)}catch(i){const s=Hv(i,"Failed to persist write");n.reject(s)}}async function d1(t,e){const n=ye(t);try{const r=await r4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Be(a.va):i.removedDocuments.size>0&&(Be(a.va),a.va=!1))}),await fh(n,r,e)}catch(r){await lh(r)}}function VE(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=ye(a);u.onlineState=c;let m=!1;u.queries.forEach((g,_)=>{for(const x of _.j_)x.Z_(c)&&(m=!0)}),m&&Kv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W4(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new It(le.comparator);a=a.insert(s,tn.newNoDocument(s,_e.min()));const c=Re().add(s),u=new zm(_e.min(),new Map,new It(je),a,c);await d1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Qv(r)}else await j_(r.localStore,e,!1).then(()=>F_(r,e,n)).catch(lh)}async function q4(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await n4(n.localStore,e);m1(n,r,null),f1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fh(n,i)}catch(i){await lh(i)}}async function H4(t,e,n){const r=ye(t);try{const i=await function(a,c){const u=ye(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return u.mutationQueue.lookupMutationBatch(m,c).next(_=>(Be(_!==null),g=_.keys(),u.mutationQueue.removeMutationBatch(m,_))).next(()=>u.mutationQueue.performConsistencyCheck(m)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(m,g,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>u.localDocuments.getDocuments(m,g))})}(r.localStore,e);m1(r,e,n),f1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fh(r,i)}catch(i){await lh(i)}}function f1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function m1(t,e,n){const r=ye(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function F_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||p1(t,r)})}function p1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Uv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Qv(t))}function UE(t,e,n){for(const r of n)r instanceof c1?(t.La.addReference(r.key,e),$4(t,r)):r instanceof u1?(oe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||p1(t,r.key)):pe()}function $4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(oe("SyncEngine","New document in limbo: "+n),t.xa.add(r),Qv(t))}function Qv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new O4(n)),t.Oa=t.Oa.insert(n,r),r1(t.remoteStore,new ls(Vr(jm(n.path)),r,"TargetPurposeLimboResolution",Iv.oe))}}async function fh(t,e,n){const r=ye(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(m=>{var g;if((m||n)&&r.isPrimaryClient){const _=m?!m.fromCache:(g=n==null?void 0:n.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,_?"current":"not-current")}if(m){i.push(m);const _=Vv.Wi(u.targetId,m);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,m){const g=ye(u);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>X.forEach(m,x=>X.forEach(x.$i,E=>g.persistence.referenceDelegate.addReference(_,x.targetId,E)).next(()=>X.forEach(x.Ui,E=>g.persistence.referenceDelegate.removeReference(_,x.targetId,E)))))}catch(_){if(!ch(_))throw _;oe("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of m){const x=_.targetId;if(!_.fromCache){const E=g.os.get(x),C=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(C);g.os=g.os.insert(x,N)}}}(r.localStore,s))}async function G4(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await Jk(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new ie(Z.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fh(n,r.hs)}}function K4(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Re().add(r.key);{let i=Re();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const c=n.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function g1(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W4.bind(null,e),e.Ca.d_=A4.bind(null,e.eventManager),e.Ca.$a=R4.bind(null,e.eventManager),e}function Z4(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H4.bind(null,e),e}class Vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return t4(this.persistence,new JD,e.initialUser,this.serializer)}Ga(e){return new QD(Fv.Zr,this.serializer)}Wa(e){return new l4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vf.provider={build:()=>new Vf};class V_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G4.bind(null,this.syncEngine),await S4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N4}()}createDatastore(e){const n=Bm(e.databaseInfo.databaseId),r=function(s){return new d4(s)}(e.databaseInfo);return function(s,a,c,u){return new p4(s,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,c){return new _4(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>VE(this.syncEngine,n,0),function(){return ME.D()?new ME:new c4}())}createSyncEngine(e,n){return function(i,s,a,c,u,m,g){const _=new j4(i,s,a,c,u,m);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await dh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}V_.provider={build:()=>new V_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xt.UNAUTHENTICATED,this.clientId=bv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function og(t,e){t.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Jk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Y4(t);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>OE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>OE(e.remoteStore,i)),t._onlineComponents=e}async function Y4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await og(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await og(t,new Vf)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await og(t,new Vf);return t._offlineComponents}async function _1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await zE(t,t._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await zE(t,new V_))),t._onlineComponents}function X4(t){return _1(t).then(e=>e.syncEngine)}async function Uf(t){const e=await _1(t),n=e.eventManager;return n.onListen=D4.bind(null,e.syncEngine),n.onUnlisten=U4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z4.bind(null,e.syncEngine),n}function J4(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,u,m){const g=new Yv({next:x=>{g.Za(),a.enqueueAndForget(()=>Gv(s,_));const E=x.docs.has(c);!E&&x.fromCache?m.reject(new ie(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&u&&u.source==="server"?m.reject(new ie(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),_=new Zv(jm(c.path),g,{includeMetadataChanges:!0,_a:!0});return $v(s,_)}(await Uf(t),t.asyncQueue,e,n,r)),r.promise}function eF(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,c,u,m){const g=new Yv({next:x=>{g.Za(),a.enqueueAndForget(()=>Gv(s,_)),x.fromCache&&u.source==="server"?m.reject(new ie(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),_=new Zv(c,g,{includeMetadataChanges:!0,_a:!0});return $v(s,_)}(await Uf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e,n){if(!n)throw new ie(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x1(t,e,n,r){if(e===!0&&r===!0)throw new ie(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WE(t){if(!le.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qE(t){if(le.isDocumentKey(t))throw new ie(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function hn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new ie(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $m{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xk;switch(r.type){case"firstParty":return new Tj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BE.get(n);r&&(oe("ComponentProvider","Removing Datastore"),BE.delete(n),r.terminate())}(this),Promise.resolve()}}function w1(t,e,n,r={}){var i;const s=(t=hn(t,$m))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Xt.MOCK_USER;else{c=lv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ie(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xt(m)}t._authCredentials=new xj(new vk(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class vi extends ji{constructor(e,n,r){super(e,n,jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new le(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function Us(t,e,...n){if(t=He(t),v1("collection","path",e),t instanceof $m){const r=Je.fromString(e,...n);return qE(r),new vi(t,null,r)}{if(!(t instanceof Gt||t instanceof vi))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return qE(r),new vi(t.firestore,null,r)}}function mi(t,e,...n){if(t=He(t),arguments.length===1&&(e=bv.newId()),v1("doc","path",e),t instanceof $m){const r=Je.fromString(e,...n);return WE(r),new Gt(t,null,new le(r))}{if(!(t instanceof Gt||t instanceof vi))throw new ie(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return WE(r),new Gt(t.firestore,t instanceof vi?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new t1(this,"async_queue_retry"),this.Vu=()=>{const r=sg();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ch(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Si("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=qv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function GE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Br extends $m{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $E,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function E1(t,e){const n=typeof t=="object"?t:Am(),r=typeof t=="string"?t:"(default)",i=rh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=av("firestore");s&&w1(i,...s)}return i}function mh(t){if(t._terminated)throw new ie(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tF(t),t._firestoreClient}function tF(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,m,g){return new jj(c,u,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,y1(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Q4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(zt.fromBase64String(e))}catch(n){throw new ie(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ao(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=/^__.*__$/;class rF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new uh(e,this.data,n,this.fieldTransforms)}}class T1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function b1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Zm{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(b1(this.Cu)&&nF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bm(e)}Qu(e,n,r,i=!1){return new Zm({Cu:e,methodName:n,qu:r,path:Vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qm(t){const e=t._freezeSettings(),n=Bm(t._databaseId);return new iF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I1(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);t0("Data must be an object, but it was:",a,r);const c=k1(r,a);let u,m;if(s.merge)u=new An(a.fieldMask),m=a.fieldTransforms;else if(s.mergeFields){const g=[];for(const _ of s.mergeFields){const x=U_(e,_,n);if(!a.contains(x))throw new ie(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);P1(g,x)||g.push(x)}u=new An(g),m=a.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,m=a.fieldTransforms;return new rF(new _n(c),u,m)}class Ym extends zo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ym}}function C1(t,e,n){return new Zm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xv extends zo{_toFieldTransform(e){return new Rv(e.path,new Bu)}isEqual(e){return e instanceof Xv}}class Jv extends zo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=C1(this,e,!0),r=this.Ku.map(s=>Bo(s,n)),i=new gl(r);return new Rv(e.path,i)}isEqual(e){return e instanceof Jv&&ul(this.Ku,e.Ku)}}class e0 extends zo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=C1(this,e,!0),r=this.Ku.map(s=>Bo(s,n)),i=new _l(r);return new Rv(e.path,i)}isEqual(e){return e instanceof e0&&ul(this.Ku,e.Ku)}}function sF(t,e,n,r){const i=t.Qu(1,e,n);t0("Data must be an object, but it was:",i,r);const s=[],a=_n.empty();Vo(r,(u,m)=>{const g=n0(e,u,n);m=He(m);const _=i.Nu(g);if(m instanceof Ym)s.push(g);else{const x=Bo(m,_);x!=null&&(s.push(g),a.set(g,x))}});const c=new An(s);return new T1(a,c,i.fieldTransforms)}function oF(t,e,n,r,i,s){const a=t.Qu(1,e,n),c=[U_(e,r,n)],u=[i];if(s.length%2!=0)throw new ie(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)c.push(U_(e,s[x])),u.push(s[x+1]);const m=[],g=_n.empty();for(let x=c.length-1;x>=0;--x)if(!P1(m,c[x])){const E=c[x];let C=u[x];C=He(C);const N=a.Nu(E);if(C instanceof Ym)m.push(E);else{const M=Bo(C,N);M!=null&&(m.push(E),g.set(E,M))}}const _=new An(m);return new T1(g,_,a.fieldTransforms)}function aF(t,e,n,r=!1){return Bo(n,t.Qu(r?4:3,e))}function Bo(t,e){if(S1(t=He(t)))return t0("Unsupported field value:",e,t),k1(t,e);if(t instanceof zo)return function(r,i){if(!b1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let u=Bo(c,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=bt.fromDate(r);return{timestampValue:Df(i.serializer,s)}}if(r instanceof bt){const s=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Df(i.serializer,s)}}if(r instanceof Gm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ao)return{bytesValue:$k(i.serializer,r._byteString)};if(r instanceof Gt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Km)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Av(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hm(r)}`)}(t,e)}function k1(t,e){const n={};return wk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(t,(r,i)=>{const s=Bo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function S1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Gm||t instanceof Ao||t instanceof Gt||t instanceof zo||t instanceof Km)}function t0(t,e,n){if(!S1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function U_(t,e,n){if((e=He(e))instanceof ph)return e._internalPath;if(typeof e=="string")return n0(t,e);throw zf("Field path arguments must be of type string or ",t,!1,void 0,n)}const lF=new RegExp("[~\\*/\\[\\]]");function n0(t,e,n){if(e.search(lF)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ph(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zf(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new ie(Z.INVALID_ARGUMENT,c+t+u)}function P1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cF extends N1{data(){return super.data()}}function Xm(t,e){return typeof e=="string"?n0(t,e):e instanceof ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}let i0=class extends r0{};function Jm(t,e,...n){let r=[];e instanceof r0&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof ep).length,c=s.filter(u=>u instanceof gh).length;if(a>1||a>0&&c>0)throw new ie(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gh extends i0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gh(e,n,r)}_apply(e){const n=this._parse(e);return R1(e._query,n),new ji(e.firestore,e.converter,N_(e._query,n))}_parse(e){const n=Qm(e.firestore);return function(s,a,c,u,m,g,_){let x;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){ZE(_,g);const E=[];for(const C of _)E.push(KE(u,s,C));x={arrayValue:{values:E}}}else x=KE(u,s,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||ZE(_,g),x=aF(c,a,_,g==="in"||g==="not-in");return Tt.create(m,g,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xl(t,e,n){const r=e,i=Xm("where",t);return gh._create(i,r,n)}class ep extends r0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ep(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)R1(a,u),a=N_(a,u)}(e._query,n),new ji(e.firestore,e.converter,N_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tp extends i0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tp(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new ie(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(s,a)}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new jl(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function uF(t,e="asc"){const n=e,r=Xm("orderBy",t);return tp._create(r,n)}function KE(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new ie(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nk(e)&&n.indexOf("/")!==-1)throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!le.isDocumentKey(r))throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pE(t,new le(r))}if(n instanceof Gt)return pE(t,n._key);throw new ie(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(n)}.`)}function ZE(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R1(t,e){const n=function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class L1{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>mt(a.doubleValue));return new Km(s)}convertGeoPoint(e){return new Gm(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);Be(Xk(r));const i=new fl(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Si(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class s0 extends N1{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class au extends s0{data(e={}){return super.data(e)}}class o0{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ua(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new au(this._firestore,this._userDataWriter,r.key,r,new Ua(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new au(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ua(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new au(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ua(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,g=-1;return c.type!==0&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:hF(c.type),doc:u,oldIndex:m,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t){t=hn(t,Gt);const e=hn(t.firestore,Br);return J4(mh(e),t._key).then(n=>j1(e,t,n))}class a0 extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function np(t){t=hn(t,ji);const e=hn(t.firestore,Br),n=mh(e),r=new a0(e);return A1(t._query),eF(n,t._query).then(i=>new o0(e,r,t,i))}function B_(t,e,n){t=hn(t,Gt);const r=hn(t.firestore,Br),i=M1(t.converter,e,n);return _h(r,[I1(Qm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yn.none())])}function dF(t,e,n,...r){t=hn(t,Gt);const i=hn(t.firestore,Br),s=Qm(i);let a;return a=typeof(e=He(e))=="string"||e instanceof ph?oF(s,"updateDoc",t._key,e,n,r):sF(s,"updateDoc",t._key,e),_h(i,[a.toMutation(t._key,Yn.exists(!0))])}function l0(t){return _h(hn(t.firestore,Br),[new Lv(t._key,Yn.none())])}function rp(t,e){const n=hn(t.firestore,Br),r=mi(t),i=M1(t.converter,e);return _h(n,[I1(Qm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function O1(t,...e){var n,r,i;t=He(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||GE(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(GE(e[a])){const _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let u,m,g;if(t instanceof Gt)m=hn(t.firestore,Br),g=jm(t._key.path),u={next:_=>{e[a]&&e[a](j1(m,t,_))},error:e[a+1],complete:e[a+2]};else{const _=hn(t,ji);m=hn(_.firestore,Br),g=_._query;const x=new a0(m);u={next:E=>{e[a]&&e[a](new o0(m,x,_,E))},error:e[a+1],complete:e[a+2]},A1(t._query)}return function(x,E,C,N){const M=new Yv(N),b=new Zv(E,M,C);return x.asyncQueue.enqueueAndForget(async()=>$v(await Uf(x),b)),()=>{M.Za(),x.asyncQueue.enqueueAndForget(async()=>Gv(await Uf(x),b))}}(mh(m),g,c,u)}function _h(t,e){return function(r,i){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>B4(await X4(r),i,s)),s.promise}(mh(t),e)}function j1(t,e,n){const r=n.docs.get(e._key),i=new a0(t);return new s0(t,i,e._key,r,new Ua(n.hasPendingWrites,n.fromCache),e.converter)}function Ni(){return new Xv("serverTimestamp")}function fF(...t){return new Jv("arrayUnion",t)}function mF(...t){return new e0("arrayRemove",t)}(function(e,n=!0){(function(i){Ol=i})(js),bs(new Ii("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Br(new wj(r.getProvider("auth-internal")),new Ij(r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ie(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(m.options.projectId,g)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Qn(uE,"4.7.3",e),Qn(uE,"4.7.3","esm2017")})();const c0=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:L1,Bytes:Ao,CollectionReference:vi,DocumentReference:Gt,DocumentSnapshot:s0,FieldPath:ph,FieldValue:zo,Firestore:Br,FirestoreError:ie,GeoPoint:Gm,Query:ji,QueryCompositeFilterConstraint:ep,QueryConstraint:i0,QueryDocumentSnapshot:au,QueryFieldFilterConstraint:gh,QueryOrderByConstraint:tp,QuerySnapshot:o0,SnapshotMetadata:Ua,Timestamp:bt,VectorValue:Km,_AutoId:bv,_ByteString:zt,_DatabaseId:fl,_DocumentKey:le,_EmptyAuthCredentialsProvider:xk,_FieldPath:Vt,_cast:hn,_logWarn:So,_validateIsNotUsedTogether:x1,addDoc:rp,arrayRemove:mF,arrayUnion:fF,collection:Us,connectFirestoreEmulator:w1,deleteDoc:l0,doc:mi,ensureFirestoreConfigured:mh,executeWrite:_h,getDoc:z_,getDocs:np,getFirestore:E1,onSnapshot:O1,orderBy:uF,query:Jm,serverTimestamp:Ni,setDoc:B_,updateDoc:dF,where:xl},Symbol.toStringTag,{value:"Module"}));var pF="firebase",gF="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(pF,gF,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firebasestorage.googleapis.com",_F="storageBucket",yF=2*60*1e3,vF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends qr{constructor(e,n,r=0){super(ag(e),`Firebase Storage: ${n} (${ag(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ag(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wr||(Wr={}));function ag(t){return"storage/"+t}function xF(){const t="An unknown error occurred, please check the error payload for server response.";return new $r(Wr.UNKNOWN,t)}function wF(){return new $r(Wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EF(){return new $r(Wr.CANCELED,"User canceled the upload/download.")}function TF(t){return new $r(Wr.INVALID_URL,"Invalid URL '"+t+"'.")}function bF(t){return new $r(Wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function QE(t){return new $r(Wr.INVALID_ARGUMENT,t)}function F1(){return new $r(Wr.APP_DELETED,"The Firebase app was deleted.")}function IF(t){return new $r(Wr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fr.makeFromUrl(e,n)}catch{return new fr(e,"")}if(r.path==="")return r;throw bF(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function m(O){O.path_=decodeURIComponent(O.path)}const g="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",E=new RegExp(`^https?://${_}/${g}/b/${i}/o${x}`,"i"),C={bucket:1,path:3},N=n===D1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",b=new RegExp(`^https?://${N}/${i}/${M}`,"i"),S=[{regex:c,indices:u,postModify:s},{regex:E,indices:C,postModify:m},{regex:b,indices:{bucket:1,path:2},postModify:m}];for(let O=0;O<S.length;O++){const z=S[O],H=z.regex.exec(e);if(H){const A=H[z.indices.bucket];let P=H[z.indices.path];P||(P=""),r=new fr(A,P),z.postModify(r);break}}if(r==null)throw TF(e);return r}}class CF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t,e,n){let r=1,i=null,s=null,a=!1,c=0;function u(){return c===2}let m=!1;function g(...M){m||(m=!0,e.apply(null,M))}function _(M){i=setTimeout(()=>{i=null,t(E,u())},M)}function x(){s&&clearTimeout(s)}function E(M,...b){if(m){x();return}if(M){x(),g.call(null,M,...b);return}if(u()||a){x(),g.call(null,M,...b);return}r<64&&(r*=2);let S;c===1?(c=2,S=0):S=(r+Math.random())*1e3,_(S)}let C=!1;function N(M){C||(C=!0,x(),!m&&(i!==null?(M||(c=2),clearTimeout(i),_(0)):M||(c=1)))}return _(0),s=setTimeout(()=>{a=!0,N(!0)},n),N}function SF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return t!==void 0}function YE(t,e,n,r){if(r<e)throw QE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw QE(`Invalid value for '${t}'. Expected ${n} or less.`)}function NF(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Bf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bf||(Bf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,i,s,a,c,u,m,g,_,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=_,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Sd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const u=c.loaded,m=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,m)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===Bf.NO_ERROR,u=s.getStatus();if(!c||AF(u,this.additionalRetryCodes_)&&this.retry){const g=s.getErrorCode()===Bf.ABORT;r(!1,new Sd(!1,null,g));return}const m=this.successCodes_.indexOf(u)!==-1;r(!0,new Sd(m,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());PF(u)?s(u):s()}catch(u){a(u)}else if(c!==null){const u=xF();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(i.canceled){const u=this.appDelete_?F1():EF();a(u)}else{const u=wF();a(u)}};this.canceled_?n(!1,new Sd(!1,null,!0)):this.backoffId_=kF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DF(t,e,n,r,i,s,a=!0){const c=NF(t.urlParams),u=t.url+c,m=Object.assign({},t.headers);return OF(m,e),LF(m,n),MF(m,s),jF(m,r),new RF(u,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VF(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this._service=e,n instanceof fr?this._location=n:this._location=fr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wf(e,n)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VF(this._location.path)}get storage(){return this._service}get parent(){const e=FF(this._location.path);if(e===null)return null;const n=new fr(this._location.bucket,e);return new Wf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IF(e)}}function XE(t,e){const n=e==null?void 0:e[_F];return n==null?null:fr.makeFromBucketSpec(n,t)}function UF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:lv(i,t.app.options.projectId))}class zF{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=D1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yF,this._maxUploadRetryTime=vF,this._requests=new Set,i!=null?this._bucket=fr.makeFromBucketSpec(i,this._host):this._bucket=XE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=XE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wf(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new CF(F1());{const a=DF(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const JE="@firebase/storage",eT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="storage";function BF(t=Am(),e){t=He(t);const r=rh(t,V1).getImmediate({identifier:e}),i=av("storage");return i&&WF(r,...i),r}function WF(t,e,n,r={}){UF(t,e,n,r)}function qF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zF(n,r,i,e,js)}function HF(){bs(new Ii(V1,qF,"PUBLIC").setMultipleInstances(!0)),Qn(JE,eT,""),Qn(JE,eT,"esm2017")}HF();var tT={};const nT="@firebase/database",rT="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U1="";function $F(t){U1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ft(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ou(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Hr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new GF(e)}}catch{}return new KF},fo=z1("localStorage"),ZF=z1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new Nm("@firebase/database"),QF=function(){let t=1;return function(){return t++}}(),B1=function(t){const e=Q2(t),n=new $2;n.update(e);const r=n.digest();return ov.encodeByteArray(r)},yh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yh.apply(null,r):typeof r=="object"?e+=Ft(r):e+=r,e+=" "}return e};let lu=null,iT=!0;const YF=function(t,e){ee(!0,"Can't turn on custom loggers persistently."),Xa.logLevel=Ae.VERBOSE,lu=Xa.log.bind(Xa)},nn=function(...t){if(iT===!0&&(iT=!1,lu===null&&ZF.get("logging_enabled")===!0&&YF()),lu){const e=yh.apply(null,t);lu(e)}},vh=function(t){return function(...e){nn(t,...e)}},W_=function(...t){const e="FIREBASE INTERNAL ERROR: "+yh(...t);Xa.error(e)},Ai=function(...t){const e=`FIREBASE FATAL ERROR: ${yh(...t)}`;throw Xa.error(e),new Error(e)},bn=function(...t){const e="FIREBASE WARNING: "+yh(...t);Xa.warn(e)},XF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},u0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},JF=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ro="[MIN_NAME]",Ss="[MAX_NAME]",Vl=function(t,e){if(t===e)return 0;if(t===Ro||e===Ss)return-1;if(e===Ro||t===Ss)return 1;{const n=sT(t),r=sT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},eV=function(t,e){return t===e?0:t<e?-1:1},Lc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ft(e))},h0=function(t){if(typeof t!="object"||t===null)return Ft(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ft(e[r]),n+=":",n+=h0(t[e[r]]);return n+="}",n},W1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function In(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const q1=function(t){ee(!u0(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,a,c,u;t===0?(s=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=c+r,a=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-r-n))));const m=[];for(u=n;u;u-=1)m.push(a%2?1:0),a=Math.floor(a/2);for(u=e;u;u-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(i?1:0),m.reverse();const g=m.join("");let _="";for(u=0;u<64;u+=8){let x=parseInt(g.substr(u,8),2).toString(16);x.length===1&&(x="0"+x),_=_+x}return _.toLowerCase()},tV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const iV=new RegExp("^-?(0*)\\d{1,10}$"),sV=-2147483648,oV=2147483647,sT=function(t){if(iV.test(t)){const e=Number(t);if(e>=sV&&e<=oV)return e}return null},Ul=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bn("Exception was thrown by user callback.",n),e},Math.floor(0))}},aV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bn(e)}}class Xd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="5",H1="v",$1="s",G1="r",K1="f",Z1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Q1="ls",Y1="p",q_="ac",X1="websocket",J1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i,s=!1,a="",c=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function tS(t,e,n){ee(typeof e=="string","typeof type must == string"),ee(typeof n=="object","typeof params must == object");let r;if(e===X1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===J1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uV(t)&&(n.ns=t.namespace);const i=[];return In(n,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.counters_={}}incrementCounter(e,n=1){Hr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return k2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg={},cg={};function f0(t){const e=t.toString();return lg[e]||(lg[e]=new hV),lg[e]}function dV(t,e){const n=t.toString();return cg[n]||(cg[n]=e()),cg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ul(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="start",mV="close",pV="pLPCommand",gV="pRTLPCB",nS="id",rS="pw",iS="ser",_V="cb",yV="seg",vV="ts",xV="d",wV="dframe",sS=1870,oS=30,EV=sS-oS,TV=25e3,bV=3e4;class za{constructor(e,n,r,i,s,a,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vh(e),this.stats_=f0(n),this.urlFn=u=>(this.appCheckToken&&(u[q_]=this.appCheckToken),tS(n,J1,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(bV)),JF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new m0((...s)=>{const[a,c,u,m,g]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===oT)this.id=c,this.password=u;else if(a===mV)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[oT]="t",r[iS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[_V]=this.scriptTagHolder.uniqueCallbackIdentifier),r[H1]=d0,this.transportSessionId&&(r[$1]=this.transportSessionId),this.lastSessionId&&(r[Q1]=this.lastSessionId),this.applicationId&&(r[Y1]=this.applicationId),this.appCheckToken&&(r[q_]=this.appCheckToken),typeof location<"u"&&location.hostname&&Z1.test(location.hostname)&&(r[G1]=K1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){za.forceAllow_=!0}static forceDisallow(){za.forceDisallow_=!0}static isAvailable(){return za.forceAllow_?!0:!za.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tV()&&!nV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=EC(n),i=W1(r,EV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[wV]="t",r[nS]=e,r[rS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ft(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class m0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QF(),window[pV+this.uniqueCallbackIdentifier]=e,window[gV+this.uniqueCallbackIdentifier]=n,this.myIFrame=m0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){nn("frame writing exception"),c.stack&&nn(c.stack),nn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[nS]=this.myID,e[rS]=this.myPW,e[iS]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+oS+r.length<=sS;){const a=this.pendingSegs.shift();r=r+"&"+yV+i+"="+a.seg+"&"+vV+i+"="+a.ts+"&"+xV+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(TV)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=16384,CV=45e3;let qf=null;typeof MozWebSocket<"u"?qf=MozWebSocket:typeof WebSocket<"u"&&(qf=WebSocket);class hr{constructor(e,n,r,i,s,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vh(this.connId),this.stats_=f0(n),this.connURL=hr.connectionURL_(n,a,c,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const a={};return a[H1]=d0,typeof location<"u"&&location.hostname&&Z1.test(location.hostname)&&(a[G1]=K1),n&&(a[$1]=n),r&&(a[Q1]=r),i&&(a[q_]=i),s&&(a[Y1]=s),tS(e,X1,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fo.set("previous_websocket_failure",!0);try{let r;D2(),this.mySock=new qf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&qf!==null&&!hr.forceDisallow_}static previouslyFailed(){return fo.isInMemoryStorage||fo.get("previous_websocket_failure")===!0}markConnectionHealthy(){fo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ou(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=W1(n,IV);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hr.responsesRequiredToBeHealthy=2;hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[za,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hr&&hr.isAvailable();let r=n&&!hr.previouslyFailed();if(e.webSocketOnly&&(n||bn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{const i=this.transports_=[];for(const s of Wu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Wu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=6e4,SV=5e3,PV=10*1024,NV=100*1024,ug="t",aT="d",AV="s",lT="r",RV="e",cT="o",uT="a",hT="n",dT="p",LV="h";class MV{constructor(e,n,r,i,s,a,c,u,m,g){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=u,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vh("c:"+this.id+":"),this.transportManager_=new Wu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=cu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>NV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>PV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ug in e){const n=e[ug];n===uT?this.upgradeIfSecondaryHealthy_():n===lT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Lc("t",e),r=Lc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Lc("t",e),r=Lc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Lc(ug,e);if(aT in e){const r=e[aT];if(n===LV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AV?this.onConnectionShutdown_(r):n===lT?this.onReset_(r):n===RV?W_("Server Error: "+r):n===cT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):W_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),d0!==r&&bn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),cu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.allowedEvents_=e,this.listeners_={},ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ee(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends lS{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Hf}getInitialEvent(e){return ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=32,mT=768;class $e{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function De(){return new $e("")}function be(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ps(t){return t.pieces_.length-t.pieceNum_}function Ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $e(t.pieces_,e)}function cS(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function OV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function uS(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hS(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $e(e,0)}function St(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $e)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new $e(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function vn(t,e){const n=be(t),r=be(e);if(n===null)return e;if(n===r)return vn(Ke(t),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function p0(t,e){if(Ps(t)!==Ps(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ps(t)>Ps(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class jV{constructor(e,n){this.errorPrefix_=n,this.parts_=uS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Pm(this.parts_[r]);dS(this)}}function DV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Pm(e),dS(t)}function FV(t){const e=t.parts_.pop();t.byteLength_-=Pm(e),t.parts_.length>0&&(t.byteLength_-=1)}function dS(t){if(t.byteLength_>mT)throw new Error(t.errorPrefix_+"has a key path longer than "+mT+" bytes ("+t.byteLength_+").");if(t.parts_.length>fT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fT+") or object contains a cycle "+so(t))}function so(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends lS{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new g0}getInitialEvent(e){return ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=1e3,VV=60*5*1e3,pT=30*1e3,UV=1.3,zV=3e4,BV="server_kill",gT=3;class xi extends aS{constructor(e,n,r,i,s,a,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=xi.nextPersistentConnectionId_++,this.log_=vh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mc,this.maxReconnectDelay_=VV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");g0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Hf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ft(s)),ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Sm,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ee(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,c=>{const u=c.d,m=c.s;xi.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",c),m!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(m,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Hr(e,"w")){const r=cl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();bn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||H2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=q2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const a={p:n,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ft(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):W_("Unrecognized action received from server: "+Ft(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zV&&(this.reconnectDelay_=Mc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xi.nextConnectionId_++,s=this.lastSessionId;let a=!1,c=null;const u=function(){c?c.close():(a=!0,r())},m=function(_){ee(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)};this.realtime_={close:u,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,x]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);a?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=x&&x.token,c=new MV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,E=>{bn(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(BV)},s))}catch(_){this.log_("Failed to get token: "+_),a||(this.repoInfo_.nodeAdmin&&bn(_),u())}}}interrupt(e){nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],m_(this.interruptReasons_)&&(this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>h0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new $e(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gT&&(this.reconnectDelay_=pT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+U1.replace(/\./g,"-")]=1,cv()?e["framework.cordova"]=1:kC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hf.getInstance().currentlyOnline();return m_(this.interruptReasons_)&&e}}xi.nextPersistentConnectionId_=0;xi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ce(Ro,e),i=new Ce(Ro,n);return this.compare(r,i)!==0}minPost(){return Ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd;class fS extends ip{static get __EMPTY_NODE(){return Pd}static set __EMPTY_NODE(e){Pd=e}compare(e,n){return Vl(e.name,n.name)}isDefinedOn(e){throw Rl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ce.MIN}maxPost(){return new Ce(Ss,Pd)}makePost(e,n){return ee(typeof e=="string","KeyIndex indexValue must always be a string."),new Ce(e,Pd)}toString(){return".key"}}const vo=new fS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Dt.RED,this.left=i??xn.EMPTY_NODE,this.right=s??xn.EMPTY_NODE}copy(e,n,r,i,s){return new Dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return xn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0;Dt.BLACK=!1;class WV{copy(e,n,r,i,s){return this}insert(e,n,r){return new Dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xn{constructor(e,n=xn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Nd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Nd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Nd(this.root_,null,this.comparator_,!0,e)}}xn.EMPTY_NODE=new WV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){return Vl(t.name,e.name)}function _0(t,e){return Vl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_;function HV(t){H_=t}const mS=function(t){return typeof t=="number"?"number:"+q1(t):"string:"+t},pS=function(t){if(t.isLeafNode()){const e=t.val();ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Hr(e,".sv"),"Priority must be a string or number.")}else ee(t===H_||t.isEmpty(),"priority of unexpected type.");ee(t===H_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _T;class Mt{constructor(e,n=Mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pS(this.priorityNode_)}static set __childrenNodeConstructor(e){_T=e}static get __childrenNodeConstructor(){return _T}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ie(e)?this:be(e)===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=be(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ee(r!==".priority"||Ps(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+mS(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=q1(this.value_):e+=this.value_,this.lazyHash_=B1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mt.__childrenNodeConstructor?-1:(ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Mt.VALUE_TYPE_ORDER.indexOf(n),s=Mt.VALUE_TYPE_ORDER.indexOf(r);return ee(i>=0,"Unknown leaf type: "+n),ee(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gS,_S;function $V(t){gS=t}function GV(t){_S=t}class KV extends ip{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Vl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ce.MIN}maxPost(){return new Ce(Ss,new Mt("[PRIORITY-POST]",_S))}makePost(e,n){const r=gS(e);return new Ce(n,new Mt("[PRIORITY-POST]",r))}toString(){return".priority"}}const at=new KV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=Math.log(2);class QV{constructor(e){const n=s=>parseInt(Math.log(s)/ZV,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $f=function(t,e,n,r){t.sort(e);const i=function(u,m){const g=m-u;let _,x;if(g===0)return null;if(g===1)return _=t[u],x=n?n(_):_,new Dt(x,_.node,Dt.BLACK,null,null);{const E=parseInt(g/2,10)+u,C=i(u,E),N=i(E+1,m);return _=t[E],x=n?n(_):_,new Dt(x,_.node,Dt.BLACK,C,N)}},s=function(u){let m=null,g=null,_=t.length;const x=function(C,N){const M=_-C,b=_;_-=C;const I=i(M+1,b),S=t[M],O=n?n(S):S;E(new Dt(O,S.node,N,null,I))},E=function(C){m?(m.left=C,m=C):(g=C,m=C)};for(let C=0;C<u.count;++C){const N=u.nextBitIsOne(),M=Math.pow(2,u.count-(C+1));N?x(M,Dt.BLACK):(x(M,Dt.BLACK),x(M,Dt.RED))}return g},a=new QV(t.length),c=s(a);return new xn(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg;const Ea={};class pi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ee(Ea&&at,"ChildrenNode.ts has not been loaded"),hg=hg||new pi({".priority":Ea},{".priority":at}),hg}get(e){const n=cl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xn?n:null}hasIndex(e){return Hr(this.indexSet_,e.toString())}addIndex(e,n){ee(e!==vo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ce.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let c;i?c=$f(r,e.getCompare()):c=Ea;const u=e.toString(),m=Object.assign({},this.indexSet_);m[u]=e;const g=Object.assign({},this.indexes_);return g[u]=c,new pi(g,m)}addToIndexes(e,n){const r=kf(this.indexes_,(i,s)=>{const a=cl(this.indexSet_,s);if(ee(a,"Missing index implementation for "+s),i===Ea)if(a.isDefinedOn(e.node)){const c=[],u=n.getIterator(Ce.Wrap);let m=u.getNext();for(;m;)m.name!==e.name&&c.push(m),m=u.getNext();return c.push(e),$f(c,a.getCompare())}else return Ea;else{const c=n.get(e.name);let u=i;return c&&(u=u.remove(new Ce(e.name,c))),u.insert(e,e.node)}});return new pi(r,this.indexSet_)}removeFromIndexes(e,n){const r=kf(this.indexes_,i=>{if(i===Ea)return i;{const s=n.get(e.name);return s?i.remove(new Ce(e.name,s)):i}});return new pi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;class fe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pS(this.priorityNode_),this.children_.isEmpty()&&ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oc||(Oc=new fe(new xn(_0),null,pi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oc}updatePriority(e){return this.children_.isEmpty()?this:new fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Oc:n}}getChild(e){const n=be(e);return n===null?this:this.getImmediateChild(n).getChild(Ke(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ee(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ce(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?Oc:this.priorityNode_;return new fe(i,a,s)}}updateChild(e,n){const r=be(e);if(r===null)return n;{ee(be(e)!==".priority"||Ps(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ke(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(at,(a,c)=>{n[a]=c.val(e),r++,s&&fe.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const c in n)a[c]=n[c];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+mS(this.getPriority().val())+":"),this.forEachChild(at,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":B1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ce(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ce(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xh?-1:0}withIndex(e){if(e===vo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===vo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(at),i=n.getIterator(at);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===vo?null:this.indexMap_.get(e.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class YV extends fe{constructor(){super(new xn(_0),fe.EMPTY_NODE,pi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fe.EMPTY_NODE}isEmpty(){return!1}}const xh=new YV;Object.defineProperties(Ce,{MIN:{value:new Ce(Ro,fe.EMPTY_NODE)},MAX:{value:new Ce(Ss,xh)}});fS.__EMPTY_NODE=fe.EMPTY_NODE;Mt.__childrenNodeConstructor=fe;HV(xh);GV(xh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=!0;function qt(t,e=null){if(t===null)return fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Mt(n,qt(e))}if(!(t instanceof Array)&&XV){const n=[];let r=!1;if(In(t,(a,c)=>{if(a.substring(0,1)!=="."){const u=qt(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Ce(a,u)))}}),n.length===0)return fe.EMPTY_NODE;const s=$f(n,qV,a=>a.name,_0);if(r){const a=$f(n,at.getCompare());return new fe(s,qt(e),new pi({".priority":a},{".priority":at}))}else return new fe(s,qt(e),pi.Default)}else{let n=fe.EMPTY_NODE;return In(t,(r,i)=>{if(Hr(t,r)&&r.substring(0,1)!=="."){const s=qt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(qt(e))}}$V(qt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends ip{constructor(e){super(),this.indexPath_=e,ee(!Ie(e)&&be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Vl(e.name,n.name):s}makePost(e,n){const r=qt(e),i=fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ce(n,i)}maxPost(){const e=fe.EMPTY_NODE.updateChild(this.indexPath_,xh);return new Ce(Ss,e)}toString(){return uS(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV extends ip{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Vl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ce.MIN}maxPost(){return Ce.MAX}makePost(e,n){const r=qt(e);return new Ce(n,r)}toString(){return".value"}}const yS=new JV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){return{type:"value",snapshotNode:t}}function wl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Hu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function e3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.index_=e}updateChild(e,n,r,i,s,a){ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(qu(n,c)):ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(wl(n,r)):a.trackChildChange(Hu(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(at,(i,s)=>{n.hasChild(i)||r.trackChildChange(qu(i,s))}),n.isLeafNode()||n.forEachChild(at,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(Hu(i,s,a))}else r.trackChildChange(wl(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.indexedFilter_=new v0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$u.getStartPost_(e),this.endPost_=$u.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,a){return this.matches(new Ce(n,r))||(r=fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=fe.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(fe.EMPTY_NODE);const s=this;return n.forEachChild(at,(a,c)=>{s.matches(new Ce(a,c))||(i=i.updateImmediateChild(a,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $u(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,a){return this.rangedFilter_.matches(new Ce(n,r))||(r=fe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,a):this.fullLimitUpdateChild_(e,n,r,s,a)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=fe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const c=s.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(fe.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const c=s.getNext();a<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?a++:i=i.updateImmediateChild(c.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let a;if(this.reverse_){const _=this.index_.getCompare();a=(x,E)=>_(E,x)}else a=this.index_.getCompare();const c=e;ee(c.numChildren()===this.limit_,"");const u=new Ce(n,r),m=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(u);if(c.hasChild(n)){const _=c.getImmediateChild(n);let x=i.getChildAfterChild(this.index_,m,this.reverse_);for(;x!=null&&(x.name===n||c.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const E=x==null?1:a(x,u);if(g&&!r.isEmpty()&&E>=0)return s!=null&&s.trackChildChange(Hu(n,r,_)),c.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(qu(n,_));const N=c.updateImmediateChild(n,fe.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(s!=null&&s.trackChildChange(wl(x.name,x.node)),N.updateImmediateChild(x.name,x.node)):N}}else return r.isEmpty()?e:g&&a(m,u)>=0?(s!=null&&(s.trackChildChange(qu(m.name,m.node)),s.trackChildChange(wl(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(m.name,fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=at}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ro}hasEnd(){return this.endSet_}getIndexEndValue(){return ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ss}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===at}copy(){const e=new x0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function n3(t){return t.loadsAllData()?new v0(t.getIndex()):t.hasLimit()?new t3(t):new $u(t)}function r3(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function i3(t,e){const n=t.copy();return n.index_=e,n}function yT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===at?n="$priority":t.index_===yS?n="$value":t.index_===vo?n="$key":(ee(t.index_ instanceof y0,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ft(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ft(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ft(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ft(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ft(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==at&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends aS{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=vh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Gf.getListenId_(e,r),c={};this.listens_[a]=c;const u=yT(e._queryParams);this.restRequest_(s+".json",u,(m,g)=>{let _=g;if(m===404&&(_=null,m=null),m===null&&this.onDataUpdate_(s,_,!1,r),cl(this.listens_,a)===c){let x;m?m===401?x="permission_denied":x="rest_error:"+m:x="ok",i(x,null)}})}unlisten(e,n){const r=Gf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=yT(e._queryParams),r=e._path.toString(),i=new Sm;return this.restRequest_(r+".json",n,(s,a)=>{let c=a;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ll(n);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Ou(c.responseText)}catch{bn("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&bn("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){return{value:null,children:new Map}}function xS(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=be(e);t.children.has(r)||t.children.set(r,Kf());const i=t.children.get(r);e=Ke(e),xS(i,e,n)}}function $_(t,e,n){t.value!==null?n(e,t.value):o3(t,(r,i)=>{const s=new $e(e.toString()+"/"+r);$_(i,s,n)})}function o3(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&In(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=10*1e3,l3=30*1e3,c3=5*60*1e3;class u3{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new a3(e);const r=xT+(l3-xT)*Math.random();cu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;In(e,(i,s)=>{s>0&&Hr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),cu(this.reportStats_.bind(this),Math.floor(Math.random()*2*c3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pr||(pr={}));function wS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function w0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function E0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=pr.ACK_USER_WRITE,this.source=wS()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $e(e));return new Zf(De(),n,this.revert)}}else return ee(be(this.path)===e,"operationForChild called for unrelated child."),new Zf(Ke(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.source=e,this.path=n,this.type=pr.LISTEN_COMPLETE}operationForChild(e){return Ie(this.path)?new Gu(this.source,De()):new Gu(this.source,Ke(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=pr.OVERWRITE}operationForChild(e){return Ie(this.path)?new Lo(this.source,De(),this.snap.getImmediateChild(e)):new Lo(this.source,Ke(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=pr.MERGE}operationForChild(e){if(Ie(this.path)){const n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new Lo(this.source,De(),n.value):new Ku(this.source,De(),n)}else return ee(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ku(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=be(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d3(t,e,n,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(e3(a.childName,a.snapshotNode))}),jc(t,i,"child_removed",e,r,n),jc(t,i,"child_added",e,r,n),jc(t,i,"child_moved",s,r,n),jc(t,i,"child_changed",e,r,n),jc(t,i,"value",e,r,n),i}function jc(t,e,n,r,i,s){const a=r.filter(c=>c.type===n);a.sort((c,u)=>m3(t,c,u)),a.forEach(c=>{const u=f3(t,c,s);i.forEach(m=>{m.respondsTo(c.type)&&e.push(m.createEvent(u,t.query_))})})}function f3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function m3(t,e,n){if(e.childName==null||n.childName==null)throw Rl("Should only compare child_ events.");const r=new Ce(e.childName,e.snapshotNode),i=new Ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){return{eventCache:t,serverCache:e}}function uu(t,e,n,r){return sp(new Mo(e,n,r),t.serverCache)}function ES(t,e,n,r){return sp(t.eventCache,new Mo(e,n,r))}function G_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Oo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg;const p3=()=>(dg||(dg=new xn(eV)),dg);class Xe{constructor(e,n=p3()){this.value=e,this.children=n}static fromObject(e){let n=new Xe(null);return In(e,(r,i)=>{n=n.set(new $e(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:De(),value:this.value};if(Ie(e))return null;{const r=be(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Ke(e),n);return s!=null?{path:St(new $e(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{const n=be(e),r=this.children.get(n);return r!==null?r.subtree(Ke(e)):new Xe(null)}}set(e,n){if(Ie(e))return new Xe(n,this.children);{const r=be(e),s=(this.children.get(r)||new Xe(null)).set(Ke(e),n),a=this.children.insert(r,s);return new Xe(this.value,a)}}remove(e){if(Ie(e))return this.children.isEmpty()?new Xe(null):new Xe(null,this.children);{const n=be(e),r=this.children.get(n);if(r){const i=r.remove(Ke(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Xe(null):new Xe(this.value,s)}else return this}}get(e){if(Ie(e))return this.value;{const n=be(e),r=this.children.get(n);return r?r.get(Ke(e)):null}}setTree(e,n){if(Ie(e))return n;{const r=be(e),s=(this.children.get(r)||new Xe(null)).setTree(Ke(e),n);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new Xe(this.value,a)}}fold(e){return this.fold_(De(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(St(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,De(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ie(e))return null;{const s=be(e),a=this.children.get(s);return a?a.findOnPath_(Ke(e),St(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,De(),n)}foreachOnPath_(e,n,r){if(Ie(e))return this;{this.value&&r(n,this.value);const i=be(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),St(n,i),r):new Xe(null)}}foreach(e){this.foreach_(De(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(St(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.writeTree_=e}static empty(){return new vr(new Xe(null))}}function hu(t,e,n){if(Ie(e))return new vr(new Xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=vn(i,e);return s=s.updateChild(a,n),new vr(t.writeTree_.set(i,s))}else{const i=new Xe(n),s=t.writeTree_.setTree(e,i);return new vr(s)}}}function wT(t,e,n){let r=t;return In(n,(i,s)=>{r=hu(r,St(e,i),s)}),r}function ET(t,e){if(Ie(e))return vr.empty();{const n=t.writeTree_.setTree(e,new Xe(null));return new vr(n)}}function K_(t,e){return Wo(t,e)!=null}function Wo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vn(n.path,e)):null}function TT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(at,(r,i)=>{e.push(new Ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ce(r,i.value))}),e}function ws(t,e){if(Ie(e))return t;{const n=Wo(t,e);return n!=null?new vr(new Xe(n)):new vr(t.writeTree_.subtree(e))}}function Z_(t){return t.writeTree_.isEmpty()}function El(t,e){return TS(De(),t.writeTree_,e)}function TS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ee(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=TS(St(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(St(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){return kS(e,t)}function g3(t,e,n,r,i){ee(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=hu(t.visibleWrites,e,n)),t.lastWriteId=r}function _3(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function y3(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);ee(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const c=t.allWrites[a];c.visible&&(a>=n&&v3(c,r.path)?i=!1:mr(r.path,c.path)&&(s=!0)),a--}if(i){if(s)return x3(t),!0;if(r.snap)t.visibleWrites=ET(t.visibleWrites,r.path);else{const c=r.children;In(c,u=>{t.visibleWrites=ET(t.visibleWrites,St(r.path,u))})}return!0}else return!1}function v3(t,e){if(t.snap)return mr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mr(St(t.path,n),e))return!0;return!1}function x3(t){t.visibleWrites=bS(t.allWrites,w3,De()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function w3(t){return t.visible}function bS(t,e,n){let r=vr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const a=s.path;let c;if(s.snap)mr(n,a)?(c=vn(n,a),r=hu(r,c,s.snap)):mr(a,n)&&(c=vn(a,n),r=hu(r,De(),s.snap.getChild(c)));else if(s.children){if(mr(n,a))c=vn(n,a),r=wT(r,c,s.children);else if(mr(a,n))if(c=vn(a,n),Ie(c))r=wT(r,De(),s.children);else{const u=cl(s.children,be(c));if(u){const m=u.getChild(Ke(c));r=hu(r,De(),m)}}}else throw Rl("WriteRecord should have .snap or .children")}}return r}function IS(t,e,n,r,i){if(!r&&!i){const s=Wo(t.visibleWrites,e);if(s!=null)return s;{const a=ws(t.visibleWrites,e);if(Z_(a))return n;if(n==null&&!K_(a,De()))return null;{const c=n||fe.EMPTY_NODE;return El(a,c)}}}else{const s=ws(t.visibleWrites,e);if(!i&&Z_(s))return n;if(!i&&n==null&&!K_(s,De()))return null;{const a=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(mr(m.path,e)||mr(e,m.path))},c=bS(t.allWrites,a,e),u=n||fe.EMPTY_NODE;return El(c,u)}}}function E3(t,e,n){let r=fe.EMPTY_NODE;const i=Wo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(at,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(n){const s=ws(t.visibleWrites,e);return n.forEachChild(at,(a,c)=>{const u=El(ws(s,new $e(a)),c);r=r.updateImmediateChild(a,u)}),TT(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=ws(t.visibleWrites,e);return TT(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function T3(t,e,n,r,i){ee(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=St(e,n);if(K_(t.visibleWrites,s))return null;{const a=ws(t.visibleWrites,s);return Z_(a)?i.getChild(n):El(a,i.getChild(n))}}function b3(t,e,n,r){const i=St(e,n),s=Wo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const a=ws(t.visibleWrites,i);return El(a,r.getNode().getImmediateChild(n))}else return null}function I3(t,e){return Wo(t.visibleWrites,e)}function C3(t,e,n,r,i,s,a){let c;const u=ws(t.visibleWrites,e),m=Wo(u,De());if(m!=null)c=m;else if(n!=null)c=El(u,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const g=[],_=a.getCompare(),x=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let E=x.getNext();for(;E&&g.length<i;)_(E,r)!==0&&g.push(E),E=x.getNext();return g}else return[]}function k3(){return{visibleWrites:vr.empty(),allWrites:[],lastWriteId:-1}}function Qf(t,e,n,r){return IS(t.writeTree,t.treePath,e,n,r)}function b0(t,e){return E3(t.writeTree,t.treePath,e)}function bT(t,e,n,r){return T3(t.writeTree,t.treePath,e,n,r)}function Yf(t,e){return I3(t.writeTree,St(t.treePath,e))}function S3(t,e,n,r,i,s){return C3(t.writeTree,t.treePath,e,n,r,i,s)}function I0(t,e,n){return b3(t.writeTree,t.treePath,e,n)}function CS(t,e){return kS(St(t.treePath,e),t.writeTree)}function kS(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ee(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ee(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Hu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,qu(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wl(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Hu(r,e.snapshotNode,i.oldSnap));else throw Rl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const SS=new N3;class C0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Mo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return I0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Oo(this.viewCache_),s=S3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t){return{filter:t}}function R3(t,e){ee(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ee(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function L3(t,e,n,r,i){const s=new P3;let a,c;if(n.type===pr.OVERWRITE){const m=n;m.source.fromUser?a=Q_(t,e,m.path,m.snap,r,i,s):(ee(m.source.fromServer,"Unknown source."),c=m.source.tagged||e.serverCache.isFiltered()&&!Ie(m.path),a=Xf(t,e,m.path,m.snap,r,i,c,s))}else if(n.type===pr.MERGE){const m=n;m.source.fromUser?a=O3(t,e,m.path,m.children,r,i,s):(ee(m.source.fromServer,"Unknown source."),c=m.source.tagged||e.serverCache.isFiltered(),a=Y_(t,e,m.path,m.children,r,i,c,s))}else if(n.type===pr.ACK_USER_WRITE){const m=n;m.revert?a=F3(t,e,m.path,r,i,s):a=j3(t,e,m.path,m.affectedTree,r,i,s)}else if(n.type===pr.LISTEN_COMPLETE)a=D3(t,e,n.path,r,s);else throw Rl("Unknown operation type: "+n.type);const u=s.getChanges();return M3(e,a,u),{viewCache:a,changes:u}}function M3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=G_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(vS(G_(e)))}}function PS(t,e,n,r,i,s){const a=e.eventCache;if(Yf(r,n)!=null)return e;{let c,u;if(Ie(n))if(ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Oo(e),g=m instanceof fe?m:fe.EMPTY_NODE,_=b0(r,g);c=t.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const m=Qf(r,Oo(e));c=t.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const m=be(n);if(m===".priority"){ee(Ps(n)===1,"Can't have a priority with additional path components");const g=a.getNode();u=e.serverCache.getNode();const _=bT(r,n,g,u);_!=null?c=t.filter.updatePriority(g,_):c=a.getNode()}else{const g=Ke(n);let _;if(a.isCompleteForChild(m)){u=e.serverCache.getNode();const x=bT(r,n,a.getNode(),u);x!=null?_=a.getNode().getImmediateChild(m).updateChild(g,x):_=a.getNode().getImmediateChild(m)}else _=I0(r,m,e.serverCache);_!=null?c=t.filter.updateChild(a.getNode(),m,_,g,i,s):c=a.getNode()}}return uu(e,c,a.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function Xf(t,e,n,r,i,s,a,c){const u=e.serverCache;let m;const g=a?t.filter:t.filter.getIndexedFilter();if(Ie(n))m=g.updateFullNode(u.getNode(),r,null);else if(g.filtersNodes()&&!u.isFiltered()){const E=u.getNode().updateChild(n,r);m=g.updateFullNode(u.getNode(),E,null)}else{const E=be(n);if(!u.isCompleteForPath(n)&&Ps(n)>1)return e;const C=Ke(n),M=u.getNode().getImmediateChild(E).updateChild(C,r);E===".priority"?m=g.updatePriority(u.getNode(),M):m=g.updateChild(u.getNode(),E,M,C,SS,null)}const _=ES(e,m,u.isFullyInitialized()||Ie(n),g.filtersNodes()),x=new C0(i,_,s);return PS(t,_,n,i,x,c)}function Q_(t,e,n,r,i,s,a){const c=e.eventCache;let u,m;const g=new C0(i,e,s);if(Ie(n))m=t.filter.updateFullNode(e.eventCache.getNode(),r,a),u=uu(e,m,!0,t.filter.filtersNodes());else{const _=be(n);if(_===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),r),u=uu(e,m,c.isFullyInitialized(),c.isFiltered());else{const x=Ke(n),E=c.getNode().getImmediateChild(_);let C;if(Ie(x))C=r;else{const N=g.getCompleteChild(_);N!=null?cS(x)===".priority"&&N.getChild(hS(x)).isEmpty()?C=N:C=N.updateChild(x,r):C=fe.EMPTY_NODE}if(E.equals(C))u=e;else{const N=t.filter.updateChild(c.getNode(),_,C,x,g,a);u=uu(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function IT(t,e){return t.eventCache.isCompleteForChild(e)}function O3(t,e,n,r,i,s,a){let c=e;return r.foreach((u,m)=>{const g=St(n,u);IT(e,be(g))&&(c=Q_(t,c,g,m,i,s,a))}),r.foreach((u,m)=>{const g=St(n,u);IT(e,be(g))||(c=Q_(t,c,g,m,i,s,a))}),c}function CT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Y_(t,e,n,r,i,s,a,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,m;Ie(n)?m=r:m=new Xe(null).setTree(n,r);const g=e.serverCache.getNode();return m.children.inorderTraversal((_,x)=>{if(g.hasChild(_)){const E=e.serverCache.getNode().getImmediateChild(_),C=CT(t,E,x);u=Xf(t,u,new $e(_),C,i,s,a,c)}}),m.children.inorderTraversal((_,x)=>{const E=!e.serverCache.isCompleteForChild(_)&&x.value===null;if(!g.hasChild(_)&&!E){const C=e.serverCache.getNode().getImmediateChild(_),N=CT(t,C,x);u=Xf(t,u,new $e(_),N,i,s,a,c)}}),u}function j3(t,e,n,r,i,s,a){if(Yf(i,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Ie(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Xf(t,e,n,u.getNode().getChild(n),i,s,c,a);if(Ie(n)){let m=new Xe(null);return u.getNode().forEachChild(vo,(g,_)=>{m=m.set(new $e(g),_)}),Y_(t,e,n,m,i,s,c,a)}else return e}else{let m=new Xe(null);return r.foreach((g,_)=>{const x=St(n,g);u.isCompleteForPath(x)&&(m=m.set(g,u.getNode().getChild(x)))}),Y_(t,e,n,m,i,s,c,a)}}function D3(t,e,n,r,i){const s=e.serverCache,a=ES(e,s.getNode(),s.isFullyInitialized()||Ie(n),s.isFiltered());return PS(t,a,n,r,SS,i)}function F3(t,e,n,r,i,s){let a;if(Yf(r,n)!=null)return e;{const c=new C0(r,e,i),u=e.eventCache.getNode();let m;if(Ie(n)||be(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Qf(r,Oo(e));else{const _=e.serverCache.getNode();ee(_ instanceof fe,"serverChildren would be complete if leaf node"),g=b0(r,_)}g=g,m=t.filter.updateFullNode(u,g,s)}else{const g=be(n);let _=I0(r,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=u.getImmediateChild(g)),_!=null?m=t.filter.updateChild(u,g,_,Ke(n),c,s):e.eventCache.getNode().hasChild(g)?m=t.filter.updateChild(u,g,fe.EMPTY_NODE,Ke(n),c,s):m=u,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Qf(r,Oo(e)),a.isLeafNode()&&(m=t.filter.updateFullNode(m,a,s)))}return a=e.serverCache.isFullyInitialized()||Yf(r,De())!=null,uu(e,m,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new v0(r.getIndex()),s=n3(r);this.processor_=A3(s);const a=n.serverCache,c=n.eventCache,u=i.updateFullNode(fe.EMPTY_NODE,a.getNode(),null),m=s.updateFullNode(fe.EMPTY_NODE,c.getNode(),null),g=new Mo(u,a.isFullyInitialized(),i.filtersNodes()),_=new Mo(m,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=sp(_,g),this.eventGenerator_=new h3(this.query_)}get query(){return this.query_}}function U3(t){return t.viewCache_.serverCache.getNode()}function z3(t,e){const n=Oo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(be(e)).isEmpty())?n.getChild(e):null}function kT(t){return t.eventRegistrations_.length===0}function B3(t,e){t.eventRegistrations_.push(e)}function ST(t,e,n){const r=[];if(n){ee(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function PT(t,e,n,r){e.type===pr.MERGE&&e.source.queryId!==null&&(ee(Oo(t.viewCache_),"We should always have a full cache before handling merges"),ee(G_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=L3(t.processor_,i,e,n,r);return R3(t.processor_,s.viewCache),ee(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,NS(t,s.changes,s.viewCache.eventCache.getNode(),null)}function W3(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(at,(s,a)=>{r.push(wl(s,a))}),n.isFullyInitialized()&&r.push(vS(n.getNode())),NS(t,r,n.getNode(),e)}function NS(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return d3(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf;class q3{constructor(){this.views=new Map}}function H3(t){ee(!Jf,"__referenceConstructor has already been defined"),Jf=t}function $3(){return ee(Jf,"Reference.ts has not been loaded"),Jf}function G3(t){return t.views.size===0}function k0(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ee(s!=null,"SyncTree gave us an op for an invalid query."),PT(s,e,n,r)}else{let s=[];for(const a of t.views.values())s=s.concat(PT(a,e,n,r));return s}}function K3(t,e,n,r,i){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let c=Qf(n,i?r:null),u=!1;c?u=!0:r instanceof fe?(c=b0(n,r),u=!1):(c=fe.EMPTY_NODE,u=!1);const m=sp(new Mo(c,u,!1),new Mo(r,i,!1));return new V3(e,m)}return a}function Z3(t,e,n,r,i,s){const a=K3(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),B3(a,n),W3(a,n)}function Q3(t,e,n,r){const i=e._queryIdentifier,s=[];let a=[];const c=Ns(t);if(i==="default")for(const[u,m]of t.views.entries())a=a.concat(ST(m,n,r)),kT(m)&&(t.views.delete(u),m.query._queryParams.loadsAllData()||s.push(m.query));else{const u=t.views.get(i);u&&(a=a.concat(ST(u,n,r)),kT(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return c&&!Ns(t)&&s.push(new($3())(e._repo,e._path)),{removed:s,events:a}}function AS(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ja(t,e){let n=null;for(const r of t.views.values())n=n||z3(r,e);return n}function RS(t,e){if(e._queryParams.loadsAllData())return op(t);{const r=e._queryIdentifier;return t.views.get(r)}}function LS(t,e){return RS(t,e)!=null}function Ns(t){return op(t)!=null}function op(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em;function Y3(t){ee(!em,"__referenceConstructor has already been defined"),em=t}function X3(){return ee(em,"Reference.ts has not been loaded"),em}let J3=1;class NT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xe(null),this.pendingWriteTree_=k3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function MS(t,e,n,r,i){return g3(t.pendingWriteTree_,e,n,r,i),i?wh(t,new Lo(wS(),e,n)):[]}function mo(t,e,n=!1){const r=_3(t.pendingWriteTree_,e);if(y3(t.pendingWriteTree_,e)){let s=new Xe(null);return r.snap!=null?s=s.set(De(),!0):In(r.children,a=>{s=s.set(new $e(a),!0)}),wh(t,new Zf(r.path,s,n))}else return[]}function ap(t,e,n){return wh(t,new Lo(w0(),e,n))}function e5(t,e,n){const r=Xe.fromObject(n);return wh(t,new Ku(w0(),e,r))}function t5(t,e){return wh(t,new Gu(w0(),e))}function n5(t,e,n){const r=P0(t,n);if(r){const i=N0(r),s=i.path,a=i.queryId,c=vn(s,e),u=new Gu(E0(a),c);return A0(t,s,u)}else return[]}function X_(t,e,n,r,i=!1){const s=e._path,a=t.syncPointTree_.get(s);let c=[];if(a&&(e._queryIdentifier==="default"||LS(a,e))){const u=Q3(a,e,n,r);G3(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const m=u.removed;if(c=u.events,!i){const g=m.findIndex(x=>x._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(s,(x,E)=>Ns(E));if(g&&!_){const x=t.syncPointTree_.subtree(s);if(!x.isEmpty()){const E=s5(x);for(let C=0;C<E.length;++C){const N=E[C],M=N.query,b=DS(t,N);t.listenProvider_.startListening(du(M),tm(t,M),b.hashFn,b.onComplete)}}}!_&&m.length>0&&!r&&(g?t.listenProvider_.stopListening(du(e),null):m.forEach(x=>{const E=t.queryToTagMap.get(lp(x));t.listenProvider_.stopListening(du(x),E)}))}o5(t,m)}return c}function r5(t,e,n,r){const i=P0(t,r);if(i!=null){const s=N0(i),a=s.path,c=s.queryId,u=vn(a,e),m=new Lo(E0(c),u,n);return A0(t,a,m)}else return[]}function i5(t,e,n,r){const i=P0(t,r);if(i){const s=N0(i),a=s.path,c=s.queryId,u=vn(a,e),m=Xe.fromObject(n),g=new Ku(E0(c),u,m);return A0(t,a,g)}else return[]}function AT(t,e,n,r=!1){const i=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(i,(x,E)=>{const C=vn(x,i);s=s||Ja(E,C),a=a||Ns(E)});let c=t.syncPointTree_.get(i);c?(a=a||Ns(c),s=s||Ja(c,De())):(c=new q3,t.syncPointTree_=t.syncPointTree_.set(i,c));let u;s!=null?u=!0:(u=!1,s=fe.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((E,C)=>{const N=Ja(C,De());N&&(s=s.updateImmediateChild(E,N))}));const m=LS(c,e);if(!m&&!e._queryParams.loadsAllData()){const x=lp(e);ee(!t.queryToTagMap.has(x),"View does not exist, but we have a tag");const E=a5();t.queryToTagMap.set(x,E),t.tagToQueryMap.set(E,x)}const g=T0(t.pendingWriteTree_,i);let _=Z3(c,e,n,g,s,u);if(!m&&!a&&!r){const x=RS(c,e);_=_.concat(l5(t,e,x))}return _}function S0(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,c)=>{const u=vn(a,e),m=Ja(c,u);if(m)return m});return IS(i,e,s,n,!0)}function wh(t,e){return OS(e,t.syncPointTree_,null,T0(t.pendingWriteTree_,De()))}function OS(t,e,n,r){if(Ie(t.path))return jS(t,e,n,r);{const i=e.get(De());n==null&&i!=null&&(n=Ja(i,De()));let s=[];const a=be(t.path),c=t.operationForChild(a),u=e.children.get(a);if(u&&c){const m=n?n.getImmediateChild(a):null,g=CS(r,a);s=s.concat(OS(c,u,m,g))}return i&&(s=s.concat(k0(i,t,r,n))),s}}function jS(t,e,n,r){const i=e.get(De());n==null&&i!=null&&(n=Ja(i,De()));let s=[];return e.children.inorderTraversal((a,c)=>{const u=n?n.getImmediateChild(a):null,m=CS(r,a),g=t.operationForChild(a);g&&(s=s.concat(jS(g,c,u,m)))}),i&&(s=s.concat(k0(i,t,r,n))),s}function DS(t,e){const n=e.query,r=tm(t,n);return{hashFn:()=>(U3(e)||fe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?n5(t,n._path,r):t5(t,n._path);{const s=rV(i,n);return X_(t,n,null,s)}}}}function tm(t,e){const n=lp(e);return t.queryToTagMap.get(n)}function lp(t){return t._path.toString()+"$"+t._queryIdentifier}function P0(t,e){return t.tagToQueryMap.get(e)}function N0(t){const e=t.indexOf("$");return ee(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $e(t.substr(0,e))}}function A0(t,e,n){const r=t.syncPointTree_.get(e);ee(r,"Missing sync point for query tag that we're tracking");const i=T0(t.pendingWriteTree_,e);return k0(r,n,i,null)}function s5(t){return t.fold((e,n,r)=>{if(n&&Ns(n))return[op(n)];{let i=[];return n&&(i=AS(n)),In(r,(s,a)=>{i=i.concat(a)}),i}})}function du(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(X3())(t._repo,t._path):t}function o5(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=lp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function a5(){return J3++}function l5(t,e,n){const r=e._path,i=tm(t,e),s=DS(t,n),a=t.listenProvider_.startListening(du(e),i,s.hashFn,s.onComplete),c=t.syncPointTree_.subtree(r);if(i)ee(!Ns(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((m,g,_)=>{if(!Ie(m)&&g&&Ns(g))return[op(g).query];{let x=[];return g&&(x=x.concat(AS(g).map(E=>E.query))),In(_,(E,C)=>{x=x.concat(C)}),x}});for(let m=0;m<u.length;++m){const g=u[m];t.listenProvider_.stopListening(du(g),tm(t,g))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new R0(n)}node(){return this.node_}}class L0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=St(this.path_,e);return new L0(this.syncTree_,n)}node(){return S0(this.syncTree_,this.path_)}}const c5=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},RT=function(t,e,n){if(!t||typeof t!="object")return t;if(ee(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u5(t[".sv"],e,n);if(typeof t[".sv"]=="object")return h5(t[".sv"],e);ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u5=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ee(!1,"Unexpected server value: "+t)}},h5=function(t,e,n){t.hasOwnProperty("increment")||ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ee(!1,"Unexpected increment value: "+r);const i=e.node();if(ee(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},d5=function(t,e,n,r){return M0(e,new L0(n,t),r)},FS=function(t,e,n){return M0(t,new R0(e),n)};function M0(t,e,n){const r=t.getPriority().val(),i=RT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,c=RT(a.getValue(),e,n);return c!==a.getValue()||i!==a.getPriority().val()?new Mt(c,qt(i)):t}else{const a=t;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new Mt(i))),a.forEachChild(at,(c,u)=>{const m=M0(u,e.getImmediateChild(c),n);m!==u&&(s=s.updateImmediateChild(c,m))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function j0(t,e){let n=e instanceof $e?e:new $e(e),r=t,i=be(n);for(;i!==null;){const s=cl(r.node.children,i)||{children:{},childCount:0};r=new O0(i,r,s),n=Ke(n),i=be(n)}return r}function zl(t){return t.node.value}function VS(t,e){t.node.value=e,J_(t)}function US(t){return t.node.childCount>0}function f5(t){return zl(t)===void 0&&!US(t)}function cp(t,e){In(t.node.children,(n,r)=>{e(new O0(n,t,r))})}function zS(t,e,n,r){n&&e(t),cp(t,i=>{zS(i,e,!0)})}function m5(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Eh(t){return new $e(t.parent===null?t.name:Eh(t.parent)+"/"+t.name)}function J_(t){t.parent!==null&&p5(t.parent,t.name,t)}function p5(t,e,n){const r=f5(n),i=Hr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,J_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,J_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=/[\[\].#$\/\u0000-\u001F\u007F]/,_5=/[\[\].#$\u0000-\u001F\u007F]/,fg=10*1024*1024,BS=function(t){return typeof t=="string"&&t.length!==0&&!g5.test(t)},WS=function(t){return typeof t=="string"&&t.length!==0&&!_5.test(t)},y5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),WS(t)},LT=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!u0(t)||t&&typeof t=="object"&&Hr(t,".sv")},qS=function(t,e,n,r){r&&e===void 0||D0(uv(t,"value"),e,n)},D0=function(t,e,n){const r=n instanceof $e?new jV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+so(r));if(typeof e=="function")throw new Error(t+"contains a function "+so(r)+" with contents = "+e.toString());if(u0(e))throw new Error(t+"contains "+e.toString()+" "+so(r));if(typeof e=="string"&&e.length>fg/3&&Pm(e)>fg)throw new Error(t+"contains a string greater than "+fg+" utf8 bytes "+so(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(In(e,(a,c)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!BS(a)))throw new Error(t+" contains an invalid key ("+a+") "+so(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);DV(r,a),D0(t,c,r),FV(r)}),i&&s)throw new Error(t+' contains ".value" child '+so(r)+" in addition to actual children.")}},F0=function(t,e,n,r){if(!WS(n))throw new Error(uv(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},v5=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),F0(t,e,n)},HS=function(t,e){if(be(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},x5=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!BS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!y5(n))throw new Error(uv(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function V0(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!p0(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function $S(t,e,n){V0(t,n),GS(t,r=>p0(r,e))}function Ri(t,e,n){V0(t,n),GS(t,r=>mr(r,e)||mr(e,r))}function GS(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(E5(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function E5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();lu&&nn("event: "+n.toString()),Ul(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="repo_interrupt",b5=25;class I5{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new w5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kf(),this.transactionQueueTree_=new O0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function C5(t,e,n){if(t.stats_=f0(t.repoInfo_),t.forceRestClient_||aV())t.server_=new Gf(t.repoInfo_,(r,i,s,a)=>{MT(t,r,i,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>OT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ft(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new xi(t.repoInfo_,e,(r,i,s,a)=>{MT(t,r,i,s,a)},r=>{OT(t,r)},r=>{k5(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=dV(t.repoInfo_,()=>new u3(t.stats_,t.server_)),t.infoData_=new s3,t.infoSyncTree_=new NT({startListening:(r,i,s,a)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=ap(t.infoSyncTree_,r._path,u),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),z0(t,"connected",!1),t.serverSyncTree_=new NT({startListening:(r,i,s,a)=>(t.server_.listen(r,s,i,(c,u)=>{const m=a(c,u);Ri(t.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function KS(t){const n=t.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function U0(t){return c5({timestamp:KS(t)})}function MT(t,e,n,r,i){t.dataUpdateCount++;const s=new $e(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(i)if(r){const u=kf(n,m=>qt(m));a=i5(t.serverSyncTree_,s,u,i)}else{const u=qt(n);a=r5(t.serverSyncTree_,s,u,i)}else if(r){const u=kf(n,m=>qt(m));a=e5(t.serverSyncTree_,s,u)}else{const u=qt(n);a=ap(t.serverSyncTree_,s,u)}let c=s;a.length>0&&(c=up(t,s)),Ri(t.eventQueue_,c,a)}function OT(t,e){z0(t,"connected",e),e===!1&&P5(t)}function k5(t,e){In(e,(n,r)=>{z0(t,n,r)})}function z0(t,e,n){const r=new $e("/.info/"+e),i=qt(n);t.infoData_.updateSnapshot(r,i);const s=ap(t.infoSyncTree_,r,i);Ri(t.eventQueue_,r,s)}function ZS(t){return t.nextWriteId_++}function S5(t,e,n,r,i){B0(t,"set",{path:e.toString(),value:n,priority:r});const s=U0(t),a=qt(n,r),c=S0(t.serverSyncTree_,e),u=FS(a,c,s),m=ZS(t),g=MS(t.serverSyncTree_,e,u,m,!0);V0(t.eventQueue_,g),t.server_.put(e.toString(),a.val(!0),(x,E)=>{const C=x==="ok";C||bn("set at "+e+" failed: "+x);const N=mo(t.serverSyncTree_,m,!C);Ri(t.eventQueue_,e,N),R5(t,i,x,E)});const _=tP(t,e);up(t,_),Ri(t.eventQueue_,_,[])}function P5(t){B0(t,"onDisconnectEvents");const e=U0(t),n=Kf();$_(t.onDisconnect_,De(),(i,s)=>{const a=d5(i,s,t.serverSyncTree_,e);xS(n,i,a)});let r=[];$_(n,De(),(i,s)=>{r=r.concat(ap(t.serverSyncTree_,i,s));const a=tP(t,i);up(t,a)}),t.onDisconnect_=Kf(),Ri(t.eventQueue_,De(),r)}function N5(t,e,n){let r;be(e._path)===".info"?r=AT(t.infoSyncTree_,e,n):r=AT(t.serverSyncTree_,e,n),$S(t.eventQueue_,e._path,r)}function QS(t,e,n){let r;be(e._path)===".info"?r=X_(t.infoSyncTree_,e,n):r=X_(t.serverSyncTree_,e,n),$S(t.eventQueue_,e._path,r)}function A5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(T5)}function B0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nn(n,...e)}function R5(t,e,n,r){e&&Ul(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function YS(t,e,n){return S0(t.serverSyncTree_,e,n)||fe.EMPTY_NODE}function W0(t,e=t.transactionQueueTree_){if(e||hp(t,e),zl(e)){const n=JS(t,e);ee(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&L5(t,Eh(e),n)}else US(e)&&cp(e,n=>{W0(t,n)})}function L5(t,e,n){const r=n.map(m=>m.currentWriteId),i=YS(t,e,r);let s=i;const a=i.hash();for(let m=0;m<n.length;m++){const g=n[m];ee(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=vn(e,g.path);s=s.updateChild(_,g.currentOutputSnapshotRaw)}const c=s.val(!0),u=e;t.server_.put(u.toString(),c,m=>{B0(t,"transaction put response",{path:u.toString(),status:m});let g=[];if(m==="ok"){const _=[];for(let x=0;x<n.length;x++)n[x].status=2,g=g.concat(mo(t.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&_.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();hp(t,j0(t.transactionQueueTree_,e)),W0(t,t.transactionQueueTree_),Ri(t.eventQueue_,e,g);for(let x=0;x<_.length;x++)Ul(_[x])}else{if(m==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{bn("transaction at "+u.toString()+" failed: "+m);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=m}up(t,e)}},a)}function up(t,e){const n=XS(t,e),r=Eh(n),i=JS(t,n);return M5(t,i,r),r}function M5(t,e,n){if(e.length===0)return;const r=[];let i=[];const a=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],m=vn(n,u.path);let g=!1,_;if(ee(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)g=!0,_=u.abortReason,i=i.concat(mo(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=b5)g=!0,_="maxretry",i=i.concat(mo(t.serverSyncTree_,u.currentWriteId,!0));else{const x=YS(t,u.path,a);u.currentInputSnapshot=x;const E=e[c].update(x.val());if(E!==void 0){D0("transaction failed: Data returned ",E,u.path);let C=qt(E);typeof E=="object"&&E!=null&&Hr(E,".priority")||(C=C.updatePriority(x.getPriority()));const M=u.currentWriteId,b=U0(t),I=FS(C,x,b);u.currentOutputSnapshotRaw=C,u.currentOutputSnapshotResolved=I,u.currentWriteId=ZS(t),a.splice(a.indexOf(M),1),i=i.concat(MS(t.serverSyncTree_,u.path,I,u.currentWriteId,u.applyLocally)),i=i.concat(mo(t.serverSyncTree_,M,!0))}else g=!0,_="nodata",i=i.concat(mo(t.serverSyncTree_,u.currentWriteId,!0))}Ri(t.eventQueue_,n,i),i=[],g&&(e[c].status=2,function(x){setTimeout(x,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(_==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(_),!1,null))))}hp(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Ul(r[c]);W0(t,t.transactionQueueTree_)}function XS(t,e){let n,r=t.transactionQueueTree_;for(n=be(e);n!==null&&zl(r)===void 0;)r=j0(r,n),e=Ke(e),n=be(e);return r}function JS(t,e){const n=[];return eP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function eP(t,e,n){const r=zl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);cp(e,i=>{eP(t,i,n)})}function hp(t,e){const n=zl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,VS(e,n.length>0?n:void 0)}cp(e,r=>{hp(t,r)})}function tP(t,e){const n=Eh(XS(t,e)),r=j0(t.transactionQueueTree_,e);return m5(r,i=>{mg(t,i)}),mg(t,r),zS(r,i=>{mg(t,i)}),n}function mg(t,e){const n=zl(e);if(n){const r=[];let i=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(ee(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(ee(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(mo(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?VS(e,void 0):n.length=s+1,Ri(t.eventQueue_,Eh(e),i);for(let a=0;a<r.length;a++)Ul(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function j5(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bn(`Invalid query segment '${n}' in query '${t}'`)}return e}const jT=function(t,e){const n=D5(t),r=n.namespace;n.domain==="firebase.com"&&Ai(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ai("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||XF();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new eS(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new $e(n.pathString)}},D5=function(t){let e="",n="",r="",i="",s="",a=!0,c="https",u=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(c=t.substring(0,m-1),t=t.substring(m+2));let g=t.indexOf("/");g===-1&&(g=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(g,_)),g<_&&(i=O5(t.substring(g,_)));const x=j5(t.substring(Math.min(t.length,_)));m=e.indexOf(":"),m>=0?(a=c==="https"||c==="wss",u=parseInt(e.substring(m+1),10)):m=e.length;const E=e.slice(0,m);if(E.toLowerCase()==="localhost")n="localhost";else if(E.split(".").length<=2)n=E;else{const C=e.indexOf(".");r=e.substring(0,C).toLowerCase(),n=e.substring(C+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",F5=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=DT.charAt(n%64),n=Math.floor(n/64);ee(n===0,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=DT.charAt(e[i]);return ee(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ft(this.snapshot.exportVal())}}class U5{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ie(this._path)?null:cS(this._path)}get ref(){return new zs(this._repo,this._path)}get _queryIdentifier(){const e=vT(this._queryParams),n=h0(e);return n==="{}"?"default":n}get _queryObject(){return vT(this._queryParams)}isEqual(e){if(e=He(e),!(e instanceof Th))return!1;const n=this._repo===e._repo,r=p0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+OV(this._path)}}function B5(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function W5(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===vo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ro)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ss)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===at){if(e!=null&&!LT(e)||n!=null&&!LT(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ee(t.getIndex()instanceof y0||t.getIndex()===yS,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class zs extends Th{constructor(e,n){super(e,n,new x0,!1)}get parent(){const e=hS(this._path);return e===null?null:new zs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class nm{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new $e(e),r=Zu(this.ref,e);return new nm(this._node.getChild(n),r,at)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new nm(i,Zu(this.ref,r),at)))}hasChild(e){const n=new $e(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rm(t,e){return t=He(t),t._checkNotDeleted("ref"),e!==void 0?Zu(t._root,e):t._root}function Zu(t,e){return t=He(t),be(t._path)===null?v5("child","path",e):F0("child","path",e),new zs(t._repo,St(t._path,e))}function ey(t,e){t=He(t),HS("push",t._path),qS("push",e,t._path,!0);const n=KS(t._repo),r=F5(n),i=Zu(t,r),s=Zu(t,r);let a;return e!=null?a=q5(s,e).then(()=>s):a=Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function q5(t,e){t=He(t),HS("set",t._path),qS("set",e,t._path,!1);const n=new Sm;return S5(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class q0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new V5("value",this,new nm(e.snapshotNode,new zs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new U5(this,e,n):null}matches(e){return e instanceof q0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function H5(t,e,n,r,i){const s=new z5(n,void 0),a=new q0(s);return N5(t._repo,t,a),()=>QS(t._repo,t,a)}function $5(t,e,n,r){return H5(t,"value",e)}function G5(t,e,n){QS(t._repo,t,null)}class nP{}class K5 extends nP{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Th(e._repo,e._path,r3(e._queryParams,this._limit),e._orderByCalled)}}function Z5(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new K5(t)}class Q5 extends nP{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){B5(e,"orderByChild");const n=new $e(this._path);if(Ie(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new y0(n),i=i3(e._queryParams,r);return W5(i),new Th(e._repo,e._path,i,!0)}}function Y5(t){return F0("orderByChild","path",t),new Q5(t)}function X5(t,...e){let n=He(t);for(const r of e)n=r._apply(n);return n}H3(zs);Y3(zs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="FIREBASE_DATABASE_EMULATOR_HOST",ty={};let e6=!1;function t6(t,e,n,r){t.repoInfo_=new eS(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function n6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ai("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=jT(s,i),c=a.repoInfo,u;typeof process<"u"&&tT&&(u=tT[J5]),u?(s=`http://${u}?ns=${c.namespace}`,a=jT(s,i),c=a.repoInfo):a.repoInfo.secure;const m=new cV(t.name,t.options,e);x5("Invalid Firebase Database URL",a),Ie(a.path)||Ai("Database URL must point to the root of a Firebase Database (not including a child path).");const g=i6(c,t,m,new lV(t.name,n));return new s6(g,t)}function r6(t,e){const n=ty[e];(!n||n[t.key]!==t)&&Ai(`Database ${e}(${t.repoInfo_}) has already been deleted.`),A5(t),delete n[t.key]}function i6(t,e,n,r){let i=ty[e.name];i||(i={},ty[e.name]=i);let s=i[t.toURLString()];return s&&Ai("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new I5(t,e6,n,r),i[t.toURLString()]=s,s}class s6{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(C5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zs(this._repo,De())),this._rootInternal}_delete(){return this._rootInternal!==null&&(r6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ai("Cannot call "+e+" on a deleted database.")}}function o6(t=Am(),e){const n=rh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=av("database");r&&a6(n,...r)}return n}function a6(t,e,n,r={}){t=He(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ai("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ai('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xd(Xd.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:lv(r.mockUserToken,t.app.options.projectId);s=new Xd(a)}t6(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){$F(js),bs(new Ii("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return n6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Qn(nT,rT,t),Qn(nT,rT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6={".sv":"timestamp"};function ny(){return c6}xi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};xi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};l6();const u6={apiKey:"AIzaSyBjrRdoSh_MG8kBLCl3IvgrD9Mf1_PE_YQ",authDomain:"proyect-1-25133.firebaseapp.com",projectId:"proyect-1-25133",storageBucket:"proyect-1-25133.firebasestorage.app",messagingSenderId:"375948635895",appId:"1:375948635895:web:4f80488e14b3684efbadf2",measurementId:"",databaseURL:"https://proyect-1-25133-default-rtdb.firebaseio.com"},dp=AC(u6),Dc=yj(dp),rn=E1(dp);BF(dp);const im=o6(dp),rP=new li;rP.setCustomParameters({prompt:"select_account"});const iP=B.createContext(),h6=({children:t})=>{const[e,n]=B.useState(null),[r,i]=B.useState(null),[s,a]=B.useState(!0),[c,u]=B.useState(!1);B.useEffect(()=>oO(Dc,async I=>{I?(n(I),await m(I.uid)):(n(null),i(null)),a(!1)}),[]);const m=async b=>{try{const I=mi(rn,"usuarios",b),S=await z_(I);S.exists()?i(S.data()):console.log("Perfil no existe, se crear al editar")}catch(I){console.error("Error al cargar perfil:",I)}},g=async(b,I,S)=>{try{u(!0);const O=await eO(Dc,b,I);return await rO(O.user,{displayName:S}),await E(O.user.uid,{email:b,displayName:S,createdAt:new Date().toISOString()}),await new Promise(z=>setTimeout(z,500)),O}catch(O){throw console.error("Error en signUp:",O),O}finally{u(!1)}},_=async(b,I)=>{try{u(!0);const S=await tO(Dc,b,I);return await new Promise(O=>setTimeout(O,500)),S}catch(S){throw console.error("Error en signIn:",S),S}finally{u(!1)}},x=async()=>{try{u(!0);const b=await kO(Dc,rP),I=mi(rn,"usuarios",b.user.uid);return(await z_(I)).exists()||await E(b.user.uid,{email:b.user.email,displayName:b.user.displayName,photoURL:b.user.photoURL,createdAt:new Date().toISOString()}),await new Promise(O=>setTimeout(O,500)),b}catch(b){throw console.error("Error en signInWithGoogle:",b),b}finally{u(!1)}},E=async(b,I)=>{try{const S={...I,edad:null,posicion:null,zona:null,nivel:"intermedio",partidosJugados:0,partidosConfirmados:0,partidosAsistidos:0,calificacionPromedio:0,totalCalificaciones:0,confianza:100,estrellas:0,teamTheme:"default",notificaciones:!0};await B_(mi(rn,"usuarios",b),S),console.log(" Documento de usuario creado exitosamente"),i(S)}catch(S){throw console.error(" Error al crear documento de usuario:",S),S}},M={user:e,userProfile:r,loading:s,authLoading:c,signUp:g,signIn:_,signInWithGoogle:x,signOut:async()=>{await aO(Dc),n(null),i(null)},updateUserProfile:async b=>{if(!e)throw console.error(" No hay usuario autenticado"),new Error("No hay usuario autenticado");try{console.log(" Actualizando perfil con:",b);const I=mi(rn,"usuarios",e.uid);await B_(I,b,{merge:!0}),console.log(" Perfil actualizado exitosamente"),await m(e.uid)}catch(I){throw console.error(" Error al actualizar perfil:",I),console.error("Detalles del error:",I.message),I}}};return d.jsx(iP.Provider,{value:M,children:!s&&t})},Tr=()=>{const t=B.useContext(iP);if(!t)throw new Error("useAuth debe usarse dentro de AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:c="",children:u,...m},g)=>B.createElement("svg",{ref:g,...d6,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${f6(t)}`,c].join(" "),...m},[...e.map(([_,x])=>B.createElement(_,x)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=we("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=we("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=we("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=we("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=we("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=we("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=we("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=we("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=we("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=we("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fP=B.createContext(),gg={default:{name:"Por Defecto",primary:"#10b981",secondary:"#059669",accent:"#34d399"},boca:{name:"Boca Juniors",primary:"#003D7A",secondary:"#FFD100",accent:"#003D7A"},central:{name:"Rosario Central",primary:"#003D7A",secondary:"#FFD100",accent:"#003D7A"},river:{name:"River Plate",primary:"#E4002B",secondary:"#FFFFFF",accent:"#E4002B"},estudiantes:{name:"Estudiantes",primary:"#E4002B",secondary:"#FFFFFF",accent:"#E4002B"},independiente:{name:"Independiente",primary:"#E30613",secondary:"#E30613",accent:"#C00010"},racing:{name:"Racing Club",primary:"#87CEEB",secondary:"#FFFFFF",accent:"#6BB6E0"},sanlorenzo:{name:"San Lorenzo",primary:"#003F87",secondary:"#ED1C24",accent:"#003F87"},velez:{name:"Vlez Sarsfield",primary:"#005EB8",secondary:"#FFFFFF",accent:"#004C9A"},newells:{name:"Newell's Old Boys",primary:"#E4002B",secondary:"#000000",accent:"#C00020"}},P6=({children:t})=>{const[e,n]=B.useState(()=>{const u=localStorage.getItem("darkMode");return u?JSON.parse(u):!1}),[r,i]=B.useState(()=>localStorage.getItem("teamTheme")||"default");B.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),B.useEffect(()=>{const u=gg[r];u&&(document.documentElement.style.setProperty("--color-primary",u.primary),document.documentElement.style.setProperty("--color-secondary",u.secondary),document.documentElement.style.setProperty("--color-accent",u.accent)),localStorage.setItem("teamTheme",r)},[r]);const c={isDarkMode:e,toggleDarkMode:()=>{n(u=>!u)},currentTeamTheme:r,changeTeamTheme:u=>{gg[u]&&i(u)},availableThemes:gg};return d.jsx(fP.Provider,{value:c,children:t})},N6=()=>{const t=B.useContext(fP);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t};function Il(){const{user:t,signOut:e}=Tr(),{isDarkMode:n,toggleDarkMode:r,currentTeamTheme:i,changeTeamTheme:s,availableThemes:a}=N6(),c=Al(),[u,m]=B.useState(!1),g=x=>c.pathname===x,_=async()=>{try{await e()}catch(x){console.error("Error al cerrar sesin:",x)}};return t?d.jsxs(d.Fragment,{children:[d.jsx("header",{className:"sticky top-0 z-40 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:d.jsx("div",{className:"container-app",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(wt,{to:"/",className:"flex items-center gap-2",children:[d.jsx("img",{src:"/logo-chico-picadito.png.jpg?v=3",alt:"Logo",className:"w-10 h-10 rounded-lg object-cover"}),d.jsx("span",{className:"hidden sm:block text-2xl font-bold text-black",style:{fontFamily:'"Righteous", cursive'},children:"Picadito App"})]}),d.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[d.jsxs(wt,{to:"/",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${g("/")?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsx(VT,{className:"w-5 h-5"}),d.jsx("span",{children:"Inicio"})]}),d.jsxs(wt,{to:"/partidos",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${g("/partidos")?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsx(Mn,{className:"w-5 h-5"}),d.jsx("span",{children:"Partidos"})]}),d.jsxs(wt,{to:"/mapa",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${g("/mapa")?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsx(UT,{className:"w-5 h-5"}),d.jsx("span",{children:"Mapa"})]}),d.jsxs(wt,{to:"/sala-de-espera",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${g("/sala-de-espera")?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsx(bl,{className:"w-5 h-5"}),d.jsx("span",{children:"Juegos"})]}),d.jsxs(wt,{to:"/perfil",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${g("/perfil")?"bg-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.jsx(sy,{className:"w-5 h-5"}),d.jsx("span",{children:"Perfil"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:n?"Modo Claro":"Modo Oscuro",children:n?d.jsx(C6,{className:"w-5 h-5"}):d.jsx(w6,{className:"w-5 h-5"})}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>m(!u),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Tema de Equipo",children:d.jsx(E6,{className:"w-5 h-5"})}),u&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),d.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-50",children:[d.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:"Modo Hincha"}),Object.entries(a).map(([x,E])=>d.jsx("button",{onClick:()=>{s(x),m(!1)},className:`w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${i===x?"bg-gray-100 dark:bg-gray-700":""}`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:E.primary}}),d.jsx("span",{className:"text-sm",children:E.name})]})},x))]})]})]}),d.jsxs("button",{onClick:_,className:"hidden md:flex items-center gap-2 px-3 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Cerrar Sesin",children:[d.jsx(x6,{className:"w-5 h-5"}),d.jsx("span",{children:"Salir"})]})]})]})})}),d.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 safe-area-bottom",children:d.jsxs("div",{className:"grid grid-cols-5 h-16",children:[d.jsxs(wt,{to:"/",className:`flex flex-col items-center justify-center gap-1 ${g("/")?"text-primary":"text-gray-600 dark:text-gray-400"}`,children:[d.jsx(VT,{className:"w-6 h-6"}),d.jsx("span",{className:"text-xs",children:"Inicio"})]}),d.jsxs(wt,{to:"/partidos",className:`flex flex-col items-center justify-center gap-1 ${g("/partidos")?"text-primary":"text-gray-600 dark:text-gray-400"}`,children:[d.jsx(Mn,{className:"w-6 h-6"}),d.jsx("span",{className:"text-xs",children:"Partidos"})]}),d.jsxs(wt,{to:"/mapa",className:`flex flex-col items-center justify-center gap-1 ${g("/mapa")?"text-primary":"text-gray-600 dark:text-gray-400"}`,children:[d.jsx(UT,{className:"w-6 h-6"}),d.jsx("span",{className:"text-xs",children:"Mapa"})]}),d.jsxs(wt,{to:"/sala-de-espera",className:`flex flex-col items-center justify-center gap-1 ${g("/sala-de-espera")?"text-primary":"text-gray-600 dark:text-gray-400"}`,children:[d.jsx(bl,{className:"w-6 h-6"}),d.jsx("span",{className:"text-xs",children:"Juegos"})]}),d.jsxs(wt,{to:"/perfil",className:`flex flex-col items-center justify-center gap-1 ${g("/perfil")?"text-primary":"text-gray-600 dark:text-gray-400"}`,children:[d.jsx(sy,{className:"w-6 h-6"}),d.jsx("span",{className:"text-xs",children:"Perfil"})]})]})})]}):null}function fu({size:t="medium",className:e=""}){const n={small:"min-h-[90px]",medium:"min-h-[120px]",large:"min-h-[250px]"};return d.jsx("div",{className:`ad-slot ${n[t]} ${e}`,children:d.jsx("span",{children:"Espacio Publicitario"})})}function A6(){var r;const{userProfile:t}=Tr(),e=[{id:1,tipo:"Cancha de 5",fecha:"Hoy, 18:00",lugar:"Polideportivo Norte, Rosario",distancia:"2.3 km",jugadores:{actual:8,total:10},anfitrion:{nombre:"Carlos M.",confianza:95,estrellas:4.5},estado:"Faltan 2"},{id:2,tipo:"Cancha de 11",fecha:"Maana, 20:30",lugar:"Club Atltico, Palermo",distancia:"5.1 km",jugadores:{actual:18,total:22},anfitrion:{nombre:"Martn R.",confianza:88,estrellas:4.2},estado:"Faltan 4"},{id:3,tipo:"Cancha de 7",fecha:"Sbado, 10:00",lugar:"Complejo La Cancha, Caballito",distancia:"3.7 km",jugadores:{actual:10,total:14},anfitrion:{nombre:"Diego P.",confianza:100,estrellas:5},estado:"Faltan 4"}],n=[{nombre:"Juan Garca",partidos:8,posicion:1},{nombre:"Lucas Fernndez",partidos:7,posicion:2},{nombre:"Matas Silva",partidos:6,posicion:3}];return d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsxs("main",{className:"container-app py-6 pb-24 md:pb-6",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Hola, ",((r=t==null?void 0:t.displayName)==null?void 0:r.split(" ")[0])||"Futbolero","! "]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Encuentra partidos cerca tuyo o crea el tuyo propio"})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:d.jsx(xr,{className:"w-6 h-6 text-primary"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.partidosJugados)||0}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Partidos"})]})]})}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:d.jsx(el,{className:"w-6 h-6 text-yellow-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(t==null?void 0:t.estrellas)||0}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Estrellas"})]})]})}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:d.jsx(am,{className:"w-6 h-6 text-green-600"})}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(t==null?void 0:t.confianza)||100,"%"]}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Confianza"})]})]})}),d.jsx("div",{className:"card md:col-span-1 col-span-2",children:d.jsxs(wt,{to:"/partidos/crear",className:"flex items-center justify-center gap-2 h-full btn-primary",children:[d.jsx(iy,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Partido"})]})})]}),d.jsx(fu,{size:"medium",className:"mb-8"}),d.jsx(wt,{to:"/solo-queue",className:"block mb-8",children:d.jsx("div",{className:"card bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 transition-all cursor-pointer border-0",children:d.jsxs("div",{className:"flex items-center justify-between text-white",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:d.jsx(bl,{className:"w-8 h-8"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold mb-1",children:"No encontrs partido?"}),d.jsxs("p",{className:"text-white/90 text-sm",children:["Prob ",d.jsx("strong",{children:"Solo Queue"})," - El sistema te empareja con otros jugadores automticamente"]})]})]}),d.jsx("div",{className:"hidden md:block",children:d.jsx("div",{className:"btn-outline border-white text-white hover:bg-white hover:text-purple-600",children:"Probar ahora"})})]})})}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2 space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Partidos Cerca Tuyo"}),d.jsx(wt,{to:"/partidos",className:"text-primary hover:underline text-sm font-medium",children:"Ver todos"})]}),e.map(i=>d.jsxs("div",{className:"card hover:shadow-2xl transition-all cursor-pointer",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:i.tipo}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mt-1",children:[d.jsx(Tl,{className:"w-4 h-4"}),d.jsx("span",{children:i.fecha})]})]}),d.jsx("span",{className:"badge bg-primary text-white",children:i.estado})]}),d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx(Mn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary"}),d.jsx("span",{children:i.lugar}),d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto",children:i.distancia})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(xr,{className:"w-4 h-4 text-gray-500"}),d.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${i.jugadores.actual/i.jugadores.total*100}%`}})}),d.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.jugadores.actual,"/",i.jugadores.total]})]})]}),d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold text-sm",children:i.anfitrion.nombre.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i.anfitrion.nombre}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(el,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),d.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[i.anfitrion.estrellas,"  ",i.anfitrion.confianza,"% confianza"]})]})]})]}),d.jsx("button",{className:"btn-primary text-sm",children:"Unirme"})]})]},i.id)),d.jsx(fu,{size:"small"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[d.jsx(am,{className:"w-5 h-5 text-primary"}),"Top Jugadores"]}),d.jsx("div",{className:"space-y-3",children:n.map(i=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${i.posicion===1?"bg-yellow-400 text-yellow-900":i.posicion===2?"bg-gray-300 text-gray-700":"bg-orange-400 text-orange-900"}`,children:i.posicion}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i.nombre}),d.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[i.partidos," partidos esta semana"]})]})]},i.posicion))})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4",children:"Acceso Rpido"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs(wt,{to:"/agentes-libres",className:"block w-full btn-secondary text-left",children:[d.jsx(xr,{className:"w-4 h-4 inline mr-2"}),"Agentes Libres"]}),d.jsxs(wt,{to:"/mapa",className:"block w-full btn-secondary text-left",children:[d.jsx(Mn,{className:"w-4 h-4 inline mr-2"}),"Ver en Mapa"]})]})]}),d.jsx(fu,{size:"large"})]})]})]})]})}function R6({onToggleMode:t}){const{signIn:e,signInWithGoogle:n}=Tr(),r=Os(),[i,s]=B.useState(""),[a,c]=B.useState(""),[u,m]=B.useState(!1),[g,_]=B.useState(!1),[x,E]=B.useState(""),C=async M=>{M.preventDefault(),E(""),_(!0);try{await e(i,a),console.log(" Login exitoso, redirigiendo..."),r("/")}catch(b){E("Email o contrasea incorrectos"),console.error(" Error en login:",b)}finally{_(!1)}},N=async()=>{E(""),_(!0);try{console.log(" Iniciando login con Google..."),await n(),console.log(" Login con Google exitoso, redirigiendo..."),r("/")}catch(M){E("Error al iniciar sesin con Google"),console.error(" Error en Google login:",M)}finally{_(!1)}};return d.jsx("div",{className:"w-full max-w-md",children:d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[d.jsx("img",{src:"/logo-picadito.png.jpg",alt:"Logo",className:"w-24 h-24 rounded-xl object-cover"}),d.jsx("h2",{className:"text-3xl font-bold text-black",style:{fontFamily:'"Righteous", cursive'},children:"Picadito App"})]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Inicia sesin para encontrar partidos"})]}),x&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg text-sm",children:x}),d.jsxs("form",{onSubmit:C,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(H0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"email",value:i,onChange:M=>s(M.target.value),className:"input-field pl-10",placeholder:"tu@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea"}),d.jsxs("div",{className:"relative",children:[d.jsx(om,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:u?"text":"password",value:a,onChange:M=>c(M.target.value),className:"input-field pl-10 pr-10",placeholder:"",required:!0}),d.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:u?d.jsx(lP,{className:"w-5 h-5"}):d.jsx(cP,{className:"w-5 h-5"})})]})]}),d.jsx("button",{type:"submit",disabled:g,className:"btn-primary w-full",children:g?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"spinner w-5 h-5"}),"Iniciando sesin..."]}):"Iniciar Sesin"})]}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"o contina con"})})]}),d.jsxs("button",{type:"button",onClick:N,disabled:g,className:"w-full btn-secondary flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["No tienes cuenta?"," ",d.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Regstrate aqu"})]})})]})})}function L6({onToggleMode:t}){const{signUp:e,signInWithGoogle:n}=Tr(),r=Os(),[i,s]=B.useState({username:"",email:"",password:"",confirmPassword:""}),[a,c]=B.useState(!1),[u,m]=B.useState(!1),[g,_]=B.useState(""),x=N=>{s({...i,[N.target.name]:N.target.value})},E=async N=>{if(N.preventDefault(),_(""),i.password.length<6){_("La contrasea debe tener al menos 6 caracteres");return}if(i.password!==i.confirmPassword){_("Las contraseas no coinciden");return}m(!0);try{await e(i.email,i.password,i.name),console.log(" Registro exitoso, redirigiendo..."),r("/")}catch(M){M.code==="auth/email-already-in-use"?_("Este email ya est registrado"):_("Error al crear la cuenta. Intntalo de nuevo"),console.error(" Error en registro:",M)}finally{m(!1)}},C=async()=>{_(""),m(!0);try{console.log(" Iniciando registro con Google..."),await n(),console.log(" Registro con Google exitoso, redirigiendo..."),r("/")}catch(N){_("Error al registrarse con Google"),console.error(" Error en Google signup:",N)}finally{m(!1)}};return d.jsx("div",{className:"w-full max-w-md",children:d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[d.jsx("img",{src:"/logo-picadito.png.jpg",alt:"Logo",className:"w-24 h-24 rounded-xl object-cover"}),d.jsx("h2",{className:"text-3xl font-bold text-black",style:{fontFamily:'"Righteous", cursive'},children:"Picadito App"})]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"nete a la comunidad de futbolistas"})]}),g&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg text-sm",children:g}),d.jsxs("form",{onSubmit:E,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre Completo"}),d.jsxs("div",{className:"relative",children:[d.jsx(sy,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"text",name:"name",value:i.name,onChange:x,className:"input-field pl-10",placeholder:"Juan Prez",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(H0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"email",name:"email",value:i.email,onChange:x,className:"input-field pl-10",placeholder:"tu@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrasea"}),d.jsxs("div",{className:"relative",children:[d.jsx(om,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:a?"text":"password",name:"password",value:i.password,onChange:x,className:"input-field pl-10 pr-10",placeholder:"Mnimo 6 caracteres",required:!0}),d.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a?d.jsx(lP,{className:"w-5 h-5"}):d.jsx(cP,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirmar Contrasea"}),d.jsxs("div",{className:"relative",children:[d.jsx(om,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:a?"text":"password",name:"confirmPassword",value:i.confirmPassword,onChange:x,className:"input-field pl-10",placeholder:"Repite tu contrasea",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full",children:u?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"spinner w-5 h-5"}),"Creando cuenta..."]}):"Crear Cuenta"})]}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"o regstrate con"})})]}),d.jsxs("button",{type:"button",onClick:C,disabled:u,className:"w-full btn-secondary flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Ya tienes cuenta?"," ",d.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Inicia sesin aqu"})]})})]})})}function M6(){const[t,e]=B.useState("login");return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-grass-pattern px-4 py-8",children:d.jsx("div",{className:"w-full max-w-md fade-in",children:t==="login"?d.jsx(R6,{onToggleMode:()=>e("register")}):d.jsx(L6,{onToggleMode:()=>e("login")})})})}function O6(){var M;const{user:t,userProfile:e,updateUserProfile:n}=Tr(),[r,i]=B.useState(!1),[s,a]=B.useState(!1),[c,u]=B.useState({type:"",text:""}),[m,g]=B.useState({edad:(e==null?void 0:e.edad)||"",posicion:(e==null?void 0:e.posicion)||"",zona:(e==null?void 0:e.zona)||""}),_=["Arquero","Defensor","Mediocampista","Delantero","Volante"],x=async()=>{a(!0),u({type:"",text:""});try{console.log(" Intentando guardar:",m),await n(m),u({type:"success",text:" Perfil guardado exitosamente!"}),i(!1),setTimeout(()=>u({type:"",text:""}),3e3)}catch(b){console.error(" Error al actualizar perfil:",b),u({type:"error",text:` Error: ${b.message||"No se pudo guardar. Revisa la consola."}`})}finally{a(!1)}},E=(e==null?void 0:e.confianza)||100,C=(e==null?void 0:e.estrellas)||0,N=(e==null?void 0:e.partidosJugados)||0;return d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsx("main",{className:"container-app py-6 pb-24 md:pb-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"card mb-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[d.jsxs("div",{className:"relative",children:[t!=null&&t.photoURL?d.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-24 h-24 rounded-full object-cover border-4 border-primary"}):d.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-white text-3xl font-bold",children:((M=e==null?void 0:e.displayName)==null?void 0:M.charAt(0))||"U"}),d.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg",children:d.jsx(po,{className:"w-5 h-5 text-yellow-500"})})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:(e==null?void 0:e.displayName)||"Usuario"}),d.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-2 mb-3",children:[d.jsx(H0,{className:"w-4 h-4"}),t==null?void 0:t.email]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsxs("div",{className:"badge bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:[d.jsx(am,{className:"w-3 h-3 mr-1"}),E,"% Confianza"]}),d.jsxs("div",{className:"badge bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[d.jsx(el,{className:"w-3 h-3 mr-1"}),C.toFixed(1)," Estrellas"]}),d.jsxs("div",{className:"badge bg-primary/10 text-primary",children:[d.jsx(po,{className:"w-3 h-3 mr-1"}),N," Partidos"]})]})]}),d.jsx("button",{onClick:()=>i(!r),className:r?"btn-secondary":"btn-primary",children:r?"Cancelar":"Editar Perfil"})]})}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2 space-y-6",children:[r&&d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Editar Informacin"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Edad"}),d.jsx("input",{type:"number",value:m.edad,onChange:b=>g({...m,edad:b.target.value}),className:"input-field",placeholder:"Ej: 25",min:"16",max:"80"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Posicin Preferida"}),d.jsxs("select",{value:m.posicion,onChange:b=>g({...m,posicion:b.target.value}),className:"input-field",children:[d.jsx("option",{value:"",children:"Selecciona una posicin"}),_.map(b=>d.jsx("option",{value:b,children:b},b))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Zona de Residencia"}),d.jsx("input",{type:"text",value:m.zona,onChange:b=>g({...m,zona:b.target.value}),className:"input-field",placeholder:"Ej: Palermo, CABA"})]}),c.text&&d.jsx("div",{className:`p-3 rounded-lg mb-4 ${c.type==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:c.text}),d.jsx("button",{onClick:x,disabled:s,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:s?" Guardando...":" Guardar Cambios"})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Informacin Personal"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx(fp,{className:"w-5 h-5 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Edad"}),d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(e==null?void 0:e.edad)||"No especificada"})]})]}),d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx(m6,{className:"w-5 h-5 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Posicin"}),d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(e==null?void 0:e.posicion)||"No especificada"})]})]}),d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx(Mn,{className:"w-5 h-5 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Zona"}),d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(e==null?void 0:e.zona)||"No especificada"})]})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Historial Reciente"}),d.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[d.jsx(po,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"An no has jugado ningn partido"}),d.jsx("p",{className:"text-sm mt-1",children:"nete a uno para empezar tu historial!"})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[d.jsx(am,{className:"w-5 h-5 text-green-600"}),"Nivel de Confianza"]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[d.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[d.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-200 dark:text-gray-700"}),d.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:`${2*Math.PI*56}`,strokeDashoffset:`${2*Math.PI*56*(1-E/100)}`,className:"text-green-600 transition-all duration-500"})]}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsxs("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[E,"%"]})})]}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(e==null?void 0:e.partidosAsistidos)||0," de ",(e==null?void 0:e.partidosConfirmados)||0," confirmados"]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[d.jsx(el,{className:"w-5 h-5 text-yellow-500"}),"Calificacin"]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:[1,2,3,4,5].map(b=>d.jsx(el,{className:`w-6 h-6 ${b<=C?"text-yellow-500 fill-yellow-500":"text-gray-300 dark:text-gray-600"}`},b))}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:C.toFixed(1)}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(e==null?void 0:e.totalCalificaciones)||0," calificaciones"]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[d.jsx(po,{className:"w-5 h-5 text-primary"}),"Logros"]}),d.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:d.jsx("p",{className:"text-sm",children:"Juega ms partidos para desbloquear logros"})})]})]})]})]})})]})}const j6="modulepreload",D6=function(t){return"/picadito-app/"+t},zT={},$0=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=D6(u),u in zT)return;zT[u]=!0;const m=u.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${g}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":j6,m||(_.as="script"),_.crossOrigin="",_.href=u,c&&_.setAttribute("nonce",c),document.head.appendChild(_),m)return new Promise((x,E)=>{_.addEventListener("load",x),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},F6=async(t,e,n,r,i=null)=>{try{const s=rm(im,`chats/${t}/mensajes`);await ey(s,{usuarioId:e,usuarioNombre:n,usuarioFoto:i,mensaje:r.trim(),timestamp:ny(),leido:!1});const a=rm(im,`chats/${t}/metadata`);return await ey(a,{ultimoMensaje:r.trim().substring(0,100),ultimoUsuario:n,ultimaActividad:ny()}),!0}catch(s){throw console.error("Error al enviar mensaje:",s),s}},V6=(t,e,n=50)=>{const r=rm(im,`chats/${t}/mensajes`),i=X5(r,Y5("timestamp"),Z5(n));return $5(i,s=>{const a=[];s.forEach(c=>{a.push({id:c.key,...c.val()})}),e(a)}),()=>G5(i)},G0=async(t,e)=>{try{const n=rm(im,`chats/${t}/mensajes`);return await ey(n,{usuarioId:"sistema",usuarioNombre:"Picadito App",usuarioFoto:null,mensaje:e.trim(),timestamp:ny(),leido:!0,esSistema:!0}),!0}catch(n){return console.error("Error al enviar mensaje del sistema:",n),!1}},U6=async(t,e)=>{try{const n={...e,anfitrionId:t,jugadores:[t],jugadoresAceptados:[t],postulantes:[],listaEspera:[],estado:"abierto",createdAt:Ni(),updatedAt:Ni()},r=await rp(Us(rn,"partidos"),n);return await G0(r.id,` Partido creado! Bienvenidos a este ${e.nombreFormato}`),{id:r.id,...n}}catch(n){throw console.error("Error al crear partido:",n),n}},mP=async()=>{try{const{getDocs:t,query:e,where:n,orderBy:r}=await $0(async()=>{const{getDocs:a,query:c,where:u,orderBy:m}=await Promise.resolve().then(()=>c0);return{getDocs:a,query:c,where:u,orderBy:m}},void 0),i=e(Us(rn,"partidos"),n("estado","==","abierto"),r("fecha","asc"));return(await t(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){throw console.error("Error al obtener partidos:",t),t}},z6=async(t,e)=>{try{const{doc:n,updateDoc:r,arrayUnion:i}=await $0(async()=>{const{doc:a,updateDoc:c,arrayUnion:u}=await Promise.resolve().then(()=>c0);return{doc:a,updateDoc:c,arrayUnion:u}},void 0),s=n(rn,"partidos",t);await r(s,{postulantes:i(e),updatedAt:Ni()})}catch(n){throw console.error("Error al postularse:",n),n}},B6=async(t,e,n,r="Un jugador")=>{try{const{doc:i,updateDoc:s,arrayUnion:a,arrayRemove:c,getDoc:u}=await $0(async()=>{const{doc:g,updateDoc:_,arrayUnion:x,arrayRemove:E,getDoc:C}=await Promise.resolve().then(()=>c0);return{doc:g,updateDoc:_,arrayUnion:x,arrayRemove:E,getDoc:C}},void 0),m=i(rn,"partidos",t);n==="aceptar"?(await s(m,{jugadoresAceptados:a(e),jugadores:a(e),postulantes:c(e),updatedAt:Ni()}),await G0(t,` ${r} se uni al partido`)):await s(m,{postulantes:c(e),updatedAt:Ni()})}catch(i){throw console.error("Error al gestionar postulante:",i),i}};var oy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(KP,function(n){var r="1.9.4";function i(o){var l,f,p,v;for(f=1,p=arguments.length;f<p;f++){v=arguments[f];for(l in v)o[l]=v[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var f=Array.prototype.slice;if(o.bind)return o.bind.apply(o,f.call(arguments,1));var p=f.call(arguments,2);return function(){return o.apply(l,p.length?p.concat(f.call(arguments)):arguments)}}var c=0;function u(o){return"_leaflet_id"in o||(o._leaflet_id=++c),o._leaflet_id}function m(o,l,f){var p,v,T,F;return F=function(){p=!1,v&&(T.apply(f,v),v=!1)},T=function(){p?v=arguments:(o.apply(f,arguments),setTimeout(F,l),p=!0)},T}function g(o,l,f){var p=l[1],v=l[0],T=p-v;return o===p&&f?o:((o-v)%T+T)%T+v}function _(){return!1}function x(o,l){if(l===!1)return o;var f=Math.pow(10,l===void 0?6:l);return Math.round(o*f)/f}function E(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function C(o){return E(o).split(/\s+/)}function N(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var f in l)o.options[f]=l[f];return o.options}function M(o,l,f){var p=[];for(var v in o)p.push(encodeURIComponent(f?v.toUpperCase():v)+"="+encodeURIComponent(o[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function I(o,l){return o.replace(b,function(f,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+f);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function O(o,l){for(var f=0;f<o.length;f++)if(o[f]===l)return f;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var A=0;function P(o){var l=+new Date,f=Math.max(0,16-(l-A));return A=l+f,window.setTimeout(o,f)}var R=window.requestAnimationFrame||H("RequestAnimationFrame")||P,j=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function V(o,l,f){if(f&&R===P)o.call(l);else return R.call(window,a(o,l))}function U(o){o&&j.call(window,o)}var D={__proto__:null,extend:i,create:s,bind:a,get lastId(){return c},stamp:u,throttle:m,wrapNum:g,falseFn:_,formatNum:x,trim:E,splitWords:C,setOptions:N,getParamString:M,template:I,isArray:S,indexOf:O,emptyImageUrl:z,requestFn:R,cancelFn:j,requestAnimFrame:V,cancelAnimFrame:U};function Qe(){}Qe.extend=function(o){var l=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=l.__super__=this.prototype,p=s(f);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return o.statics&&i(l,o.statics),o.includes&&(Dn(o.includes),i.apply(null,[p].concat(o.includes))),i(p,o),delete p.statics,delete p.includes,p.options&&(p.options=f.options?s(f.options):{},i(p.options,o.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,F=p._initHooks.length;T<F;T++)p._initHooks[T].call(this)}},l},Qe.include=function(o){var l=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},Qe.mergeOptions=function(o){return i(this.prototype.options,o),this},Qe.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),f=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Dn(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=S(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ut={on:function(o,l,f){if(typeof o=="object")for(var p in o)this._on(p,o[p],l);else{o=C(o);for(var v=0,T=o.length;v<T;v++)this._on(o[v],l,f)}return this},off:function(o,l,f){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var p in o)this._off(p,o[p],l);else{o=C(o);for(var v=arguments.length===1,T=0,F=o.length;T<F;T++)v?this._off(o[T]):this._off(o[T],l,f)}return this},_on:function(o,l,f,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,f)===!1){f===this&&(f=void 0);var v={fn:l,ctx:f};p&&(v.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(v)}},_off:function(o,l,f){var p,v,T;if(this._events&&(p=this._events[o],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,T=p.length;v<T;v++)p[v].fn=_;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(o,l,f);if(F!==!1){var q=p[F];this._firingCount&&(q.fn=_,this._events[o]=p=p.slice()),p.splice(F,1)}}},fire:function(o,l,f){if(!this.listens(o,f))return this;var p=i({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[o];if(v){this._firingCount=this._firingCount+1||1;for(var T=0,F=v.length;T<F;T++){var q=v[T],$=q.fn;q.once&&this.off(o,$,q.ctx),$.call(q.ctx||this,p)}this._firingCount--}}return f&&this._propagateEvent(p),this},listens:function(o,l,f,p){typeof o!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,f=void 0);var T=this._events&&this._events[o];if(T&&T.length&&this._listens(o,v,f)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(o,l,f,p))return!0}return!1},_listens:function(o,l,f){if(!this._events)return!1;var p=this._events[o]||[];if(!l)return!!p.length;f===this&&(f=void 0);for(var v=0,T=p.length;v<T;v++)if(p[v].fn===l&&p[v].ctx===f)return v;return!1},once:function(o,l,f){if(typeof o=="object")for(var p in o)this._on(p,o[p],l,!0);else{o=C(o);for(var v=0,T=o.length;v<T;v++)this._on(o[v],l,f,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[u(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[u(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};ut.addEventListener=ut.on,ut.removeEventListener=ut.clearAllEventListeners=ut.off,ut.addOneTimeEventListener=ut.once,ut.fireEvent=ut.fire,ut.hasEventListeners=ut.listens;var Nt=Qe.extend(ut);function K(o,l,f){this.x=f?Math.round(o):o,this.y=f?Math.round(l):l}var ne=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(o){return this.clone()._add(Y(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Y(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new K(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new K(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(o){o=Y(o);var l=o.x-this.x,f=o.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(o){return o=Y(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Y(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Y(o,l,f){return o instanceof K?o:S(o)?new K(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new K(o.x,o.y):new K(o,l,f)}function ce(o,l){if(o)for(var f=l?[o,l]:o,p=0,v=f.length;p<v;p++)this.extend(f[p])}ce.prototype={extend:function(o){var l,f;if(!o)return this;if(o instanceof K||typeof o[0]=="number"||"x"in o)l=f=Y(o);else if(o=xe(o),l=o.min,f=o.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(o){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,f;return typeof o[0]=="number"||o instanceof K?o=Y(o):o=xe(o),o instanceof ce?(l=o.min,f=o.max):l=f=o,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(o){o=xe(o);var l=this.min,f=this.max,p=o.min,v=o.max,T=v.x>=l.x&&p.x<=f.x,F=v.y>=l.y&&p.y<=f.y;return T&&F},overlaps:function(o){o=xe(o);var l=this.min,f=this.max,p=o.min,v=o.max,T=v.x>l.x&&p.x<f.x,F=v.y>l.y&&p.y<f.y;return T&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,f=this.max,p=Math.abs(l.x-f.x)*o,v=Math.abs(l.y-f.y)*o;return xe(Y(l.x-p,l.y-v),Y(f.x+p,f.y+v))},equals:function(o){return o?(o=xe(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function xe(o,l){return!o||o instanceof ce?o:new ce(o,l)}function Pe(o,l){if(o)for(var f=l?[o,l]:o,p=0,v=f.length;p<v;p++)this.extend(f[p])}Pe.prototype={extend:function(o){var l=this._southWest,f=this._northEast,p,v;if(o instanceof Ee)p=o,v=o;else if(o instanceof Pe){if(p=o._southWest,v=o._northEast,!p||!v)return this}else return o?this.extend(ge(o)||Fe(o)):this;return!l&&!f?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),f.lat=Math.max(v.lat,f.lat),f.lng=Math.max(v.lng,f.lng)),this},pad:function(o){var l=this._southWest,f=this._northEast,p=Math.abs(l.lat-f.lat)*o,v=Math.abs(l.lng-f.lng)*o;return new Pe(new Ee(l.lat-p,l.lng-v),new Ee(f.lat+p,f.lng+v))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ee||"lat"in o?o=ge(o):o=Fe(o);var l=this._southWest,f=this._northEast,p,v;return o instanceof Pe?(p=o.getSouthWest(),v=o.getNorthEast()):p=v=o,p.lat>=l.lat&&v.lat<=f.lat&&p.lng>=l.lng&&v.lng<=f.lng},intersects:function(o){o=Fe(o);var l=this._southWest,f=this._northEast,p=o.getSouthWest(),v=o.getNorthEast(),T=v.lat>=l.lat&&p.lat<=f.lat,F=v.lng>=l.lng&&p.lng<=f.lng;return T&&F},overlaps:function(o){o=Fe(o);var l=this._southWest,f=this._northEast,p=o.getSouthWest(),v=o.getNorthEast(),T=v.lat>l.lat&&p.lat<f.lat,F=v.lng>l.lng&&p.lng<f.lng;return T&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=Fe(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(o,l){return o instanceof Pe?o:new Pe(o,l)}function Ee(o,l,f){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,f!==void 0&&(this.alt=+f)}Ee.prototype={equals:function(o,l){if(!o)return!1;o=ge(o);var f=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return f<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+x(this.lat,o)+", "+x(this.lng,o)+")"},distanceTo:function(o){return Ir.distance(this,ge(o))},wrap:function(){return Ir.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,f=l/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ge(o,l,f){return o instanceof Ee?o:S(o)&&typeof o[0]!="object"?o.length===3?new Ee(o[0],o[1],o[2]):o.length===2?new Ee(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ee(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new Ee(o,l,f)}var Ct={latLngToPoint:function(o,l){var f=this.projection.project(o),p=this.scale(l);return this.transformation._transform(f,p)},pointToLatLng:function(o,l){var f=this.scale(l),p=this.transformation.untransform(o,f);return this.projection.unproject(p)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(o),p=this.transformation.transform(l.min,f),v=this.transformation.transform(l.max,f);return new ce(p,v)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?g(o.lng,this.wrapLng,!0):o.lng,f=this.wrapLat?g(o.lat,this.wrapLat,!0):o.lat,p=o.alt;return new Ee(f,l,p)},wrapLatLngBounds:function(o){var l=o.getCenter(),f=this.wrapLatLng(l),p=l.lat-f.lat,v=l.lng-f.lng;if(p===0&&v===0)return o;var T=o.getSouthWest(),F=o.getNorthEast(),q=new Ee(T.lat-p,T.lng-v),$=new Ee(F.lat-p,F.lng-v);return new Pe(q,$)}},Ir=i({},Ct,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var f=Math.PI/180,p=o.lat*f,v=l.lat*f,T=Math.sin((l.lat-o.lat)*f/2),F=Math.sin((l.lng-o.lng)*f/2),q=T*T+Math.cos(p)*Math.cos(v)*F*F,$=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*$}}),bh=6378137,Di={R:bh,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,f=this.MAX_LATITUDE,p=Math.max(Math.min(f,o.lat),-f),v=Math.sin(p*l);return new K(this.R*o.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(o){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=bh*Math.PI;return new ce([-o,-o],[o,o])}()};function Fi(o,l,f,p){if(S(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=f,this._d=p}Fi.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new K((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Gr(o,l,f,p){return new Fi(o,l,f,p)}var Bs=i({},Ir,{code:"EPSG:3857",projection:Di,transformation:function(){var o=.5/(Math.PI*Di.R);return Gr(o,.5,-o,.5)}()}),Bl=i({},Bs,{code:"EPSG:900913"});function qo(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Wl(o,l){var f="",p,v,T,F,q,$;for(p=0,T=o.length;p<T;p++){for(q=o[p],v=0,F=q.length;v<F;v++)$=q[v],f+=(v?"L":"M")+$.x+" "+$.y;f+=l?ae.svg?"z":"x":""}return f||"M0 0"}var ql=document.documentElement.style,Ho="ActiveXObject"in window,Ih=Ho&&!document.addEventListener,$o="msLaunchUri"in navigator&&!("documentMode"in document),Go=Fn("webkit"),Ch=Fn("android"),Ko=Fn("android 2")||Fn("android 3"),Hl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kh=Ch&&Fn("Google")&&Hl<537&&!("AudioNode"in window),_t=!!window.opera,At=!$o&&Fn("chrome"),Ws=Fn("gecko")&&!Go&&!_t&&!Ho,Sh=!At&&Fn("safari"),$l=Fn("phantom"),Ph="OTransition"in ql,qs=navigator.platform.indexOf("Win")===0,Gl=Ho&&"transition"in ql,Zo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ko,Qo="MozPerspective"in ql,pp=!window.L_DISABLE_3D&&(Gl||Zo||Qo)&&!Ph&&!$l,Hs=typeof orientation<"u"||Fn("mobile"),Kl=Hs&&Go,Nh=Hs&&Zo,Zl=!window.PointerEvent&&window.MSPointerEvent,Vi=!!(window.PointerEvent||Zl),Yo="ontouchstart"in window||!!window.TouchEvent,Ql=!window.L_NO_TOUCH&&(Yo||Vi),Kr=Hs&&_t,Ah=Hs&&Ws,Xo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Rh=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return o}(),$s=function(){return!!document.createElement("canvas").getContext}(),Jo=!!(document.createElementNS&&qo("svg").createSVGRect),Bt=!!Jo&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Lh=!Jo&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Gs=navigator.platform.indexOf("Mac")===0,Ks=navigator.platform.indexOf("Linux")===0;function Fn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ae={ie:Ho,ielt9:Ih,edge:$o,webkit:Go,android:Ch,android23:Ko,androidStock:kh,opera:_t,chrome:At,gecko:Ws,safari:Sh,phantom:$l,opera12:Ph,win:qs,ie3d:Gl,webkit3d:Zo,gecko3d:Qo,any3d:pp,mobile:Hs,mobileWebkit:Kl,mobileWebkit3d:Nh,msPointer:Zl,pointer:Vi,touch:Ql,touchNative:Yo,mobileOpera:Kr,mobileGecko:Ah,retina:Xo,passiveEvents:Rh,canvas:$s,svg:Jo,vml:Lh,inlineSvg:Bt,mac:Gs,linux:Ks},Zr=ae.msPointer?"MSPointerDown":"pointerdown",Mh=ae.msPointer?"MSPointerMove":"pointermove",Oh=ae.msPointer?"MSPointerUp":"pointerup",Zs=ae.msPointer?"MSPointerCancel":"pointercancel",ea={touchstart:Zr,touchmove:Mh,touchend:Oh,touchcancel:Zs},ta={touchstart:ra,touchmove:na,touchend:na,touchcancel:na},tr={},nr=!1;function jh(o,l,f){return l==="touchstart"&&Fh(),ta[l]?(f=ta[l].bind(this,f),o.addEventListener(ea[l],f,!1),f):(console.warn("wrong event specified:",l),_)}function Dh(o,l,f){if(!ea[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(ea[l],f,!1)}function Yl(o){tr[o.pointerId]=o}function Xl(o){tr[o.pointerId]&&(tr[o.pointerId]=o)}function Jl(o){delete tr[o.pointerId]}function Fh(){nr||(document.addEventListener(Zr,Yl,!0),document.addEventListener(Mh,Xl,!0),document.addEventListener(Oh,Jl,!0),document.addEventListener(Zs,Jl,!0),nr=!0)}function na(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in tr)l.touches.push(tr[f]);l.changedTouches=[l],o(l)}}function ra(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&it(l),na(o,l)}function Vh(o){var l={},f,p;for(p in o)f=o[p],l[p]=f&&f.bind?f.bind(o):f;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ec=200;function Qs(o,l){o.addEventListener("dblclick",l);var f=0,p;function v(T){if(T.detail!==1){p=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var F=dc(T);if(!(F.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!F.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var q=Date.now();q-f<=ec?(p++,p===2&&l(Vh(T))):p=1,f=q}}}return o.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Qr(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Ys=Xr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xs=Xr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tc=Xs==="webkitTransition"||Xs==="OTransition"?Xs+"End":"transitionend";function nc(o){return typeof o=="string"?document.getElementById(o):o}function Ui(o,l){var f=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(o,null);f=p?p[l]:null}return f==="auto"?null:f}function Ne(o,l,f){var p=document.createElement(o);return p.className=l||"",f&&f.appendChild(p),p}function Ge(o){var l=o.parentNode;l&&l.removeChild(o)}function Js(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Yr(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function zi(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function rc(o,l){if(o.classList!==void 0)return o.classList.contains(l);var f=Vn(o);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}function ve(o,l){if(o.classList!==void 0)for(var f=C(l),p=0,v=f.length;p<v;p++)o.classList.add(f[p]);else if(!rc(o,l)){var T=Vn(o);ic(o,(T?T+" ":"")+l)}}function tt(o,l){o.classList!==void 0?o.classList.remove(l):ic(o,E((" "+Vn(o)+" ").replace(" "+l+" "," ")))}function ic(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Vn(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function ht(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&ia(o,l)}function ia(o,l){var f=!1,p="DXImageTransform.Microsoft.Alpha";try{f=o.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):o.style.filter+=" progid:"+p+"(opacity="+l+")"}function Xr(o){for(var l=document.documentElement.style,f=0;f<o.length;f++)if(o[f]in l)return o[f];return!1}function Cr(o,l,f){var p=l||new K(0,0);o.style[Ys]=(ae.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(f?" scale("+f+")":"")}function me(o,l){o._leaflet_pos=l,ae.any3d?Cr(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function Un(o){return o._leaflet_pos||new K(0,0)}var rr,ir,sc;if("onselectstart"in document)rr=function(){ue(window,"selectstart",it)},ir=function(){We(window,"selectstart",it)};else{var Bi=Xr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rr=function(){if(Bi){var o=document.documentElement.style;sc=o[Bi],o[Bi]="none"}},ir=function(){Bi&&(document.documentElement.style[Bi]=sc,sc=void 0)}}function oc(){ue(window,"dragstart",it)}function ac(){We(window,"dragstart",it)}var sa,lc;function Jr(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Cn(),sa=o,lc=o.style.outlineStyle,o.style.outlineStyle="none",ue(window,"keydown",Cn))}function Cn(){sa&&(sa.style.outlineStyle=lc,sa=void 0,lc=void 0,We(window,"keydown",Cn))}function cc(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function oa(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var Uh={__proto__:null,TRANSFORM:Ys,TRANSITION:Xs,TRANSITION_END:tc,get:nc,getStyle:Ui,create:Ne,remove:Ge,empty:Js,toFront:Yr,toBack:zi,hasClass:rc,addClass:ve,removeClass:tt,setClass:ic,getClass:Vn,setOpacity:ht,testProp:Xr,setTransform:Cr,setPosition:me,getPosition:Un,get disableTextSelection(){return rr},get enableTextSelection(){return ir},disableImageDrag:oc,enableImageDrag:ac,preventOutline:Jr,restoreOutline:Cn,getSizedParentNode:cc,getScale:oa};function ue(o,l,f,p){if(l&&typeof l=="object")for(var v in l)uc(o,v,l[v],f);else{l=C(l);for(var T=0,F=l.length;T<F;T++)uc(o,l[T],f,p)}return this}var zn="_leaflet_events";function We(o,l,f,p){if(arguments.length===1)zh(o),delete o[zn];else if(l&&typeof l=="object")for(var v in l)hc(o,v,l[v],f);else if(l=C(l),arguments.length===2)zh(o,function(q){return O(l,q)!==-1});else for(var T=0,F=l.length;T<F;T++)hc(o,l[T],f,p);return this}function zh(o,l){for(var f in o[zn]){var p=f.split(/\d/)[0];(!l||l(p))&&hc(o,p,null,null,f)}}var Bn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function uc(o,l,f,p){var v=l+u(f)+(p?"_"+u(p):"");if(o[zn]&&o[zn][v])return this;var T=function(q){return f.call(p||o,q||window.event)},F=T;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?T=jh(o,l,T):ae.touch&&l==="dblclick"?T=Qs(o,T):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(Bn[l]||l,T,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(T=function(q){q=q||window.event,fc(o,q)&&F(q)},o.addEventListener(Bn[l],T,!1)):o.addEventListener(l,F,!1):o.attachEvent("on"+l,T),o[zn]=o[zn]||{},o[zn][v]=T}function hc(o,l,f,p,v){v=v||l+u(f)+(p?"_"+u(p):"");var T=o[zn]&&o[zn][v];if(!T)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?Dh(o,l,T):ae.touch&&l==="dblclick"?Qr(o,T):"removeEventListener"in o?o.removeEventListener(Bn[l]||l,T,!1):o.detachEvent("on"+l,T),o[zn][v]=null}function Wn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Wi(o){return uc(o,"wheel",Wn),this}function qi(o){return ue(o,"mousedown touchstart dblclick contextmenu",Wn),o._leaflet_disable_click=!0,this}function it(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function kn(o){return it(o),Wn(o),this}function dc(o){if(o.composedPath)return o.composedPath();for(var l=[],f=o.target;f;)l.push(f),f=f.parentNode;return l}function aa(o,l){if(!l)return new K(o.clientX,o.clientY);var f=oa(l),p=f.boundingClientRect;return new K((o.clientX-p.left)/f.x-l.clientLeft,(o.clientY-p.top)/f.y-l.clientTop)}var nt=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bh(o){return ae.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/nt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function fc(o,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==o;)f=f.parentNode}catch{return!1}return f!==o}var Wh={__proto__:null,on:ue,off:We,stopPropagation:Wn,disableScrollPropagation:Wi,disableClickPropagation:qi,preventDefault:it,stop:kn,getPropagationPath:dc,getMousePosition:aa,getWheelDelta:Bh,isExternalTarget:fc,addListener:ue,removeListener:We},mc=Nt.extend({run:function(o,l,f,p){this.stop(),this._el=o,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Un(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var f=this._startPos.add(this._offset.multiplyBy(o));l&&f._round(),me(this._el,f),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),ke=Nt.extend({options:{crs:Bs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=N(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ge(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xs&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ue(this._proxy,tc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(ge(o),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=i({animate:f.animate},f.zoom),f.pan=i({animate:f.animate,duration:f.duration},f.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,f.zoom):this._tryAnimatedPan(o,f.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,f){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),T=o instanceof K?o:this.latLngToContainerPoint(o),F=T.subtract(v).multiplyBy(1-1/p),q=this.containerPointToLatLng(v.add(F));return this.setView(q,l,{zoom:f})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():Fe(o);var f=Y(l.paddingTopLeft||l.padding||[0,0]),p=Y(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(o,!1,f.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:o.getCenter(),zoom:v};var T=p.subtract(f).divideBy(2),F=this.project(o.getSouthWest(),v),q=this.project(o.getNorthEast(),v),$=this.unproject(F.add(q).divideBy(2).add(T),v);return{center:$,zoom:v}},fitBounds:function(o,l){if(o=Fe(o),!o.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(o,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=Y(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,f){if(f=f||{},f.animate===!1||!ae.any3d)return this.setView(o,l,f);this._stop();var p=this.project(this.getCenter()),v=this.project(o),T=this.getSize(),F=this._zoom;o=ge(o),l=l===void 0?F:l;var q=Math.max(T.x,T.y),$=q*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,re=1.42,he=re*re;function Te(vt){var sd=vt?-1:1,WP=vt?$:q,qP=$*$-q*q+sd*he*he*Q*Q,HP=2*WP*he*Q,Ep=qP/HP,px=Math.sqrt(Ep*Ep+1)-Ep,$P=px<1e-9?-18:Math.log(px);return $P}function ln(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function Lt(vt){return(Math.exp(vt)+Math.exp(-vt))/2}function Hn(vt){return ln(vt)/Lt(vt)}var pn=Te(0);function xa(vt){return q*(Lt(pn)/Lt(pn+re*vt))}function VP(vt){return q*(Lt(pn)*Hn(pn+re*vt)-ln(pn))/he}function UP(vt){return 1-Math.pow(1-vt,1.5)}var zP=Date.now(),fx=(Te(1)-pn)/re,BP=f.duration?1e3*f.duration:1e3*fx*.8;function mx(){var vt=(Date.now()-zP)/BP,sd=UP(vt)*fx;vt<=1?(this._flyToFrame=V(mx,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(VP(sd)/Q)),F),this.getScaleZoom(q/xa(sd),F),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),mx.call(this),this},flyToBounds:function(o,l){var f=this._getBoundsCenterZoom(o,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(o){return o=Fe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var f=this.getCenter(),p=this._limitCenter(f,this._zoom,Fe(o));return f.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var f=Y(l.paddingTopLeft||l.padding||[0,0]),p=Y(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),T=this.project(o),F=this.getPixelBounds(),q=xe([F.min.add(f),F.max.subtract(p)]),$=q.getSize();if(!q.contains(T)){this._enforcingBounds=!0;var Q=T.subtract(q.getCenter()),re=q.extend(T).getSize().subtract($);v.x+=Q.x<0?-re.x:re.x,v.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),p=l.divideBy(2).round(),v=f.divideBy(2).round(),T=p.subtract(v);return!T.x&&!T.y?this:(o.animate&&o.pan?this.panBy(T):(o.pan&&this._rawPanBy(T),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),f=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,o):navigator.geolocation.getCurrentPosition(l,f,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,f=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,f=o.coords.longitude,p=new Ee(l,f),v=p.toBounds(o.coords.accuracy*2),T=this._locateOptions;if(T.setView){var F=this.getBoundsZoom(v);this.setView(p,T.maxZoom?Math.min(F,T.maxZoom):F)}var q={latlng:p,bounds:v,timestamp:o.timestamp};for(var $ in o.coords)typeof o.coords[$]=="number"&&(q[$]=o.coords[$]);this.fire("locationfound",q)}},addHandler:function(o,l){if(!l)return this;var f=this[o]=new l(this);return this._handlers.push(f),this.options[o]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ge(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var f="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),p=Ne("div",f,l||this._mapPane);return o&&(this._panes[o]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),f=this.unproject(o.getTopRight());return new Pe(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,f){o=Fe(o),f=Y(f||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),T=this.getMaxZoom(),F=o.getNorthWest(),q=o.getSouthEast(),$=this.getSize().subtract(f),Q=xe(this.project(q,p),this.project(F,p)).getSize(),re=ae.any3d?this.options.zoomSnap:1,he=$.x/Q.x,Te=$.y/Q.y,ln=l?Math.max(he,Te):Math.min(he,Te);return p=this.getScaleZoom(ln,p),re&&(p=Math.round(p/(re/100))*(re/100),p=l?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(v,Math.min(T,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var f=this._getTopLeftPoint(o,l);return new ce(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(o)/f.scale(l)},getScaleZoom:function(o,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var p=f.zoom(o*f.scale(l));return isNaN(p)?1/0:p},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ge(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Y(o),l)},layerPointToLatLng:function(o){var l=Y(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(ge(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ge(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Fe(o))},distance:function(o,l){return this.options.crs.distance(ge(o),ge(l))},containerPointToLayerPoint:function(o){return Y(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Y(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(Y(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(o)))},mouseEventToContainerPoint:function(o){return aa(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=nc(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ue(l,"scroll",this._onScroll,this),this._containerId=u(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,ve(o,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ui(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(o.markerPane,"leaflet-zoom-hide"),ve(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,f){me(this._mapPane,new K(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,f)._move(o,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,f,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),p?f&&f.pinch&&this.fire("zoom",f):((v||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){me(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[u(this._container)]=this;var l=o?We:ue;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var f=[],p,v=l==="mouseout"||l==="mouseover",T=o.target||o.srcElement,F=!1;T;){if(p=this._targets[u(T)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!fc(T,o)||(f.push(p),v))||T===this._container)break;T=T.parentNode}return!f.length&&!F&&!v&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var f=o.type;f==="mousedown"&&Jr(l),this._fireDOMEvent(o,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,f){if(o.type==="click"){var p=i({},o);p.type="preclick",this._fireDOMEvent(p,p.type,f)}var v=this._findEventTargets(o,l);if(f){for(var T=[],F=0;F<f.length;F++)f[F].listens(l,!0)&&T.push(f[F]);v=T.concat(v)}if(v.length){l==="contextmenu"&&it(o);var q=v[0],$={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Q=q.getLatLng&&(!q._radius||q._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(o),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?q.getLatLng():this.layerPointToLatLng($.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,$,!0),$.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&O(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return Un(this._mapPane)||new K(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var f=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var f=this.getSize()._divideBy(2);return this.project(o,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,f){var p=this._getNewPixelOrigin(f,l);return this.project(o,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(o,l,f){var p=this._getNewPixelOrigin(f,l);return xe([this.project(o.getSouthWest(),l)._subtract(p),this.project(o.getNorthWest(),l)._subtract(p),this.project(o.getSouthEast(),l)._subtract(p),this.project(o.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,f){if(!f)return o;var p=this.project(o,l),v=this.getSize().divideBy(2),T=new ce(p.subtract(v),p.add(v)),F=this._getBoundsOffset(T,f,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?o:this.unproject(p.add(F),l)},_limitOffset:function(o,l){if(!l)return o;var f=this.getPixelBounds(),p=new ce(f.min.add(o),f.max.add(o));return o.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(o,l,f){var p=xe(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),v=p.min.subtract(o.min),T=p.max.subtract(o.max),F=this._rebound(v.x,-T.x),q=this._rebound(v.y,-T.y);return new K(F,q)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),f=this.getMaxZoom(),p=ae.any3d?this.options.zoomSnap:1;return p&&(o=Math.round(o/p)*p),Math.max(l,Math.min(f,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var f=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var o=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var f=Ys,p=this._proxy.style[f];Cr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();Cr(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(o)._divideBy(1-1/p);return f.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,f,p){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function la(o,l){return new ke(o,l)}var mn=Qe.extend({options:{position:"topright"},initialize:function(o){N(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),f=this.getPosition(),p=o._controlCorners[f];return ve(l,"leaflet-control"),f.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),an=function(o){return new mn(o)};ke.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",f=this._controlContainer=Ne("div",l+"control-container",this._container);function p(v,T){var F=l+v+" "+l+T;o[v+T]=Ne("div",F,f)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ge(this._controlCorners[o]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var pc=mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,f,p){return f<p?-1:p<f?1:0}},initialize:function(o,l,f){N(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in o)this._addLayer(o[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return mn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(u(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Ne("div",o),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),qi(l),Wi(l);var p=this._section=Ne("section",o+"-list");f&&(this._map.on("click",this.collapse,this),ue(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ne("a",o+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ue(v,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){it(T),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Ne("div",o+"-base",p),this._separator=Ne("div",o+"-separator",p),this._overlaysList=Ne("div",o+"-overlays",p),l.appendChild(p)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&u(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,f){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Js(this._baseLayersList),Js(this._overlaysList),this._layerControlInputs=[];var o,l,f,p,v=0;for(f=0;f<this._layers.length;f++)p=this._layers[f],this._addItem(p),l=l||p.overlay,o=o||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(o=o&&v>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(u(o.target)),f=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(o,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=f,p.firstChild},_addItem:function(o){var l=document.createElement("label"),f=this._map.hasLayer(o.layer),p;o.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=f):p=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(p),p.layerId=u(o.layer),ue(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+o.name;var T=document.createElement("span");l.appendChild(T),T.appendChild(p),T.appendChild(v);var F=o.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,f,p=[],v=[];this._handlingClick=!0;for(var T=o.length-1;T>=0;T--)l=o[T],f=this._getLayer(l.layerId).layer,l.checked?p.push(f):l.checked||v.push(f);for(T=0;T<v.length;T++)this._map.hasLayer(v[T])&&this._map.removeLayer(v[T]);for(T=0;T<p.length;T++)this._map.hasLayer(p[T])||this._map.addLayer(p[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,f,p=this._map.getZoom(),v=o.length-1;v>=0;v--)l=o[v],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&p<f.options.minZoom||f.options.maxZoom!==void 0&&p>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ue(o,"click",it),this.expand();var l=this;setTimeout(function(){We(o,"click",it),l._preventClick=!1})}}),gp=function(o,l,f){return new pc(o,l,f)},ei=mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",f=Ne("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,f,p,v){var T=Ne("a",f,p);return T.innerHTML=o,T.href="#",T.title=l,T.setAttribute("role","button"),T.setAttribute("aria-label",l),qi(T),ue(T,"click",kn),ue(T,"click",v,this),ue(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";tt(this._zoomInButton,l),tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ve(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ve(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ke.mergeOptions({zoomControl:!0}),ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var qh=function(o){return new ei(o)},ca=mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",f=Ne("div",l),p=this.options;return this._addScales(p,l+"-line",f),o.on(p.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),f},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,f){o.metric&&(this._mScale=Ne("div",l,f)),o.imperial&&(this._iScale=Ne("div",l,f))},_update:function(){var o=this._map,l=o.getSize().y/2,f=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/o)},_updateImperial:function(o){var l=o*3.2808399,f,p,v;l>5280?(f=l/5280,p=this._getRoundNum(f),this._updateScale(this._iScale,p+" mi",p/f)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(o,l,f){o.style.width=Math.round(this.options.maxWidth*f)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),f=o/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),ua=function(o){return new ca(o)},Hh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hi=mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Hh+" ":"")+"Leaflet</a>"},initialize:function(o){N(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),qi(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),o.length&&f.push(o.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});ke.mergeOptions({attributionControl:!0}),ke.addInitHook(function(){this.options.attributionControl&&new Hi().addTo(this)});var _p=function(o){return new Hi(o)};mn.Layers=pc,mn.Zoom=ei,mn.Scale=ca,mn.Attribution=Hi,an.layers=gp,an.zoom=qh,an.scale=ua,an.attribution=_p;var Sn=Qe.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Sn.addTo=function(o,l){return o.addHandler(l,this),this};var eo={Events:ut},gc=ae.touch?"touchstart mousedown":"mousedown",sr=Nt.extend({options:{clickTolerance:3},initialize:function(o,l,f,p){N(this,p),this._element=o,this._dragStartTarget=l||o,this._preventOutline=f},enable:function(){this._enabled||(ue(this._dragStartTarget,gc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sr._dragging===this&&this.finishDrag(!0),We(this._dragStartTarget,gc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!rc(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){sr._dragging===this&&this.finishDrag();return}if(!(sr._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(sr._dragging=this,this._preventOutline&&Jr(this._element),oc(),rr(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,f=cc(this._element);this._startPoint=new K(l.clientX,l.clientY),this._startPos=Un(this._element),this._parentScale=oa(f);var p=o.type==="mousedown";ue(document,p?"mousemove":"touchmove",this._onMove,this),ue(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,f=new K(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,it(o),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),me(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),We(document,"mousemove touchmove",this._onMove,this),We(document,"mouseup touchend touchcancel",this._onUp,this),ac(),ir();var l=this._moved&&this._moving;this._moving=!1,sr._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function ha(o,l,f){var p,v=[1,4,2,8],T,F,q,$,Q,re,he,Te;for(T=0,re=o.length;T<re;T++)o[T]._code=kr(o[T],l);for(q=0;q<4;q++){for(he=v[q],p=[],T=0,re=o.length,F=re-1;T<re;F=T++)$=o[T],Q=o[F],$._code&he?Q._code&he||(Te=Rt(Q,$,he,l,f),Te._code=kr(Te,l),p.push(Te)):(Q._code&he&&(Te=Rt(Q,$,he,l,f),Te._code=kr(Te,l),p.push(Te)),p.push($));o=p}return o}function da(o,l){var f,p,v,T,F,q,$,Q,re;if(!o||o.length===0)throw new Error("latlngs not passed");h(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var he=ge([0,0]),Te=Fe(o),ln=Te.getNorthWest().distanceTo(Te.getSouthWest())*Te.getNorthEast().distanceTo(Te.getNorthWest());ln<1700&&(he=fa(o));var Lt=o.length,Hn=[];for(f=0;f<Lt;f++){var pn=ge(o[f]);Hn.push(l.project(ge([pn.lat-he.lat,pn.lng-he.lng])))}for(q=$=Q=0,f=0,p=Lt-1;f<Lt;p=f++)v=Hn[f],T=Hn[p],F=v.y*T.x-T.y*v.x,$+=(v.x+T.x)*F,Q+=(v.y+T.y)*F,q+=F*3;q===0?re=Hn[0]:re=[$/q,Q/q];var xa=l.unproject(Y(re));return ge([xa.lat+he.lat,xa.lng+he.lng])}function fa(o){for(var l=0,f=0,p=0,v=0;v<o.length;v++){var T=ge(o[v]);l+=T.lat,f+=T.lng,p++}return ge([l/p,f/p])}var ma={__proto__:null,clipPolygon:ha,polygonCenter:da,centroid:fa};function _c(o,l){if(!l||!o.length)return o.slice();var f=l*l;return o=Gh(o,f),o=$h(o,f),o}function yc(o,l,f){return Math.sqrt(qn(o,l,f,!0))}function ti(o,l,f){return qn(o,l,f)}function $h(o,l){var f=o.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(f);v[0]=v[f-1]=1,pa(o,v,l,0,f-1);var T,F=[];for(T=0;T<f;T++)v[T]&&F.push(o[T]);return F}function pa(o,l,f,p,v){var T=0,F,q,$;for(q=p+1;q<=v-1;q++)$=qn(o[q],o[p],o[v],!0),$>T&&(F=q,T=$);T>f&&(l[F]=1,pa(o,l,f,p,F),pa(o,l,f,F,v))}function Gh(o,l){for(var f=[o[0]],p=1,v=0,T=o.length;p<T;p++)Kh(o[p],o[v])>l&&(f.push(o[p]),v=p);return v<T-1&&f.push(o[T-1]),f}var vc;function to(o,l,f,p,v){var T=p?vc:kr(o,f),F=kr(l,f),q,$,Q;for(vc=F;;){if(!(T|F))return[o,l];if(T&F)return!1;q=T||F,$=Rt(o,l,q,f,v),Q=kr($,f),q===T?(o=$,T=Q):(l=$,F=Q)}}function Rt(o,l,f,p,v){var T=l.x-o.x,F=l.y-o.y,q=p.min,$=p.max,Q,re;return f&8?(Q=o.x+T*($.y-o.y)/F,re=$.y):f&4?(Q=o.x+T*(q.y-o.y)/F,re=q.y):f&2?(Q=$.x,re=o.y+F*($.x-o.x)/T):f&1&&(Q=q.x,re=o.y+F*(q.x-o.x)/T),new K(Q,re,v)}function kr(o,l){var f=0;return o.x<l.min.x?f|=1:o.x>l.max.x&&(f|=2),o.y<l.min.y?f|=4:o.y>l.max.y&&(f|=8),f}function Kh(o,l){var f=l.x-o.x,p=l.y-o.y;return f*f+p*p}function qn(o,l,f,p){var v=l.x,T=l.y,F=f.x-v,q=f.y-T,$=F*F+q*q,Q;return $>0&&(Q=((o.x-v)*F+(o.y-T)*q)/$,Q>1?(v=f.x,T=f.y):Q>0&&(v+=F*Q,T+=q*Q)),F=o.x-v,q=o.y-T,p?F*F+q*q:new K(v,T)}function h(o){return!S(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function y(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(o)}function w(o,l){var f,p,v,T,F,q,$,Q;if(!o||o.length===0)throw new Error("latlngs not passed");h(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var re=ge([0,0]),he=Fe(o),Te=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());Te<1700&&(re=fa(o));var ln=o.length,Lt=[];for(f=0;f<ln;f++){var Hn=ge(o[f]);Lt.push(l.project(ge([Hn.lat-re.lat,Hn.lng-re.lng])))}for(f=0,p=0;f<ln-1;f++)p+=Lt[f].distanceTo(Lt[f+1])/2;if(p===0)Q=Lt[0];else for(f=0,T=0;f<ln-1;f++)if(F=Lt[f],q=Lt[f+1],v=F.distanceTo(q),T+=v,T>p){$=(T-p)/v,Q=[q.x-$*(q.x-F.x),q.y-$*(q.y-F.y)];break}var pn=l.unproject(Y(Q));return ge([pn.lat+re.lat,pn.lng+re.lng])}var k={__proto__:null,simplify:_c,pointToSegmentDistance:yc,closestPointOnSegment:ti,clipSegment:to,_getEdgeIntersection:Rt,_getBitCode:kr,_sqClosestPointOnSegment:qn,isFlat:h,_flat:y,polylineCenter:w},W={project:function(o){return new K(o.lng,o.lat)},unproject:function(o){return new Ee(o.y,o.x)},bounds:new ce([-180,-90],[180,90])},G={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,f=this.R,p=o.lat*l,v=this.R_MINOR/f,T=Math.sqrt(1-v*v),F=T*Math.sin(p),q=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),T/2);return p=-f*Math.log(Math.max(q,1e-10)),new K(o.lng*l*f,p)},unproject:function(o){for(var l=180/Math.PI,f=this.R,p=this.R_MINOR/f,v=Math.sqrt(1-p*p),T=Math.exp(-o.y/f),F=Math.PI/2-2*Math.atan(T),q=0,$=.1,Q;q<15&&Math.abs($)>1e-7;q++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),$=Math.PI/2-2*Math.atan(T*Q)-F,F+=$;return new Ee(F*l,o.x*l/f)}},te={__proto__:null,LonLat:W,Mercator:G,SphericalMercator:Di},Ve=i({},Ir,{code:"EPSG:3395",projection:G,transformation:function(){var o=.5/(Math.PI*G.R);return Gr(o,.5,-o,.5)}()}),yt=i({},Ir,{code:"EPSG:4326",projection:W,transformation:Gr(1/180,1,-1/180,.5)}),Le=i({},Ct,{projection:W,transformation:Gr(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var f=l.lng-o.lng,p=l.lat-o.lat;return Math.sqrt(f*f+p*p)},infinite:!0});Ct.Earth=Ir,Ct.EPSG3395=Ve,Ct.EPSG3857=Bs,Ct.EPSG900913=Bl,Ct.EPSG4326=yt,Ct.Simple=Le;var qe=Nt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[u(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[u(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ke.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=u(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=u(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return u(o)in this._layers},eachLayer:function(o,l){for(var f in this._layers)o.call(l,this._layers[f]);return this},_addLayers:function(o){o=o?S(o)?o:[o]:[];for(var l=0,f=o.length;l<f;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[u(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=u(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,f=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;o=v.minZoom===void 0?o:Math.min(o,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var st=qe.extend({initialize:function(o,l){N(this,l),this._layers={};var f,p;if(o)for(f=0,p=o.length;f<p;f++)this.addLayer(o[f])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),f,p;for(f in this._layers)p=this._layers[f],p[o]&&p[o].apply(p,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var f in this._layers)o.call(l,this._layers[f]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return u(o)}}),$i=function(o,l){return new st(o,l)},ft=st.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),st.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),st.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Pe;for(var l in this._layers){var f=this._layers[l];o.extend(f.getBounds?f.getBounds():f.getLatLng())}return o}}),ga=function(o,l){return new ft(o,l)},Sr=Qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){N(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var f=this._getIconUrl(o);if(!f){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(o,l){var f=this.options,p=f[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=Y(p),T=Y(l==="shadow"&&f.shadowAnchor||f.iconAnchor||v&&v.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(f.className||""),T&&(o.style.marginLeft=-T.x+"px",o.style.marginTop=-T.y+"px"),v&&(o.style.width=v.x+"px",o.style.height=v.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return ae.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function xP(o){return new Sr(o)}var xc=Sr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof xc.imagePath!="string"&&(xc.imagePath=this._detectIconPath()),(this.options.imagePath||xc.imagePath)+Sr.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(f,p,v){var T=p.exec(f);return T&&T[v]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ne("div","leaflet-default-icon-path",document.body),l=Ui(o,"background-image")||Ui(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),K0=Sn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new sr(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,f=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,T=Un(l._icon),F=f.getPixelBounds(),q=f.getPixelOrigin(),$=xe(F.min._subtract(q).add(v),F.max._subtract(q).subtract(v));if(!$.contains(T)){var Q=Y((Math.max($.max.x,T.x)-$.max.x)/(F.max.x-$.max.x)-(Math.min($.min.x,T.x)-$.min.x)/(F.min.x-$.min.x),(Math.max($.max.y,T.y)-$.max.y)/(F.max.y-$.max.y)-(Math.min($.min.y,T.y)-$.min.y)/(F.min.y-$.min.y)).multiplyBy(p);f.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),me(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=V(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,f=l._shadow,p=Un(l._icon),v=l._map.layerPointToLatLng(p);f&&me(f,p),l._latlng=v,o.latlng=v,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Zh=qe.extend({options:{icon:new xc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){N(this,l),this._latlng=ge(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=ge(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=o.icon.createIcon(this._icon),p=!1;f!==this._icon&&(this._icon&&this._removeIcon(),p=!0,o.title&&(f.title=o.title),f.tagName==="IMG"&&(f.alt=o.alt||"")),ve(f,l),o.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ue(f,"focus",this._panOnFocus,this);var v=o.icon.createShadow(this._shadow),T=!1;v!==this._shadow&&(this._removeShadow(),T=!0),v&&(ve(v,l),v.alt=""),this._shadow=v,o.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&T&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&me(this._icon,o),this._shadow&&me(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),K0)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new K0(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&ht(this._icon,o),this._shadow&&ht(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,f=l.iconSize?Y(l.iconSize):Y(0,0),p=l.iconAnchor?Y(l.iconAnchor):Y(0,0);o.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:f.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function wP(o,l){return new Zh(o,l)}var Gi=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return N(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qh=Gi.extend({options:{fill:!0,radius:10},initialize:function(o,l){N(this,l),this._latlng=ge(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=ge(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return Gi.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,f=this._clickTolerance(),p=[o+f,l+f];this._pxBounds=new ce(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function EP(o,l){return new Qh(o,l)}var yp=Qh.extend({initialize:function(o,l,f){if(typeof l=="number"&&(l=i({},f,{radius:l})),N(this,l),this._latlng=ge(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Gi.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,f=this._map,p=f.options.crs;if(p.distance===Ir.distance){var v=Math.PI/180,T=this._mRadius/Ir.R/v,F=f.project([l+T,o]),q=f.project([l-T,o]),$=F.add(q).divideBy(2),Q=f.unproject($).lat,re=Math.acos((Math.cos(T*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(re)||re===0)&&(re=T/Math.cos(Math.PI/180*l)),this._point=$.subtract(f.getPixelOrigin()),this._radius=isNaN(re)?0:$.x-f.project([Q,o-re]).x,this._radiusY=$.y-F.y}else{var he=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(he).x}this._updateBounds()}});function TP(o,l,f){return new yp(o,l,f)}var ni=Gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){N(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,f=null,p=qn,v,T,F=0,q=this._parts.length;F<q;F++)for(var $=this._parts[F],Q=1,re=$.length;Q<re;Q++){v=$[Q-1],T=$[Q];var he=p(o,v,T,!0);he<l&&(l=he,f=p(o,v,T))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=ge(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Pe,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],f=h(o),p=0,v=o.length;p<v;p++)f?(l[p]=ge(o[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(o[p]);return l},_project:function(){var o=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new K(o,o);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,f){var p=o[0]instanceof Ee,v=o.length,T,F;if(p){for(F=[],T=0;T<v;T++)F[T]=this._map.latLngToLayerPoint(o[T]),f.extend(F[T]);l.push(F)}else for(T=0;T<v;T++)this._projectLatlngs(o[T],l,f)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,p,v,T,F,q,$;for(f=0,v=0,T=this._rings.length;f<T;f++)for($=this._rings[f],p=0,F=$.length;p<F-1;p++)q=to($[p],$[p+1],o,p,!0),q&&(l[v]=l[v]||[],l[v].push(q[0]),(q[1]!==$[p+1]||p===F-2)&&(l[v].push(q[1]),v++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,f=0,p=o.length;f<p;f++)o[f]=_c(o[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var f,p,v,T,F,q,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(f=0,T=this._parts.length;f<T;f++)for(q=this._parts[f],p=0,F=q.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&yc(o,q[v],q[p])<=$)return!0;return!1}});function bP(o,l){return new ni(o,l)}ni._flat=y;var _a=ni.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return da(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=ni.prototype._convertLatLngs.call(this,o),f=l.length;return f>=2&&l[0]instanceof Ee&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(o){ni.prototype._setLatLngs.call(this,o),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,f=new K(l,l);if(o=new ce(o.min.subtract(f),o.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,T;p<v;p++)T=ha(this._rings[p],o,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,f,p,v,T,F,q,$,Q;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(T=0,$=this._parts.length;T<$;T++)for(f=this._parts[T],F=0,Q=f.length,q=Q-1;F<Q;q=F++)p=f[F],v=f[q],p.y>o.y!=v.y>o.y&&o.x<(v.x-p.x)*(o.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||ni.prototype._containsPoint.call(this,o,!0)}});function IP(o,l){return new _a(o,l)}var ri=ft.extend({initialize:function(o,l){N(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=S(o)?o:o.features,f,p,v;if(l){for(f=0,p=l.length;f<p;f++)v=l[f],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var T=this.options;if(T.filter&&!T.filter(o))return this;var F=Yh(o,T);return F?(F.feature=ed(o),F.defaultOptions=F.options,this.resetStyle(F),T.onEachFeature&&T.onEachFeature(o,F),this.addLayer(F)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Yh(o,l){var f=o.type==="Feature"?o.geometry:o,p=f?f.coordinates:null,v=[],T=l&&l.pointToLayer,F=l&&l.coordsToLatLng||vp,q,$,Q,re;if(!p&&!f)return null;switch(f.type){case"Point":return q=F(p),Z0(T,o,q,l);case"MultiPoint":for(Q=0,re=p.length;Q<re;Q++)q=F(p[Q]),v.push(Z0(T,o,q,l));return new ft(v);case"LineString":case"MultiLineString":return $=Xh(p,f.type==="LineString"?0:1,F),new ni($,l);case"Polygon":case"MultiPolygon":return $=Xh(p,f.type==="Polygon"?1:2,F),new _a($,l);case"GeometryCollection":for(Q=0,re=f.geometries.length;Q<re;Q++){var he=Yh({geometry:f.geometries[Q],type:"Feature",properties:o.properties},l);he&&v.push(he)}return new ft(v);case"FeatureCollection":for(Q=0,re=f.features.length;Q<re;Q++){var Te=Yh(f.features[Q],l);Te&&v.push(Te)}return new ft(v);default:throw new Error("Invalid GeoJSON object.")}}function Z0(o,l,f,p){return o?o(l,f):new Zh(f,p&&p.markersInheritOptions&&p)}function vp(o){return new Ee(o[1],o[0],o[2])}function Xh(o,l,f){for(var p=[],v=0,T=o.length,F;v<T;v++)F=l?Xh(o[v],l-1,f):(f||vp)(o[v]),p.push(F);return p}function xp(o,l){return o=ge(o),o.alt!==void 0?[x(o.lng,l),x(o.lat,l),x(o.alt,l)]:[x(o.lng,l),x(o.lat,l)]}function Jh(o,l,f,p){for(var v=[],T=0,F=o.length;T<F;T++)v.push(l?Jh(o[T],h(o[T])?0:l-1,f,p):xp(o[T],p));return!l&&f&&v.length>0&&v.push(v[0].slice()),v}function ya(o,l){return o.feature?i({},o.feature,{geometry:l}):ed(l)}function ed(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var wp={toGeoJSON:function(o){return ya(this,{type:"Point",coordinates:xp(this.getLatLng(),o)})}};Zh.include(wp),yp.include(wp),Qh.include(wp),ni.include({toGeoJSON:function(o){var l=!h(this._latlngs),f=Jh(this._latlngs,l?1:0,!1,o);return ya(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),_a.include({toGeoJSON:function(o){var l=!h(this._latlngs),f=l&&!h(this._latlngs[0]),p=Jh(this._latlngs,f?2:l?1:0,!0,o);return l||(p=[p]),ya(this,{type:(f?"Multi":"")+"Polygon",coordinates:p})}}),st.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(o).geometry.coordinates)}),ya(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var f=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var T=v.toGeoJSON(o);if(f)p.push(T.geometry);else{var F=ed(T);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),f?ya(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Q0(o,l){return new ri(o,l)}var CP=Q0,td=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,f){this._url=o,this._bounds=Fe(l),N(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Yr(this._image),this},bringToBack:function(){return this._map&&zi(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Fe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Ne("img");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Cr(this._image,f,l)},_reset:function(){var o=this._image,l=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();me(o,l.min),o.style.width=f.x+"px",o.style.height=f.y+"px"},_updateOpacity:function(){ht(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),kP=function(o,l,f){return new td(o,l,f)},Y0=td.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Ne("video");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),o){for(var f=l.getElementsByTagName("source"),p=[],v=0;v<f.length;v++)p.push(f[v].src);this._url=f.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var F=Ne("source");F.src=this._url[T],l.appendChild(F)}}});function SP(o,l,f){return new Y0(o,l,f)}var X0=td.extend({_initImage:function(){var o=this._image=this._url;ve(o,"leaflet-image-layer"),this._zoomAnimated&&ve(o,"leaflet-zoom-animated"),this.options.className&&ve(o,this.options.className),o.onselectstart=_,o.onmousemove=_}});function PP(o,l,f){return new X0(o,l,f)}var Pr=qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof Ee||S(o))?(this._latlng=ge(o),N(this,l)):(N(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&ht(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&ht(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(ht(this._container,0),this._removeTimeout=setTimeout(a(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ge(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yr(this._container),this},bringToBack:function(){return this._map&&zi(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof ft){l=null;var f=this._source._layers;for(var p in f)if(f[p]._map){l=f[p];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=Y(this.options.offset),f=this._getAnchor();this._zoomAnimated?me(this._container,o.add(f)):l=l.add(o).add(f);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ke.include({_initOverlay:function(o,l,f,p){var v=l;return v instanceof o||(v=new o(p).setContent(l)),f&&v.setLatLng(f),v}}),qe.include({_initOverlay:function(o,l,f,p){var v=f;return v instanceof o?(N(v,p),v._source=this):(v=l&&!p?l:new o(p,this),v.setContent(f)),v}});var nd=Pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Pr.prototype.openOn.call(this,o)},onAdd:function(o){Pr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gi||this._source.on("preclick",Wn))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gi||this._source.off("preclick",Wn))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Ne("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Ne("div",o+"-content-wrapper",l);if(this._contentNode=Ne("div",o+"-content",f),qi(l),Wi(this._contentNode),ue(l,"contextmenu",Wn),this._tipContainer=Ne("div",o+"-tip-container",l),this._tip=Ne("div",o+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ne("a",o+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ue(p,"click",function(v){it(v),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var f=o.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var p=o.offsetHeight,v=this.options.maxHeight,T="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",ve(o,T)):tt(o,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),f=this._getAnchor();me(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Ui(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,p=this._containerWidth,v=new K(this._containerLeft,-f-this._containerBottom);v._add(Un(this._container));var T=o.layerPointToContainerPoint(v),F=Y(this.options.autoPanPadding),q=Y(this.options.autoPanPaddingTopLeft||F),$=Y(this.options.autoPanPaddingBottomRight||F),Q=o.getSize(),re=0,he=0;T.x+p+$.x>Q.x&&(re=T.x+p-Q.x+$.x),T.x-re-q.x<0&&(re=T.x-q.x),T.y+f+$.y>Q.y&&(he=T.y+f-Q.y+$.y),T.y-he-q.y<0&&(he=T.y-q.y),(re||he)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([re,he]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),NP=function(o,l){return new nd(o,l)};ke.mergeOptions({closePopupOnClick:!0}),ke.include({openPopup:function(o,l,f){return this._initOverlay(nd,o,l,f).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),qe.include({bindPopup:function(o,l){return this._popup=this._initOverlay(nd,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ft||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){kn(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof Gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var rd=Pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Pr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Pr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Pr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,f,p=this._map,v=this._container,T=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(o),q=this.options.direction,$=v.offsetWidth,Q=v.offsetHeight,re=Y(this.options.offset),he=this._getAnchor();q==="top"?(l=$/2,f=Q):q==="bottom"?(l=$/2,f=0):q==="center"?(l=$/2,f=Q/2):q==="right"?(l=0,f=Q/2):q==="left"?(l=$,f=Q/2):F.x<T.x?(q="right",l=0,f=Q/2):(q="left",l=$+(re.x+he.x)*2,f=Q/2),o=o.subtract(Y(l,f,!0)).add(re).add(he),tt(v,"leaflet-tooltip-right"),tt(v,"leaflet-tooltip-left"),tt(v,"leaflet-tooltip-top"),tt(v,"leaflet-tooltip-bottom"),ve(v,"leaflet-tooltip-"+q),me(v,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&ht(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),AP=function(o,l){return new rd(o,l)};ke.include({openTooltip:function(o,l,f){return this._initOverlay(rd,o,l,f).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),qe.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rd,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ft||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(ue(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ue(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,f,p;this._tooltip.options.sticky&&o.originalEvent&&(f=this._map.mouseEventToContainerPoint(o.originalEvent),p=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var J0=Sr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Js(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var p=Y(f.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function RP(o){return new J0(o)}Sr.Default=xc;var wc=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){N(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ge(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof K?o:new K(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,f=-o(-1/0,1/0),p=0,v=l.length,T;p<v;p++)T=l[p].style.zIndex,l[p]!==this._container&&T&&(f=o(f,+T));isFinite(f)&&(this.options.zIndex=f+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){ht(this._container,this.options.opacity);var o=+new Date,l=!1,f=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var T=Math.min(1,(o-v.loaded)/200);ht(v.el,T),T<1?l=!0:(v.active?f=!0:this._onOpaqueTile(v),v.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===o?(this._levels[f].el.style.zIndex=l-Math.abs(o-f),this._onUpdateLevel(f)):(Ge(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var p=this._levels[o],v=this._map;return p||(p=this._levels[o]={},p.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),o).round(),p.zoom=o,this._setZoomTransform(p,v.getCenter(),v.getZoom()),_(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var o,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ge(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,f,p){var v=Math.floor(o/2),T=Math.floor(l/2),F=f-1,q=new K(+v,+T);q.z=+F;var $=this._tileCoordsToKey(q),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,T,F,p):!1)},_retainChildren:function(o,l,f,p){for(var v=2*o;v<2*o+2;v++)for(var T=2*l;T<2*l+2;T++){var F=new K(v,T);F.z=f+1;var q=this._tileCoordsToKey(F),$=this._tiles[q];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);f+1<p&&this._retainChildren(v,T,f+1,p)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,f,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var T=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||T)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(o),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],o,l)},_setZoomTransform:function(o,l,f){var p=this._map.getZoomScale(f,o.zoom),v=o.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,f)).round();ae.any3d?Cr(o.el,v,p):me(o.el,v)},_resetGrid:function(){var o=this._map,l=o.options.crs,f=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],p).x/f.x),Math.ceil(o.project([0,l.wrapLng[1]],p).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],p).y/f.x),Math.ceil(o.project([l.wrapLat[1],0],p).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(f,this._tileZoom),v=l.project(o,this._tileZoom).floor(),T=l.getSize().divideBy(p*2);return new ce(v.subtract(T),v.add(T))},_update:function(o){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(o),v=this._pxBoundsToTileRange(p),T=v.getCenter(),F=[],q=this.options.keepBuffer,$=new ce(v.getBottomLeft().subtract([q,-q]),v.getTopRight().add([q,-q]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!$.contains(new K(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(o,f);return}for(var he=v.min.y;he<=v.max.y;he++)for(var Te=v.min.x;Te<=v.max.x;Te++){var ln=new K(Te,he);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Lt=this._tiles[this._tileCoordsToKey(ln)];Lt?Lt.current=!0:F.push(ln)}}if(F.sort(function(pn,xa){return pn.distanceTo(T)-xa.distanceTo(T)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Hn=document.createDocumentFragment();for(Te=0;Te<F.length;Te++)this._addTile(F[Te],Hn);this._level.el.appendChild(Hn)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(o.x<f.min.x||o.x>f.max.x)||!l.wrapLat&&(o.y<f.min.y||o.y>f.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(o);return Fe(this.options.bounds).overlaps(p)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,f=this.getTileSize(),p=o.scaleBy(f),v=p.add(f),T=l.unproject(p,o.z),F=l.unproject(v,o.z);return[T,F]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),f=new Pe(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),f=new K(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(o){var l=this._tiles[o];l&&(Ge(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ve(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=_,o.onmousemove=_,ae.ielt9&&this.options.opacity<1&&ht(o,this.options.opacity)},_addTile:function(o,l){var f=this._getTilePos(o),p=this._tileCoordsToKey(o),v=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,o,null,v)),me(v,f),this._tiles[p]={el:v,coords:o,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:o})},_tileReady:function(o,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:o});var p=this._tileCoordsToKey(o);f=this._tiles[p],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ht(f.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(ve(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new K(this._wrapX?g(o.x,this._wrapX):o.x,this._wrapY?g(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new ce(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function LP(o){return new wc(o)}var va=wc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=N(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var f=document.createElement("img");return ue(f,"load",a(this._tileOnLoad,this,l,f)),ue(f,"error",a(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(o),f},getTileUrl:function(o){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=f),l["-y"]=f}return I(this._url,i(l,this.options))},_tileOnLoad:function(o,l){ae.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,f){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),o(f,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,p=this.options.zoomOffset;return f&&(o=l-o),o+p},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=_,l.onerror=_,!l.complete)){l.src=z;var f=this._tiles[o].coords;Ge(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",z),wc.prototype._removeTile.call(this,o)},_tileReady:function(o,l,f){if(!(!this._map||f&&f.getAttribute("src")===z))return wc.prototype._tileReady.call(this,o,l,f)}});function ex(o,l){return new va(o,l)}var tx=va.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var f=i({},this.defaultWmsParams);for(var p in l)p in this.options||(f[p]=l[p]);l=N(this,l);var v=l.detectRetina&&ae.retina?2:1,T=this.getTileSize();f.width=T.x*v,f.height=T.y*v,this.wmsParams=f},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,va.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),f=this._crs,p=xe(f.project(l[0]),f.project(l[1])),v=p.min,T=p.max,F=(this._wmsVersion>=1.3&&this._crs===yt?[v.y,v.x,T.y,T.x]:[v.x,v.y,T.x,T.y]).join(","),q=va.prototype.getTileUrl.call(this,o);return q+M(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(o,l){return i(this.wmsParams,o),l||this.redraw(),this}});function MP(o,l){return new tx(o,l)}va.WMS=tx,ex.wms=MP;var ii=qe.extend({options:{padding:.1},initialize:function(o){N(this,o),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var f=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),T=p.multiplyBy(-f).add(v).subtract(this._map._getNewPixelOrigin(o,l));ae.any3d?Cr(this._container,T,f):me(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new ce(f,f.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),nx=ii.extend({options:{tolerance:0},getEvents:function(){var o=ii.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ue(o,"mousemove",this._onMouseMove,this),ue(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ue(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ge(this._container),We(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var o=this._bounds,l=this._container,f=o.getSize(),p=ae.retina?2:1;me(l,o.min),l.width=p*f.x,l.height=p*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[u(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,f=l.next,p=l.prev;f?f.prev=p:this._drawLast=p,p?p.next=f:this._drawFirst=f,delete o._order,delete this._layers[u(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),f=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;f.push(p)}o.options._dashArray=f}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)o=p.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var f,p,v,T,F=o._parts,q=F.length,$=this._ctx;if(q){for($.beginPath(),f=0;f<q;f++){for(p=0,v=F[f].length;p<v;p++)T=F[f][p],$[p?"lineTo":"moveTo"](T.x,T.y);l&&$.closePath()}this._fillStroke($,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,f=this._ctx,p=Math.max(Math.round(o._radius),1),v=(Math.max(Math.round(o._radiusY),1)||p)/p;v!==1&&(f.save(),f.scale(1,v)),f.beginPath(),f.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&f.restore(),this._fillStroke(f,o)}},_fillStroke:function(o,l){var f=l.options;f.fill&&(o.globalAlpha=f.fillOpacity,o.fillStyle=f.fillColor||f.color,o.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=f.opacity,o.lineWidth=f.weight,o.strokeStyle=f.color,o.lineCap=f.lineCap,o.lineJoin=f.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),f,p,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(f))&&(p=f);this._fireEvent(p?[p]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(tt(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var f,p,v=this._drawFirst;v;v=v.next)f=v.layer,f.options.interactive&&f._containsPoint(l)&&(p=f);p!==this._hoveredLayer&&(this._handleMouseOut(o),p&&(ve(this._container,"leaflet-interactive"),this._fireEvent([p],o,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,f){this._map._fireDOMEvent(l,f||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var f=l.next,p=l.prev;if(f)f.prev=p;else return;p?p.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var f=l.next,p=l.prev;if(p)p.next=f;else return;f?f.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function rx(o){return ae.canvas?new nx(o):null}var Ec=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),OP={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ii.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Ec("shape");ve(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Ec("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Ge(l),o.removeInteractiveTarget(l),delete this._layers[u(o)]},_updateStyle:function(o){var l=o._stroke,f=o._fill,p=o.options,v=o._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=o._stroke=Ec("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),o._stroke=null),p.fill?(f||(f=o._fill=Ec("fill")),v.appendChild(f),f.color=p.fillColor||p.color,f.opacity=p.fillOpacity):f&&(v.removeChild(f),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),f=Math.round(o._radius),p=Math.round(o._radiusY||f);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+p+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){Yr(o._container)},_bringToBack:function(o){zi(o._container)}},id=ae.vml?Ec:qo,Tc=ii.extend({_initContainer:function(){this._container=id("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=id("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),We(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var o=this._bounds,l=o.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),me(f,o.min),f.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=id("path");o.options.className&&ve(l,o.options.className),o.options.interactive&&ve(l,"leaflet-interactive"),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ge(o._path),o.removeInteractiveTarget(o._path),delete this._layers[u(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,f=o.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,Wl(o._parts,l))},_updateCircle:function(o){var l=o._point,f=Math.max(Math.round(o._radius),1),p=Math.max(Math.round(o._radiusY),1)||f,v="a"+f+","+p+" 0 1,0 ",T=o._empty()?"M0 0":"M"+(l.x-f)+","+l.y+v+f*2+",0 "+v+-f*2+",0 ";this._setPath(o,T)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){Yr(o._path)},_bringToBack:function(o){zi(o._path)}});ae.vml&&Tc.include(OP);function ix(o){return ae.svg||ae.vml?new Tc(o):null}ke.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&rx(o)||ix(o)}});var sx=_a.extend({initialize:function(o,l){_a.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Fe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function jP(o,l){return new sx(o,l)}Tc.create=id,Tc.pointsToPath=Wl,ri.geometryToLayer=Yh,ri.coordsToLatLng=vp,ri.coordsToLatLngs=Xh,ri.latLngToCoords=xp,ri.latLngsToCoords=Jh,ri.getFeature=ya,ri.asFeature=ed,ke.mergeOptions({boxZoom:!0});var ox=Sn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ue(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rr(),oc(),this._startPoint=this._map.mouseEventToContainerPoint(o),ue(document,{contextmenu:kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new ce(this._point,this._startPoint),f=l.getSize();me(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Ge(this._box),tt(this._container,"leaflet-crosshair")),ir(),ac(),We(document,{contextmenu:kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ke.addInitHook("addHandler","boxZoom",ox),ke.mergeOptions({doubleClickZoom:!0});var ax=Sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,f=l.getZoom(),p=l.options.zoomDelta,v=o.originalEvent.shiftKey?f-p:f+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(o.containerPoint,v)}});ke.addInitHook("addHandler","doubleClickZoom",ax),ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lx=Sn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new sr(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Fe(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),f=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+f)%o+l-f,T=(p+l+f)%o-l-f,F=Math.abs(v+f)<Math.abs(T+f)?v:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(o){var l=this._map,f=l.options,p=!f.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,F=f.easeLinearity,q=v.multiplyBy(F/T),$=q.distanceTo([0,0]),Q=Math.min(f.inertiaMaxSpeed,$),re=q.multiplyBy(Q/$),he=Q/(f.inertiaDeceleration*F),Te=re.multiplyBy(-he/2).round();!Te.x&&!Te.y?l.fire("moveend"):(Te=l._limitOffset(Te,l.options.maxBounds),V(function(){l.panBy(Te,{duration:he,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});ke.addInitHook("addHandler","dragging",lx),ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var cx=Sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ue(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),We(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,f=o.scrollTop||l.scrollTop,p=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},f=this.keyCodes,p,v;for(p=0,v=f.left.length;p<v;p++)l[f.left[p]]=[-1*o,0];for(p=0,v=f.right.length;p<v;p++)l[f.right[p]]=[o,0];for(p=0,v=f.down.length;p<v;p++)l[f.down[p]]=[0,o];for(p=0,v=f.up.length;p<v;p++)l[f.up[p]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},f=this.keyCodes,p,v;for(p=0,v=f.zoomIn.length;p<v;p++)l[f.zoomIn[p]]=o;for(p=0,v=f.zoomOut.length;p<v;p++)l[f.zoomOut[p]]=-o},_addHooks:function(){ue(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){We(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,f=this._map,p;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(p=this._panKeys[l],o.shiftKey&&(p=Y(p).multiplyBy(3)),f.options.maxBounds&&(p=f._limitOffset(Y(p),f.options.maxBounds)),f.options.worldCopyJump){var v=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(p)));f.panTo(v)}else f.panBy(p)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;kn(o)}}});ke.addInitHook("addHandler","keyboard",cx),ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ux=Sn.extend({addHooks:function(){ue(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=Bh(o),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var p=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),kn(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),f=this._map.options.zoomSnap||0;o._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,T=f?Math.ceil(v/f)*f:v,F=o._limitZoom(l+(this._delta>0?T:-T))-l;this._delta=0,this._startTime=null,F&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+F):o.setZoomAround(this._lastMousePos,l+F))}});ke.addInitHook("addHandler","scrollWheelZoom",ux);var DP=600;ke.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var hx=Sn.extend({addHooks:function(){ue(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new K(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ue(document,"touchend",it),ue(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),DP),ue(document,"touchend touchcancel contextmenu",this._cancel,this),ue(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){We(document,"touchend",it),We(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new K(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var f=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});ke.addInitHook("addHandler","tapHold",hx),ke.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var dx=Sn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),ue(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(o.touches[0]),p=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(p)._divideBy(2))),this._startDist=f.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ue(document,"touchmove",this._onTouchMove,this),ue(document,"touchend touchcancel",this._onTouchEnd,this),it(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(o.touches[0]),p=l.mouseEventToContainerPoint(o.touches[1]),v=f.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var T=f._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&T.x===0&&T.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(F,this,!0),it(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ke.addInitHook("addHandler","touchZoom",dx),ke.BoxZoom=ox,ke.DoubleClickZoom=ax,ke.Drag=lx,ke.Keyboard=cx,ke.ScrollWheelZoom=ux,ke.TapHold=hx,ke.TouchZoom=dx,n.Bounds=ce,n.Browser=ae,n.CRS=Ct,n.Canvas=nx,n.Circle=yp,n.CircleMarker=Qh,n.Class=Qe,n.Control=mn,n.DivIcon=J0,n.DivOverlay=Pr,n.DomEvent=Wh,n.DomUtil=Uh,n.Draggable=sr,n.Evented=Nt,n.FeatureGroup=ft,n.GeoJSON=ri,n.GridLayer=wc,n.Handler=Sn,n.Icon=Sr,n.ImageOverlay=td,n.LatLng=Ee,n.LatLngBounds=Pe,n.Layer=qe,n.LayerGroup=st,n.LineUtil=k,n.Map=ke,n.Marker=Zh,n.Mixin=eo,n.Path=Gi,n.Point=K,n.PolyUtil=ma,n.Polygon=_a,n.Polyline=ni,n.Popup=nd,n.PosAnimation=mc,n.Projection=te,n.Rectangle=sx,n.Renderer=ii,n.SVG=Tc,n.SVGOverlay=X0,n.TileLayer=va,n.Tooltip=rd,n.Transformation=Fi,n.Util=D,n.VideoOverlay=Y0,n.bind=a,n.bounds=xe,n.canvas=rx,n.circle=TP,n.circleMarker=EP,n.control=an,n.divIcon=RP,n.extend=i,n.featureGroup=ga,n.geoJSON=Q0,n.geoJson=CP,n.gridLayer=LP,n.icon=xP,n.imageOverlay=kP,n.latLng=ge,n.latLngBounds=Fe,n.layerGroup=$i,n.map=la,n.marker=wP,n.point=Y,n.polygon=IP,n.polyline=bP,n.popup=NP,n.rectangle=jP,n.setOptions=N,n.stamp=u,n.svg=ix,n.svgOverlay=PP,n.tileLayer=ex,n.tooltip=AP,n.transformation=Gr,n.version=r,n.videoOverlay=SP;var FP=window.L;n.noConflict=function(){return window.L=FP,this},window.L=n})})(oy,oy.exports);var W6=oy.exports;const Jt=QT(W6),q6=()=>{const[t,e]=B.useState(null),[n,r]=B.useState(!1),[i,s]=B.useState(null);return{location:t,loading:n,error:i,obtenerUbicacion:()=>{if(r(!0),s(null),!navigator.geolocation){s("La geolocalizacin no est soportada en tu navegador"),r(!1);return}navigator.geolocation.getCurrentPosition(c=>{e({lat:c.coords.latitude,lng:c.coords.longitude,accuracy:c.coords.accuracy}),r(!1)},c=>{s(c.message),r(!1)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}}},H6=async(t,e)=>{try{const r=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&zoom=18&addressdetails=1`)).json();return{barrio:r.address.suburb||r.address.neighbourhood||"",localidad:r.address.city||r.address.town||r.address.village||"",provincia:r.address.state||"",pais:r.address.country||"",direccion:r.display_name||""}}catch(n){return console.error("Error al obtener direccin:",n),null}};delete Jt.Icon.Default.prototype._getIconUrl;Jt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function $6({onUbicacionSeleccionada:t,ubicacionInicial:e}){const[n,r]=B.useState(!1),[i,s]=B.useState(e||null),[a,c]=B.useState(!1),u=B.useRef(null),m=B.useRef(null),g=B.useRef(null);B.useEffect(()=>{if(n&&!m.current){const M=i||[-34.6037,-58.3816];m.current=Jt.map(u.current).setView(M,13),Jt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:19}).addTo(m.current),i&&(g.current=Jt.marker(i,{draggable:!0}).addTo(m.current),g.current.on("dragend",x)),m.current.on("click",_)}return()=>{m.current&&(m.current.remove(),m.current=null,g.current=null)}},[n]);const _=async M=>{const{lat:b,lng:I}=M.latlng;g.current?g.current.setLatLng([b,I]):(g.current=Jt.marker([b,I],{draggable:!0}).addTo(m.current),g.current.on("dragend",x)),await E(b,I)},x=async M=>{const{lat:b,lng:I}=M.target.getLatLng();await E(b,I)},E=async(M,b)=>{c(!0);const I=await H6(M,b),S={lat:M,lng:b,barrio:(I==null?void 0:I.barrio)||"",localidad:(I==null?void 0:I.localidad)||"",provincia:(I==null?void 0:I.provincia)||"",direccion:(I==null?void 0:I.direccion)||`${M.toFixed(6)}, ${b.toFixed(6)}`};s(S),c(!1)},C=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(M=>{const{latitude:b,longitude:I}=M.coords;m.current&&(m.current.setView([b,I],15),g.current?g.current.setLatLng([b,I]):(g.current=Jt.marker([b,I],{draggable:!0}).addTo(m.current),g.current.on("dragend",x)),E(b,I))},M=>{console.error("Error al obtener ubicacin:",M),alert("No se pudo obtener tu ubicacin. Verifica los permisos del navegador.")})},N=()=>{i&&(t(i),r(!1))};return d.jsxs("div",{children:[!n&&d.jsxs("button",{type:"button",onClick:()=>r(!0),className:"w-full btn-secondary flex items-center justify-center gap-2",children:[d.jsx(Mn,{className:"w-5 h-5"}),i?"Cambiar ubicacin en el mapa":"Seleccionar ubicacin en el mapa"]}),i&&!n&&d.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:" Ubicacin seleccionada"}),d.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[i.barrio&&`${i.barrio}, `,i.localidad]}),d.jsxs("p",{className:"text-xs text-green-600 dark:text-green-500 mt-1",children:["Lat: ",i.lat.toFixed(6),", Lng: ",i.lng.toFixed(6)]})]}),d.jsx("button",{type:"button",onClick:()=>{s(null),t(null)},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200",children:d.jsx(lm,{className:"w-5 h-5"})})]})}),n&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Seleccionar ubicacin del partido"}),d.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:d.jsx(lm,{className:"w-6 h-6"})})]}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Hac click en el mapa o arrastr el marcador para seleccionar la ubicacin"})]}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("div",{ref:u,className:"w-full h-full",style:{minHeight:"400px"}}),d.jsx("button",{type:"button",onClick:C,className:"absolute top-4 right-4 z-[1000] bg-white dark:bg-gray-800 p-3 rounded-lg shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700",title:"Usar mi ubicacin actual",children:d.jsx(hP,{className:"w-5 h-5"})}),a&&d.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-[1000] bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow-lg",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),d.jsx("span",{className:"text-sm",children:"Obteniendo direccin..."})]})})]}),d.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[i&&d.jsxs("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium",children:"Ubicacin seleccionada:"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:i.direccion})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:()=>r(!1),className:"btn-secondary flex-1",children:"Cancelar"}),d.jsx("button",{type:"button",onClick:N,disabled:!i,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirmar ubicacin"})]})]})]})})]})}function G6(){const{user:t}=Tr(),e=Os(),[n,r]=B.useState(!1),[i,s]=B.useState(""),[a,c]=B.useState(1),[u,m]=B.useState({formato:"futbol5",fecha:"",hora:"",duracion:90,estadoCancha:"buscando",provincia:"",localidad:"",barrio:"",direccion:"",nombreCancha:"",lat:null,lng:null,tipoPartido:"publico",costoTotal:"",costoPorJugador:"",edadMin:"",edadMax:"",nivel:"intermedio",posicionesRequeridas:[],descripcion:""}),g=[{id:"futbol5",nombre:"Ftbol 5",jugadores:10},{id:"futbol7",nombre:"Ftbol 7",jugadores:14},{id:"futbol11",nombre:"Ftbol 11",jugadores:22}],_=["principiante","intermedio","avanzado","todos"],x=["Arquero","Defensor","Mediocampista","Delantero"],E=b=>{const{name:I,value:S,type:O,checked:z}=b.target;m(O==="checkbox"?z?{...u,posicionesRequeridas:[...u.posicionesRequeridas,S]}:{...u,posicionesRequeridas:u.posicionesRequeridas.filter(H=>H!==S)}:{...u,[I]:S})},C=async b=>{b.preventDefault(),s(""),r(!0);try{const I=g.find(O=>O.id===u.formato),S={...u,jugadoresMaximos:I.jugadores,nombreFormato:I.nombre,anfitrionNombre:t.displayName||"Usuario",anfitrionEmail:t.email};await U6(t.uid,S),e("/partidos")}catch(I){s("Error al crear el partido. Intntalo de nuevo."),console.error(I)}finally{r(!1)}},N=()=>{a<3&&c(a+1)},M=()=>{a>1&&c(a-1)};return d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:[1,2,3].map(b=>d.jsxs("div",{className:"flex items-center flex-1",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${a>=b?"bg-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500"}`,children:b}),b<3&&d.jsx("div",{className:`flex-1 h-1 mx-2 ${a>b?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`})]},b))}),d.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400",children:[d.jsx("span",{children:"Bsico"}),d.jsx("span",{children:"Ubicacin"}),d.jsx("span",{children:"Detalles"})]})]}),i&&d.jsxs("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 rounded-lg flex items-center gap-2",children:[d.jsx(ry,{className:"w-5 h-5"}),i]}),d.jsx("form",{onSubmit:C,children:d.jsxs("div",{className:"card",children:[a===1&&d.jsxs("div",{className:"space-y-6 fade-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Informacin Bsica"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Formato del Partido"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:g.map(b=>d.jsxs("label",{className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${u.formato===b.id?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary/50"}`,children:[d.jsx("input",{type:"radio",name:"formato",value:b.id,checked:u.formato===b.id,onChange:E,className:"sr-only"}),d.jsxs("div",{className:"text-center",children:[d.jsx(xr,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),d.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:b.nombre}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[b.jugadores," jugadores"]})]})]},b.id))})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[d.jsx(fp,{className:"w-4 h-4 inline mr-1"}),"Fecha"]}),d.jsx("input",{type:"date",name:"fecha",value:u.fecha,onChange:E,min:new Date().toISOString().split("T")[0],className:"input-field",required:!0})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[d.jsx(Tl,{className:"w-4 h-4 inline mr-1"}),"Hora"]}),d.jsx("input",{type:"time",name:"hora",value:u.hora,onChange:E,className:"input-field",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duracin (minutos)"}),d.jsxs("select",{name:"duracion",value:u.duracion,onChange:E,className:"input-field",children:[d.jsx("option",{value:60,children:"60 minutos"}),d.jsx("option",{value:90,children:"90 minutos"}),d.jsx("option",{value:120,children:"120 minutos"})]})]})]}),a===2&&d.jsxs("div",{className:"space-y-6 fade-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Ubicacin del Partido"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Estado de la Cancha"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[d.jsxs("label",{className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${u.estadoCancha==="alquilada"?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600"}`,children:[d.jsx("input",{type:"radio",name:"estadoCancha",value:"alquilada",checked:u.estadoCancha==="alquilada",onChange:E,className:"sr-only"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Mn,{className:"w-6 h-6 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Ya Alquilada"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Lugar exacto confirmado"})]})]})]}),d.jsxs("label",{className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${u.estadoCancha==="buscando"?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600"}`,children:[d.jsx("input",{type:"radio",name:"estadoCancha",value:"buscando",checked:u.estadoCancha==="buscando",onChange:E,className:"sr-only"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(xr,{className:"w-6 h-6 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Buscando Gente"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Zona aproximada"})]})]})]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Provincia"}),d.jsx("input",{type:"text",name:"provincia",value:u.provincia,onChange:E,className:"input-field",placeholder:"Ej: Buenos Aires",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Localidad"}),d.jsx("input",{type:"text",name:"localidad",value:u.localidad,onChange:E,className:"input-field",placeholder:"Ej: CABA, Rosario",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Barrio"}),d.jsx("input",{type:"text",name:"barrio",value:u.barrio,onChange:E,className:"input-field",placeholder:"Ej: Palermo, Centro",required:!0})]}),u.estadoCancha==="alquilada"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre de la Cancha"}),d.jsx("input",{type:"text",name:"nombreCancha",value:u.nombreCancha,onChange:E,className:"input-field",placeholder:"Ej: Polideportivo Norte",required:u.estadoCancha==="alquilada"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direccin Exacta"}),d.jsx("input",{type:"text",name:"direccion",value:u.direccion,onChange:E,className:"input-field",placeholder:"Ej: Av. Corrientes 1234",required:u.estadoCancha==="alquilada"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Ubicacin en el Mapa ",u.estadoCancha==="alquilada"?"(Requerida)":"(Opcional)"]}),d.jsx($6,{ubicacionInicial:u.lat&&u.lng?[u.lat,u.lng]:null,onUbicacionSeleccionada:b=>{m(b?{...u,lat:b.lat,lng:b.lng,barrio:u.barrio||b.barrio,localidad:u.localidad||b.localidad,provincia:u.provincia||b.provincia}:{...u,lat:null,lng:null})}})]})]}),a===3&&d.jsxs("div",{className:"space-y-6 fade-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Detalles Finales"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Tipo de Partido"}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[d.jsxs("label",{className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${u.tipoPartido==="publico"?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600"}`,children:[d.jsx("input",{type:"radio",name:"tipoPartido",value:"publico",checked:u.tipoPartido==="publico",onChange:E,className:"sr-only"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(v6,{className:"w-6 h-6 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Pblico"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Visible en el feed"})]})]})]}),d.jsxs("label",{className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${u.tipoPartido==="privado"?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600"}`,children:[d.jsx("input",{type:"radio",name:"tipoPartido",value:"privado",checked:u.tipoPartido==="privado",onChange:E,className:"sr-only"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(om,{className:"w-6 h-6 text-primary"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Privado"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Solo con link"})]})]})]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[d.jsx(aP,{className:"w-4 h-4 inline mr-1"}),"Costo Total (opcional)"]}),d.jsx("input",{type:"number",name:"costoTotal",value:u.costoTotal,onChange:E,className:"input-field",placeholder:"$0",min:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Costo por Jugador (opcional)"}),d.jsx("input",{type:"number",name:"costoPorJugador",value:u.costoPorJugador,onChange:E,className:"input-field",placeholder:"$0",min:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Filtros de Admisin"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Edad Mnima"}),d.jsx("input",{type:"number",name:"edadMin",value:u.edadMin,onChange:E,className:"input-field",placeholder:"16",min:"16"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Edad Mxima"}),d.jsx("input",{type:"number",name:"edadMax",value:u.edadMax,onChange:E,className:"input-field",placeholder:"80",max:"80"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Nivel"}),d.jsx("select",{name:"nivel",value:u.nivel,onChange:E,className:"input-field",children:_.map(b=>d.jsx("option",{value:b,children:b.charAt(0).toUpperCase()+b.slice(1)},b))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Posiciones Requeridas (opcional)"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(b=>d.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[d.jsx("input",{type:"checkbox",value:b,checked:u.posicionesRequeridas.includes(b),onChange:E,className:"rounded text-primary"}),d.jsx("span",{className:"text-sm",children:b})]},b))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin / Comentarios"}),d.jsx("textarea",{name:"descripcion",value:u.descripcion,onChange:E,className:"input-field",rows:"4",placeholder:"Agrega cualquier detalle adicional..."})]})]}),d.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a>1&&d.jsx("button",{type:"button",onClick:M,className:"btn-secondary flex-1",children:"Anterior"}),a<3?d.jsxs("button",{type:"button",onClick:N,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:["Siguiente",d.jsx(oP,{className:"w-5 h-5"})]}):d.jsx("button",{type:"submit",disabled:n,className:"btn-primary flex-1",children:n?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"spinner w-5 h-5"}),"Creando..."]}):" Crear Partido"})]})]})})]})}function K6(){return d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsxs("main",{className:"container-app py-6 pb-24 md:pb-6",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:" Crear Nuevo Partido"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Completa los datos y encuentra jugadores para tu partido"})]}),d.jsx(G6,{})]})]})}function br(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function jo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const pP=6048e5,Z6=864e5;let Q6={};function mp(){return Q6}function Qu(t,e){var c,u,m,g;const n=mp(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,i=br(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function cm(t){return Qu(t,{weekStartsOn:1})}function gP(t){const e=br(t),n=e.getFullYear(),r=jo(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=cm(r),s=jo(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=cm(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function BT(t){const e=br(t);return e.setHours(0,0,0,0),e}function WT(t){const e=br(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Y6(t,e){const n=BT(t),r=BT(e),i=+n-WT(n),s=+r-WT(r);return Math.round((i-s)/Z6)}function X6(t){const e=gP(t),n=jo(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),cm(n)}function J6(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eU(t){if(!J6(t)&&typeof t!="number")return!1;const e=br(t);return!isNaN(Number(e))}function tU(t){const e=br(t),n=jo(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const nU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rU=(t,e,n)=>{let r;const i=nU[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function tl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const iU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aU={date:tl({formats:iU,defaultWidth:"full"}),time:tl({formats:sU,defaultWidth:"full"}),dateTime:tl({formats:oU,defaultWidth:"full"})},lU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cU=(t,e,n,r)=>lU[t];function Mr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;i=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const uU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gU=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_U={ordinalNumber:gU,era:Mr({values:uU,defaultWidth:"wide"}),quarter:Mr({values:hU,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Mr({values:dU,defaultWidth:"wide"}),day:Mr({values:fU,defaultWidth:"wide"}),dayPeriod:Mr({values:mU,defaultWidth:"wide",formattingValues:pU,defaultFormattingWidth:"wide"})};function Or(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?vU(c,_=>_.test(a)):yU(c,_=>_.test(a));let m;m=t.valueCallback?t.valueCallback(u):u,m=n.valueCallback?n.valueCallback(m):m;const g=e.slice(a.length);return{value:m,rest:g}}}function yU(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function vU(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function _P(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const xU=/^(\d+)(th|st|nd|rd)?/i,wU=/\d+/i,EU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TU={any:[/^b/i,/^(a|c)/i]},bU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IU={any:[/1/i,/2/i,/3/i,/4/i]},CU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RU={ordinalNumber:_P({matchPattern:xU,parsePattern:wU,valueCallback:t=>parseInt(t,10)}),era:Or({matchPatterns:EU,defaultMatchWidth:"wide",parsePatterns:TU,defaultParseWidth:"any"}),quarter:Or({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:IU,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Or({matchPatterns:CU,defaultMatchWidth:"wide",parsePatterns:kU,defaultParseWidth:"any"}),day:Or({matchPatterns:SU,defaultMatchWidth:"wide",parsePatterns:PU,defaultParseWidth:"any"}),dayPeriod:Or({matchPatterns:NU,defaultMatchWidth:"any",parsePatterns:AU,defaultParseWidth:"any"})},LU={code:"en-US",formatDistance:rU,formatLong:aU,formatRelative:cU,localize:_U,match:RU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MU(t){const e=br(t);return Y6(e,tU(e))+1}function OU(t){const e=br(t),n=+cm(e)-+X6(e);return Math.round(n/pP)+1}function yP(t,e){var g,_,x,E;const n=br(t),r=n.getFullYear(),i=mp(),s=(e==null?void 0:e.firstWeekContainsDate)??((_=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((E=(x=i.locale)==null?void 0:x.options)==null?void 0:E.firstWeekContainsDate)??1,a=jo(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=Qu(a,e),u=jo(t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const m=Qu(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=m.getTime()?r:r-1}function jU(t,e){var c,u,m,g;const n=mp(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=yP(t,e),s=jo(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Qu(s,e)}function DU(t,e){const n=br(t),r=+Qu(n,e)-+jU(n,e);return Math.round(r/pP)+1}function Ue(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Qi={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ue(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ue(n+1,2)},d(t,e){return Ue(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ue(t.getHours()%12||12,e.length)},H(t,e){return Ue(t.getHours(),e.length)},m(t,e){return Ue(t.getMinutes(),e.length)},s(t,e){return Ue(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ue(i,e.length)}},Ta={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qi.y(t,e)},Y:function(t,e,n,r){const i=yP(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Ue(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ue(s,e.length)},R:function(t,e){const n=gP(t);return Ue(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ue(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ue(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ue(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Qi.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ue(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=DU(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ue(i,e.length)},I:function(t,e,n){const r=OU(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ue(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Qi.d(t,e)},D:function(t,e,n){const r=MU(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ue(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ue(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ue(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ue(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Ta.noon:r===0?i=Ta.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Ta.evening:r>=12?i=Ta.afternoon:r>=4?i=Ta.morning:i=Ta.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Qi.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ue(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ue(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Qi.s(t,e)},S:function(t,e){return Qi.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return $T(r);case"XXXX":case"XX":return oo(r);case"XXXXX":case"XXX":default:return oo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return $T(r);case"xxxx":case"xx":return oo(r);case"xxxxx":case"xxx":default:return oo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+HT(r,":");case"OOOO":default:return"GMT"+oo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+HT(r,":");case"zzzz":default:return"GMT"+oo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ue(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ue(r,e.length)}};function HT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ue(s,2)}function $T(t,e){return t%60===0?(t>0?"-":"+")+Ue(Math.abs(t)/60,2):oo(t,e)}function oo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ue(Math.trunc(r/60),2),s=Ue(r%60,2);return n+i+e+s}const GT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},FU=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return GT(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",GT(r,e)).replace("{{time}}",vP(i,e))},VU={p:vP,P:FU},UU=/^D+$/,zU=/^Y+$/,BU=["D","DD","YY","YYYY"];function WU(t){return UU.test(t)}function qU(t){return zU.test(t)}function HU(t,e,n){const r=$U(t,e,n);if(console.warn(r),BU.includes(t))throw new RangeError(r)}function $U(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const GU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZU=/^'([^]*?)'?$/,QU=/''/g,YU=/[a-zA-Z]/;function mu(t,e,n){var g,_,x,E,C,N,M,b;const r=mp(),i=(n==null?void 0:n.locale)??r.locale??LU,s=(n==null?void 0:n.firstWeekContainsDate)??((_=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(x=r.locale)==null?void 0:x.options)==null?void 0:E.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((N=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:N.weekStartsOn)??r.weekStartsOn??((b=(M=r.locale)==null?void 0:M.options)==null?void 0:b.weekStartsOn)??0,c=br(t);if(!eU(c))throw new RangeError("Invalid time value");let u=e.match(KU).map(I=>{const S=I[0];if(S==="p"||S==="P"){const O=VU[S];return O(I,i.formatLong)}return I}).join("").match(GU).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const S=I[0];if(S==="'")return{isToken:!1,value:XU(I)};if(qT[S])return{isToken:!0,value:I};if(S.match(YU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:I}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const m={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return u.map(I=>{if(!I.isToken)return I.value;const S=I.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&qU(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&WU(S))&&HU(S,e,String(t));const O=qT[S[0]];return O(c,S,i.localize,m)}).join("")}function XU(t){const e=t.match(ZU);return e?e[1].replace(QU,"'"):t}const JU={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},ez=(t,e,n)=>{let r;const i=JU[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},tz={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},nz={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},rz={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iz={date:tl({formats:tz,defaultWidth:"full"}),time:tl({formats:nz,defaultWidth:"full"}),dateTime:tl({formats:rz,defaultWidth:"full"})},sz={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},oz={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},az=(t,e,n,r)=>e.getHours()!==1?oz[t]:sz[t],lz={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},cz={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},uz={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},hz={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},dz={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},fz={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},mz=(t,e)=>Number(t)+"",pz={ordinalNumber:mz,era:Mr({values:lz,defaultWidth:"wide"}),quarter:Mr({values:cz,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Mr({values:uz,defaultWidth:"wide"}),day:Mr({values:hz,defaultWidth:"wide"}),dayPeriod:Mr({values:dz,defaultWidth:"wide",formattingValues:fz,defaultFormattingWidth:"wide"})},gz=/^(\d+)()?/i,_z=/\d+/i,yz={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},vz={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},xz={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},wz={any:[/1/i,/2/i,/3/i,/4/i]},Ez={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Tz={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},bz={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Iz={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Cz={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},kz={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Sz={ordinalNumber:_P({matchPattern:gz,parsePattern:_z,valueCallback:function(t){return parseInt(t,10)}}),era:Or({matchPatterns:yz,defaultMatchWidth:"wide",parsePatterns:vz,defaultParseWidth:"any"}),quarter:Or({matchPatterns:xz,defaultMatchWidth:"wide",parsePatterns:wz,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Or({matchPatterns:Ez,defaultMatchWidth:"wide",parsePatterns:Tz,defaultParseWidth:"any"}),day:Or({matchPatterns:bz,defaultMatchWidth:"wide",parsePatterns:Iz,defaultParseWidth:"any"}),dayPeriod:Or({matchPatterns:Cz,defaultMatchWidth:"any",parsePatterns:kz,defaultParseWidth:"any"})},pu={code:"es",formatDistance:ez,formatLong:iz,formatRelative:az,localize:pz,match:Sz,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Pz(){const[t,e]=B.useState([]),[n,r]=B.useState([]),[i,s]=B.useState(!0),[a,c]=B.useState(!1),[u,m]=B.useState({busqueda:"",formato:"todos",provincia:"",nivel:"todos",soloDisponibles:!0});B.useEffect(()=>{g()},[]),B.useEffect(()=>{_()},[u,t]);const g=async()=>{try{const C=await mP();e(C)}catch(C){console.error("Error:",C)}finally{s(!1)}},_=()=>{let C=[...t];u.busqueda&&(C=C.filter(N=>{var M,b,I;return((M=N.localidad)==null?void 0:M.toLowerCase().includes(u.busqueda.toLowerCase()))||((b=N.barrio)==null?void 0:b.toLowerCase().includes(u.busqueda.toLowerCase()))||((I=N.nombreCancha)==null?void 0:I.toLowerCase().includes(u.busqueda.toLowerCase()))})),u.formato!=="todos"&&(C=C.filter(N=>N.formato===u.formato)),u.provincia&&(C=C.filter(N=>{var M;return(M=N.provincia)==null?void 0:M.toLowerCase().includes(u.provincia.toLowerCase())})),u.nivel!=="todos"&&(C=C.filter(N=>N.nivel===u.nivel||N.nivel==="todos")),u.soloDisponibles&&(C=C.filter(N=>N.jugadores.length<N.jugadoresMaximos)),r(C)},x=C=>{const{name:N,value:M,type:b,checked:I}=C.target;m({...u,[N]:b==="checkbox"?I:M})},E=C=>{try{const N=new Date(C+"T00:00:00");return mu(N,"EEEE d 'de' MMMM",{locale:pu})}catch{return C}};return i?d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsx("main",{className:"container-app py-6",children:d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"spinner w-12 h-12"})})})]}):d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsxs("main",{className:"container-app py-6 pb-24 md:pb-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:" Partidos Disponibles"}),d.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[n.length," ",n.length===1?"partido encontrado":"partidos encontrados"]})]}),d.jsxs(wt,{to:"/partidos/crear",className:"btn-primary flex items-center gap-2 justify-center",children:[d.jsx(iy,{className:"w-5 h-5"}),"Crear Partido"]})]}),d.jsxs("div",{className:"card mb-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(T6,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),d.jsx("input",{type:"text",name:"busqueda",value:u.busqueda,onChange:x,className:"input-field pl-10",placeholder:"Buscar por ubicacin o cancha..."})]}),d.jsxs("button",{onClick:()=>c(!a),className:"btn-secondary flex items-center gap-2 justify-center",children:[d.jsx(uP,{className:"w-5 h-5"}),"Filtros",Object.values(u).some(C=>C&&C!=="todos"&&C!==!0)&&d.jsx("span",{className:"badge bg-primary text-white ml-1",children:""})]})]}),a&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 grid md:grid-cols-4 gap-4 fade-in",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Formato"}),d.jsxs("select",{name:"formato",value:u.formato,onChange:x,className:"input-field text-sm",children:[d.jsx("option",{value:"todos",children:"Todos"}),d.jsx("option",{value:"futbol5",children:"Ftbol 5"}),d.jsx("option",{value:"futbol7",children:"Ftbol 7"}),d.jsx("option",{value:"futbol11",children:"Ftbol 11"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Provincia"}),d.jsx("input",{type:"text",name:"provincia",value:u.provincia,onChange:x,className:"input-field text-sm",placeholder:"Ej: Buenos Aires"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nivel"}),d.jsxs("select",{name:"nivel",value:u.nivel,onChange:x,className:"input-field text-sm",children:[d.jsx("option",{value:"todos",children:"Todos"}),d.jsx("option",{value:"principiante",children:"Principiante"}),d.jsx("option",{value:"intermedio",children:"Intermedio"}),d.jsx("option",{value:"avanzado",children:"Avanzado"})]})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",name:"soloDisponibles",checked:u.soloDisponibles,onChange:x,className:"rounded text-primary"}),d.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Solo con cupos"})]})})]})]}),d.jsx(fu,{size:"medium",className:"mb-6"}),n.length===0?d.jsxs("div",{className:"card text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Mn,{className:"w-8 h-8 text-gray-400"})}),d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No hay partidos disponibles"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:u.busqueda||u.provincia?"Intenta cambiar los filtros de bsqueda":"S el primero en crear un partido"}),d.jsxs(wt,{to:"/partidos/crear",className:"btn-primary inline-flex items-center gap-2",children:[d.jsx(iy,{className:"w-5 h-5"}),"Crear Partido"]})]}):d.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((C,N)=>{var M,b;return d.jsxs("div",{className:"card hover:shadow-2xl transition-all cursor-pointer",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:C.nombreFormato}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mt-1",children:[d.jsx(fp,{className:"w-4 h-4"}),d.jsx("span",{children:E(C.fecha)})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[d.jsx(Tl,{className:"w-4 h-4"}),d.jsxs("span",{children:[C.hora,"hs"]})]})]}),C.jugadores.length<C.jugadoresMaximos?d.jsx("span",{className:"badge bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Abierto"}):d.jsx("span",{className:"badge bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400",children:"Completo"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx(Mn,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary"}),d.jsx("span",{children:C.nombreCancha?`${C.nombreCancha}, ${C.barrio}`:`${C.barrio}, ${C.localidad}`})]}),C.estadoCancha==="alquilada"&&d.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 ml-6",children:" Cancha confirmada"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[d.jsx(xr,{className:"w-4 h-4 inline mr-1"}),"Jugadores"]}),d.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[C.jugadores.length,"/",C.jugadoresMaximos]})]}),d.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${C.jugadores.length/C.jugadoresMaximos*100}%`}})})]}),d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold text-sm",children:((M=C.anfitrionNombre)==null?void 0:M.charAt(0))||"A"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Anfitrin"}),d.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((b=C.anfitrionNombre)==null?void 0:b.split(" ")[0])||"Usuario"})]})]}),C.costoPorJugador&&d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Costo"}),d.jsxs("p",{className:"text-sm font-bold text-primary",children:["$",C.costoPorJugador]})]})]}),d.jsx(wt,{to:`/partidos/${C.id}`,className:"btn-primary w-full mt-4 text-center",children:"Ver Detalles"}),(N+1)%6===0&&N!==n.length-1&&d.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:d.jsx(fu,{size:"small",className:"my-4"})})]},C.id)})})]})]})}const Nz=()=>({reproducirSonido:()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),n=e.createOscillator(),r=e.createGain();n.connect(r),r.connect(e.destination),n.frequency.value=800,n.type="sine",r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),n.start(e.currentTime),n.stop(e.currentTime+.3)}catch{console.log("No se pudo reproducir sonido de notificacin")}}});function Az({partidoId:t,jugadores:e=[]}){const{user:n,currentUser:r}=Tr(),[i,s]=B.useState([]),[a,c]=B.useState(""),[u,m]=B.useState(!1),[g,_]=B.useState(!0),x=B.useRef(null),E=B.useRef(null),C=B.useRef(0),{reproducirSonido:N}=Nz();B.useEffect(()=>{if(!t)return;_(!0);const S=V6(t,O=>{if(s(O),_(!1),C.current>0&&O.length>C.current){const z=O[O.length-1];z.usuarioId!==n.uid&&!z.esSistema&&N()}C.current=O.length,setTimeout(()=>{var z;(z=x.current)==null||z.scrollIntoView({behavior:"smooth"})},100)});return()=>{S&&S()}},[t,n.uid,N]);const M=async S=>{var O;if(S.preventDefault(),!(!a.trim()||u)){m(!0);try{await F6(t,n.uid,(r==null?void 0:r.nombre)||n.displayName||"Usuario",a,(r==null?void 0:r.fotoURL)||n.photoURL),c(""),(O=E.current)==null||O.focus()}catch(z){console.error("Error al enviar mensaje:",z),alert("No se pudo enviar el mensaje. Intent de nuevo.")}finally{m(!1)}}},b=S=>{if(!S)return"";try{const O=new Date(S),z=new Date,H=z-O;return H<6e4?"Ahora":H<36e5?`Hace ${Math.floor(H/6e4)} min`:O.toDateString()===z.toDateString()?mu(O,"HH:mm",{locale:pu}):H<7*24*60*60*1e3?mu(O,"EEE HH:mm",{locale:pu}):mu(O,"dd/MM HH:mm",{locale:pu})}catch{return""}},I=S=>{if(!S)return"?";const O=S.split(" ");return O.length>=2?(O[0][0]+O[1][0]).toUpperCase():S.substring(0,2).toUpperCase()};return g?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx(sm,{className:"w-8 h-8 animate-spin text-primary"})}):d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(xr,{className:"w-5 h-5 text-primary"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:"Chat del Partido"}),d.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.length," ",e.length===1?"participante":"participantes"]})]})]})}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"400px"},children:[i.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No hay mensajes todava"}),d.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"S el primero en enviar un mensaje!"})]}):i.map(S=>{const O=S.usuarioId===n.uid;return S.esSistema||S.usuarioId==="sistema"?d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs px-3 py-1 rounded-full",children:S.mensaje})},S.id):d.jsxs("div",{className:`flex gap-2 ${O?"flex-row-reverse":"flex-row"}`,children:[d.jsx("div",{className:"flex-shrink-0",children:S.usuarioFoto?d.jsx("img",{src:S.usuarioFoto,alt:S.usuarioNombre,className:"w-8 h-8 rounded-full object-cover"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-white text-xs font-bold",children:I(S.usuarioNombre)})}),d.jsxs("div",{className:`flex-1 max-w-[70%] ${O?"items-end":"items-start"} flex flex-col`,children:[!O&&d.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1 px-1",children:S.usuarioNombre}),d.jsx("div",{className:`px-4 py-2 rounded-2xl ${O?"bg-primary text-white rounded-br-sm":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-bl-sm"}`,children:d.jsx("p",{className:"text-sm break-words whitespace-pre-wrap",children:S.mensaje})}),d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 px-1",children:b(S.timestamp)})]})]},S.id)}),d.jsx("div",{ref:x})]}),d.jsxs("form",{onSubmit:M,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{ref:E,type:"text",value:a,onChange:S=>c(S.target.value),placeholder:"Escrib un mensaje...",className:"flex-1 input-field",disabled:u,maxLength:500}),d.jsx("button",{type:"submit",disabled:!a.trim()||u,className:"btn-primary px-4 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:u?d.jsx(sm,{className:"w-5 h-5 animate-spin"}):d.jsx(b6,{className:"w-5 h-5"})})]}),d.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:[a.length,"/500 caracteres"]})]})]})}function Rz(){var A,P,R,j,V,U,D,Qe,Dn,ut,Nt,K;const{id:t}=XR(),e=Os(),{user:n,userProfile:r}=Tr(),[i,s]=B.useState(null),[a,c]=B.useState(!0),[u,m]=B.useState(!1),[g,_]=B.useState(""),[x,E]=B.useState(!1);B.useEffect(()=>{if(!t)return;const ne=O1(mi(rn,"partidos",t),Y=>{Y.exists()?s({id:Y.id,...Y.data()}):_("Partido no encontrado"),c(!1)},Y=>{console.error("Error:",Y),_("Error al cargar el partido"),c(!1)});return()=>ne()},[t]);const C=async()=>{if(!n){e("/login");return}m(!0),_("");try{await z6(t,n.uid)}catch(ne){_("Error al postularse. Intntalo de nuevo."),console.error(ne)}finally{m(!1)}},N=async(ne,Y)=>{m(!0);try{await B6(t,ne,Y)}catch(ce){_("Error al gestionar postulante"),console.error(ce)}finally{m(!1)}},M=()=>{const ne=window.location.href,Y=`nete a este partido de ${i.nombreFormato}! ${ne}`;navigator.share?navigator.share({title:"Picadito App",text:Y,url:ne}):(navigator.clipboard.writeText(ne),alert("Link copiado al portapapeles"))},b=ne=>{try{const Y=new Date(ne+"T00:00:00");return mu(Y,"EEEE d 'de' MMMM",{locale:pu})}catch{return ne}};if(a)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"spinner w-12 h-12"})});if(g||!i)return d.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ry,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:g||"Partido no encontrado"}),d.jsx(wt,{to:"/partidos",className:"btn-primary inline-block",children:"Volver a Partidos"})]})});const I=(n==null?void 0:n.uid)===i.anfitrionId,S=(A=i.postulantes)==null?void 0:A.includes(n==null?void 0:n.uid),O=(P=i.jugadoresAceptados)==null?void 0:P.includes(n==null?void 0:n.uid),z=((R=i.jugadores)==null?void 0:R.length)>=i.jugadoresMaximos,H=i.jugadoresMaximos-(((j=i.jugadores)==null?void 0:j.length)||1);return d.jsxs("div",{className:"min-h-screen bg-grass-pattern",children:[d.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:d.jsx("div",{className:"container-app py-4",children:d.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[d.jsx(sP,{className:"w-5 h-5"}),"Volver"]})})}),d.jsx("main",{className:"container-app py-6 pb-24 md:pb-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[" ",i.nombreFormato]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("span",{className:`badge ${z?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:z?"Completo":`${H} ${H===1?"cupo":"cupos"}`}),d.jsx("span",{className:"badge bg-primary/10 text-primary capitalize",children:i.nivel}),i.tipoPartido==="privado"&&d.jsx("span",{className:"badge bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Privado"})]})]}),d.jsxs("button",{onClick:M,className:"btn-secondary flex items-center gap-2",children:[d.jsx(I6,{className:"w-5 h-5"}),"Compartir"]})]}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2 space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Detalles del Partido"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(fp,{className:"w-5 h-5 text-primary mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b(i.fecha)}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.hora,"hs  ",i.duracion," minutos"]})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Mn,{className:"w-5 h-5 text-primary mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.nombreCancha||i.barrio}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.barrio,", ",i.localidad,", ",i.provincia]}),i.direccion&&d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:[" ",i.direccion]}),i.estadoCancha==="buscando"&&d.jsx("span",{className:"inline-block mt-2 text-xs badge bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Se definir cancha exacta"})]})]}),(i.costoPorJugador||i.costoTotal)&&d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(aP,{className:"w-5 h-5 text-primary mt-0.5"}),d.jsx("div",{children:d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.costoPorJugador?`$${i.costoPorJugador} por jugador`:`$${i.costoTotal} total`})})]}),i.descripcion&&d.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Informacin Adicional"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-line",children:i.descripcion})]}),(i.edadMin||i.edadMax||((V=i.posicionesRequeridas)==null?void 0:V.length)>0)&&d.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Requisitos"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.edadMin&&d.jsxs("span",{className:"badge bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:["Edad mn: ",i.edadMin]}),i.edadMax&&d.jsxs("span",{className:"badge bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:["Edad mx: ",i.edadMax]}),(U=i.posicionesRequeridas)==null?void 0:U.map(ne=>d.jsx("span",{className:"badge bg-primary/10 text-primary",children:ne},ne))]})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[d.jsx(xr,{className:"w-5 h-5"}),"Jugadores (",((D=i.jugadores)==null?void 0:D.length)||1,"/",i.jugadoresMaximos,")"]}),d.jsx("div",{className:"mb-4",children:d.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(((Qe=i.jugadores)==null?void 0:Qe.length)||1)/i.jugadoresMaximos*100}%`}})})}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary/5 rounded-lg",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold",children:((Dn=i.anfitrionNombre)==null?void 0:Dn.charAt(0))||"A"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.anfitrionNombre}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:" Anfitrin"})]})]}),(ut=i.jugadores)==null?void 0:ut.slice(1).map((ne,Y)=>d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center text-gray-700 dark:text-gray-300 font-bold",children:Y+2}),d.jsx("div",{className:"flex-1",children:d.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Jugador ",Y+2]})})]},ne)),Array.from({length:H}).map((ne,Y)=>d.jsxs("div",{className:"flex items-center gap-3 p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[d.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:d.jsx(xr,{className:"w-5 h-5 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Cupo disponible"})]},`vacio-${Y}`))]})]}),(O||I)&&d.jsxs("div",{className:"card p-0 overflow-hidden",children:[d.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary/10 to-accent/10 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[d.jsx(pg,{className:"w-5 h-5"}),"Chat del Partido"]}),d.jsx("button",{onClick:()=>E(!x),className:"text-sm text-primary hover:underline",children:x?"Ocultar":"Mostrar"})]}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Coordin con los dems jugadores"})]}),x&&d.jsx("div",{style:{height:"500px"},children:d.jsx(Az,{partidoId:t,jugadores:i.jugadores||[i.anfitrionId]})})]}),I&&((Nt=i.postulantes)==null?void 0:Nt.length)>0&&d.jsxs("div",{className:"card",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Solicitudes (",i.postulantes.length,")"]}),d.jsx("div",{className:"space-y-3",children:i.postulantes.map(ne=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:"?"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Jugador interesado"}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Esperando respuesta"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>N(ne,"aceptar"),disabled:u||z,className:"p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors disabled:opacity-50",children:d.jsx(FT,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>N(ne,"rechazar"),disabled:u,className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:d.jsx(lm,{className:"w-5 h-5"})})]})]},ne))})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4",children:"Organizado por"}),d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold text-lg",children:((K=i.anfitrionNombre)==null?void 0:K.charAt(0))||"A"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.anfitrionNombre}),d.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[d.jsx(el,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Nuevo"})]})]})]}),I&&d.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Este es tu partido"}),d.jsxs("button",{className:"btn-secondary w-full flex items-center justify-center gap-2",children:[d.jsx(pg,{className:"w-4 h-4"}),"Chat del Partido"]})]})]}),!I&&d.jsx("div",{className:"card",children:O?d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:d.jsx(FT,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),d.jsx("p",{className:"font-bold text-gray-900 dark:text-white mb-1",children:"Ests confirmado!"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Nos vemos en la cancha"}),d.jsxs("button",{className:"btn-primary w-full flex items-center justify-center gap-2",children:[d.jsx(pg,{className:"w-5 h-5"}),"Ir al Chat"]})]}):S?d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:d.jsx(Tl,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),d.jsx("p",{className:"font-bold text-gray-900 dark:text-white mb-1",children:"Solicitud Enviada"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Esperando respuesta del anfitrin"})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:C,disabled:u||z,className:"btn-primary w-full mb-3",children:u?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx("div",{className:"spinner w-5 h-5"}),"Enviando..."]}):z?"Partido Completo":" Unirme al Partido"}),z&&d.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"No hay cupos disponibles"})]})}),d.jsx("div",{className:"card bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(ry,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-1",children:"Recomendacin"}),d.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"Llega 10 minutos antes y trae agua. Que tengas un buen partido!"})]})]})})]})]})]})})]})}function Lz(){return d.jsx(Rz,{})}delete Jt.Icon.Default.prototype._getIconUrl;Jt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function Mz({center:t=[-34.6037,-58.3816],zoom:e=13,partidos:n=[],onPartidoClick:r,userLocation:i,className:s=""}){const a=B.useRef(null),c=B.useRef(null),u=B.useRef([]);return B.useEffect(()=>(c.current||(c.current=Jt.map(a.current).setView(t,e),Jt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(c.current)),()=>{c.current&&(c.current.remove(),c.current=null)}),[]),B.useEffect(()=>{c.current&&t&&c.current.setView(t,e)},[t,e]),B.useEffect(()=>{if(c.current&&i){const m=Jt.divIcon({className:"user-location-marker",html:'<div style="background-color: #3b82f6; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.3);"></div>',iconSize:[22,22],iconAnchor:[11,11]});Jt.marker(i,{icon:m}).addTo(c.current).bindPopup("<b>Tu ubicacin</b>").openPopup(),c.current.setView(i,14)}},[i]),B.useEffect(()=>{if(c.current&&(u.current.forEach(m=>m.remove()),u.current=[],n.forEach(m=>{var E;if(!m.lat||!m.lng)return;const g=Jt.divIcon({className:"partido-marker",html:`
          <div style="
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            width: 40px;
            height: 40px;
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
          ">
            <span style="
              transform: rotate(45deg);
              color: white;
              font-size: 20px;
              font-weight: bold;
            "></span>
          </div>
        `,iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),_=Jt.marker([m.lat,m.lng],{icon:g}).addTo(c.current),x=`
        <div style="min-width: 200px;">
          <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">
            ${m.nombreFormato}
          </h3>
          <p style="margin: 4px 0; font-size: 14px; color: #666;">
             ${m.fecha}  ${m.hora}hs
          </p>
          <p style="margin: 4px 0; font-size: 14px; color: #666;">
             ${m.barrio}, ${m.localidad}
          </p>
          <p style="margin: 4px 0; font-size: 14px; color: #666;">
             ${((E=m.jugadores)==null?void 0:E.length)||1}/${m.jugadoresMaximos} jugadores
          </p>
          <button 
            onclick="window.location.href='/partidos/${m.id}'"
            style="
              margin-top: 8px;
              width: 100%;
              padding: 8px;
              background: var(--color-primary);
              color: white;
              border: none;
              border-radius: 6px;
              cursor: pointer;
              font-weight: 500;
            "
          >
            Ver Detalles
          </button>
        </div>
      `;_.bindPopup(x),r&&_.on("click",()=>r(m)),u.current.push(_)}),n.length>0&&n.some(m=>m.lat&&m.lng))){const m=Jt.latLngBounds(n.filter(g=>g.lat&&g.lng).map(g=>[g.lat,g.lng]));c.current.fitBounds(m,{padding:[50,50]})}},[n,r]),d.jsx("div",{ref:a,className:`rounded-xl overflow-hidden ${s}`,style:{height:"100%",minHeight:"400px"}})}function Oz(){const t=Os(),{currentUser:e}=Tr(),[n,r]=B.useState([]),[i,s]=B.useState([]),[a,c]=B.useState(!0),[u,m]=B.useState(!1),[g,_]=B.useState({formato:"",distancia:50,fecha:"todas"}),{location:x,loading:E,obtenerUbicacion:C}=q6();B.useEffect(()=>{N()},[]),B.useEffect(()=>{M()},[n,g,x]);const N=async()=>{try{c(!0);const z=(await mP()).filter(H=>H.lat&&H.lng);r(z)}catch(O){console.error("Error al cargar partidos:",O)}finally{c(!1)}},M=()=>{let O=[...n];if(g.formato&&(O=O.filter(z=>z.nombreFormato===g.formato)),x&&g.distancia&&(O=O.map(z=>{const H=b(x.lat,x.lng,z.lat,z.lng);return{...z,distancia:H}}).filter(z=>z.distancia<=g.distancia),O.sort((z,H)=>z.distancia-H.distancia)),g.fecha==="hoy"){const z=new Date().toISOString().split("T")[0];O=O.filter(H=>H.fecha===z)}else if(g.fecha==="semana"){const z=new Date,H=new Date(z.getTime()+7*24*60*60*1e3);O=O.filter(A=>{const P=new Date(A.fecha);return P>=z&&P<=H})}s(O)},b=(O,z,H,A)=>{const R=(H-O)*Math.PI/180,j=(A-z)*Math.PI/180,V=Math.sin(R/2)*Math.sin(R/2)+Math.cos(O*Math.PI/180)*Math.cos(H*Math.PI/180)*Math.sin(j/2)*Math.sin(j/2);return 6371*(2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)))},I=O=>{t(`/partidos/${O.id}`)},S=[...new Set(n.map(O=>O.nombreFormato))];return d.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[d.jsx(Mn,{className:"w-8 h-8"}),"Mapa de Partidos"]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Encontr los partidos ms cercanos a tu ubicacin"})]}),d.jsxs("div",{className:"mb-4 flex flex-wrap gap-3",children:[d.jsxs("button",{onClick:C,disabled:E,className:"btn-primary flex items-center gap-2",children:[d.jsx(hP,{className:`w-5 h-5 ${E?"animate-spin":""}`}),E?"Obteniendo...":"Mi Ubicacin"]}),d.jsxs("button",{onClick:()=>m(!u),className:"btn-secondary flex items-center gap-2",children:[d.jsx(uP,{className:"w-5 h-5"}),"Filtros",(g.formato||g.fecha!=="todas")&&d.jsx("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full",children:[g.formato,g.fecha!=="todas"].filter(Boolean).length})]}),x&&d.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg",children:[d.jsx(Mn,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:"Ubicacin detectada"})]}),d.jsxs("div",{className:"ml-auto text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[i.length," partidos encontrados"]})]}),u&&d.jsxs("div",{className:"card mb-4 p-4 bg-gray-50 dark:bg-gray-800/50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"font-semibold",children:"Filtros de bsqueda"}),d.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:d.jsx(lm,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Formato"}),d.jsxs("select",{value:g.formato,onChange:O=>_({...g,formato:O.target.value}),className:"input-field w-full",children:[d.jsx("option",{value:"",children:"Todos los formatos"}),S.map(O=>d.jsx("option",{value:O,children:O},O))]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Distancia mxima: ",g.distancia,"km"]}),d.jsx("input",{type:"range",min:"1",max:"100",value:g.distancia,onChange:O=>_({...g,distancia:parseInt(O.target.value)}),disabled:!x,className:"w-full"}),!x&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Activa tu ubicacin para usar este filtro"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fecha"}),d.jsxs("select",{value:g.fecha,onChange:O=>_({...g,fecha:O.target.value}),className:"input-field w-full",children:[d.jsx("option",{value:"todas",children:"Todas las fechas"}),d.jsx("option",{value:"hoy",children:"Hoy"}),d.jsx("option",{value:"semana",children:"Esta semana"})]})]})]}),d.jsx("button",{onClick:()=>_({formato:"",distancia:50,fecha:"todas"}),className:"mt-4 text-sm text-primary hover:underline",children:"Limpiar filtros"})]}),d.jsx("div",{className:"card p-0 overflow-hidden",style:{height:"calc(100vh - 350px)"},children:a?d.jsx("div",{className:"h-full flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cargando partidos..."})]})}):d.jsx(Mz,{partidos:i,userLocation:x,onPartidoClick:I,className:"h-full"})}),d.jsxs("div",{className:"mt-6 md:hidden",children:[d.jsx("h3",{className:"font-semibold mb-3",children:"Lista de partidos"}),d.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(O=>{var z;return d.jsxs("div",{onClick:()=>I(O),className:"card p-4 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("h4",{className:"font-semibold",children:O.nombreFormato}),O.distancia&&d.jsx("span",{className:"text-sm text-primary font-medium",children:O.distancia<1?`${Math.round(O.distancia*1e3)}m`:`${O.distancia.toFixed(1)}km`})]}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",O.fecha,"  ",O.hora,"hs"]}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",O.barrio,", ",O.localidad]}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",((z=O.jugadores)==null?void 0:z.length)||1,"/",O.jugadoresMaximos]})]},O.id)})})]})]})}const jz=async(t,e)=>{try{const n={userId:t,formato:e.formato||"futbol5",zona:e.zona||"",nivel:e.nivel||"todos",rangoFecha:e.rangoFecha||"semana",timestamp:Ni(),estado:"buscando"};return{id:(await rp(Us(rn,"matchmaking"),n)).id,...n}}catch(n){throw console.error("Error al unirse a la cola:",n),n}},KT=async t=>{try{return await l0(mi(rn,"matchmaking",t)),!0}catch(e){throw console.error("Error al salir de la cola:",e),e}},Dz=async(t,e)=>{try{const n=Jm(Us(rn,"matchmaking"),xl("estado","==","buscando"),xl("formato","==",e.formato)),r=await np(n),i=[];r.forEach(a=>{const c=a.data();c.userId!==t&&i.push({id:a.id,...c})});let s=i;return e.zona&&(s=s.filter(a=>a.zona===e.zona||a.zona===""||e.zona==="")),e.nivel&&e.nivel!=="todos"&&(s=s.filter(a=>a.nivel===e.nivel||a.nivel==="todos")),s}catch(n){return console.error("Error al buscar emparejamientos:",n),[]}},Fz=async(t,e,n)=>{try{const i={futbol5:{nombre:"Ftbol 5",jugadores:10},futbol7:{nombre:"Ftbol 7",jugadores:14},futbol11:{nombre:"Ftbol 11",jugadores:22}}[e],s=t[0],a=new Date,c=6-a.getDay(),u=new Date(a);u.setDate(a.getDate()+(c>0?c:7));const m={nombreFormato:i.nombre,formato:e,jugadoresMaximos:i.jugadores,jugadores:t.map(_=>_.userId),jugadoresAceptados:t.map(_=>_.userId),postulantes:[],anfitrionId:s.userId,anfitrionNombre:"Solo Queue",fecha:u.toISOString().split("T")[0],hora:"18:00",duracion:90,estadoCancha:"buscando",provincia:"Buenos Aires",localidad:n||"CABA",barrio:n||"A definir",direccion:"",nombreCancha:"",tipoPartido:"publico",costoTotal:"",costoPorJugador:"",edadMin:"",edadMax:"",nivel:"todos",posicionesRequeridas:[],descripcion:`Partido creado automticamente por Solo Queue con ${t.length} jugadores.`,esSoloQueue:!0,estado:"abierto",createdAt:Ni(),updatedAt:Ni()},g=await rp(Us(rn,"partidos"),m);await G0(g.id,` Partido creado por Solo Queue! ${t.length} jugadores emparejados. Coordin los detalles en este chat.`);for(const _ of t)_.colaId&&await l0(mi(rn,"matchmaking",_.colaId));return{id:g.id,...m}}catch(r){throw console.error("Error al crear partido automtico:",r),r}},Vz=async t=>{try{const e=Jm(Us(rn,"matchmaking"),xl("userId","==",t),xl("estado","==","buscando")),n=await np(e);if(!n.empty){const r=n.docs[0];return{id:r.id,...r.data()}}return null}catch(e){return console.error("Error al obtener estado de cola:",e),null}},Uz=async()=>{try{const t=Jm(Us(rn,"matchmaking"),xl("estado","==","buscando")),e=await np(t),n={total:0,porFormato:{futbol5:0,futbol7:0,futbol11:0},porNivel:{principiante:0,intermedio:0,avanzado:0,todos:0}};return e.forEach(r=>{const i=r.data();n.total++,n.porFormato[i.formato]=(n.porFormato[i.formato]||0)+1,n.porNivel[i.nivel]=(n.porNivel[i.nivel]||0)+1}),n}catch(t){return console.error("Error al obtener estadsticas:",t),null}};function zz(){const{user:t,currentUser:e}=Tr(),n=Os(),[r,i]=B.useState(!1),[s,a]=B.useState(null),[c,u]=B.useState(!1),[m,g]=B.useState(0),[_,x]=B.useState(null),[E,C]=B.useState({formato:"futbol5",zona:(e==null?void 0:e.zona)||"",nivel:(e==null?void 0:e.nivel)||"todos",rangoFecha:"semana"});B.useEffect(()=>{N(),M()},[]),B.useEffect(()=>{let z;return r&&(z=setInterval(()=>{g(H=>H+1),b()},5e3)),()=>clearInterval(z)},[r,E]);const N=async()=>{const z=await Vz(t.uid);z&&(i(!0),a(z.id),C({formato:z.formato,zona:z.zona,nivel:z.nivel,rangoFecha:z.rangoFecha}))},M=async()=>{const z=await Uz();x(z)},b=async()=>{try{const z=await Dz(t.uid,E),H={futbol5:10,futbol7:14,futbol11:22}[E.formato];if(z.length>=H-1){const A=[{userId:t.uid,colaId:s},...z.slice(0,H-1)],P=await Fz(A,E.formato,E.zona);s&&await KT(s),i(!1),a(null),n(`/partidos/${P.id}`)}}catch(z){console.error("Error al buscar partida:",z)}},I=async()=>{if(!t){n("/login");return}u(!0);try{const z=await jz(t.uid,E);a(z.id),i(!0),g(0),await M()}catch(z){console.error("Error:",z),alert("No se pudo unir a la cola. Intntalo de nuevo.")}finally{u(!1)}},S=async()=>{s&&await KT(s),i(!1),a(null),g(0),await M()},O=z=>{const H=Math.floor(z/60),A=z%60;return`${H}:${A.toString().padStart(2,"0")}`};return d.jsx("div",{className:"min-h-screen bg-grass-pattern py-6 pb-24 md:pb-6",children:d.jsxs("div",{className:"container-app max-w-4xl",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full mb-4",children:d.jsx(bl,{className:"w-8 h-8 text-white"})}),d.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Solo Queue"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Busc partida automticamente. El sistema te emparejar con otros jugadores segn tus preferencias."})]}),r?d.jsxs("div",{className:"card text-center",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-full mb-4 animate-pulse",children:d.jsx(sm,{className:"w-10 h-10 text-white animate-spin"})}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Buscando Partida..."}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Estamos buscando jugadores compatibles con tus preferencias"}),d.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary",children:[d.jsx(Tl,{className:"w-5 h-5"}),d.jsx("span",{className:"text-lg font-mono",children:O(m)})]})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-semibold mb-3",children:"Tus Preferencias:"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(po,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"capitalize",children:E.formato.replace("futbol","Ftbol ")})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Mn,{className:"w-4 h-4 text-primary"}),d.jsx("span",{children:E.zona||"Cualquier zona"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(xr,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"capitalize",children:E.nivel})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tl,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"capitalize",children:E.rangoFecha})]})]})]}),d.jsx("button",{onClick:S,className:"btn-secondary w-full",children:"Cancelar Bsqueda"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"card mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(S6,{className:"w-5 h-5 text-primary"}),"Configur tus Preferencias"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Formato"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:["futbol5","futbol7","futbol11"].map(z=>d.jsxs("button",{onClick:()=>C({...E,formato:z}),className:`p-3 rounded-lg border-2 transition-all ${E.formato===z?"border-primary bg-primary/10":"border-gray-300 dark:border-gray-600"}`,children:[d.jsx("p",{className:"font-semibold capitalize",children:z.replace("futbol","Ftbol ")}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:z==="futbol5"?"10 jugadores":z==="futbol7"?"14 jugadores":"22 jugadores"})]},z))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Zona (Opcional)"}),d.jsx("input",{type:"text",value:E.zona,onChange:z=>C({...E,zona:z.target.value}),className:"input-field w-full",placeholder:"Ej: Palermo, Belgrano, Centro"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Dej vaco para buscar en cualquier zona"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nivel"}),d.jsxs("select",{value:E.nivel,onChange:z=>C({...E,nivel:z.target.value}),className:"input-field w-full",children:[d.jsx("option",{value:"todos",children:"Todos los niveles"}),d.jsx("option",{value:"principiante",children:"Principiante"}),d.jsx("option",{value:"intermedio",children:"Intermedio"}),d.jsx("option",{value:"avanzado",children:"Avanzado"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cundo quers jugar"}),d.jsxs("select",{value:E.rangoFecha,onChange:z=>C({...E,rangoFecha:z.target.value}),className:"input-field w-full",children:[d.jsx("option",{value:"hoy",children:"Hoy"}),d.jsx("option",{value:"semana",children:"Esta semana"}),d.jsx("option",{value:"mes",children:"Este mes"})]})]})]}),d.jsx("button",{onClick:I,disabled:c,className:"btn-primary w-full mt-6 py-3 text-lg",children:c?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(sm,{className:"w-5 h-5 animate-spin"}),"Unindose..."]}):d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(bl,{className:"w-5 h-5"}),"Buscar Partida"]})})]}),_&&d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[d.jsx(xr,{className:"w-5 h-5"}),"Jugadores en Cola: ",_.total]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[d.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx("p",{className:"font-bold text-lg",children:_.porFormato.futbol5}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ftbol 5"})]}),d.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx("p",{className:"font-bold text-lg",children:_.porFormato.futbol7}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ftbol 7"})]}),d.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx("p",{className:"font-bold text-lg",children:_.porFormato.futbol11}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ftbol 11"})]})]})]})]}),d.jsxs("div",{className:"card bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 mt-6",children:[d.jsx("h3",{className:"font-semibold mb-2 text-blue-900 dark:text-blue-300",children:"Cmo funciona Solo Queue?"}),d.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),d.jsx("span",{children:"Configurs tus preferencias de formato, zona, nivel y fecha"})]}),d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),d.jsx("span",{children:"El sistema busca otros jugadores con preferencias similares"})]}),d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),d.jsx("span",{children:"Cuando hay suficientes jugadores, se crea un partido automticamente"})]}),d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-blue-500 mt-0.5",children:""}),d.jsx("span",{children:"Coordin los detalles finales (cancha, horario) en el chat del partido"})]})]})]})]})})}const Ar=20,Ad=15,ZT=[{x:10,y:10}],_g={x:1,y:0},Bz=150;function Wz(){const[t,e]=B.useState(ZT),[n,r]=B.useState({x:15,y:15}),[i,s]=B.useState(_g),[a,c]=B.useState(!1),[u,m]=B.useState(0),[g,_]=B.useState(!1),[x,E]=B.useState(!1),C=B.useRef(i),N=B.useRef(null),M=B.useRef(0),b=B.useCallback(()=>{const H={x:Math.floor(Math.random()*Ar),y:Math.floor(Math.random()*Ar)};r(H)},[]);B.useCallback((H,A)=>H.x<0||H.x>=Ar||H.y<0||H.y>=Ar?!0:A.slice(0,-1).some(P=>P.x===H.x&&P.y===H.y),[]);const I=B.useCallback(()=>{a||x||(M.current=Date.now(),e(H=>{const A={x:H[0].x+C.current.x,y:H[0].y+C.current.y};if(A.x<0||A.x>=Ar||A.y<0||A.y>=Ar||H.slice(0,-1).some(j=>j.x===A.x&&j.y===A.y))return c(!0),_(!1),H;const R=[A,...H];return A.x===n.x&&A.y===n.y?(m(j=>j+10),b()):R.pop(),R}))},[a,x,n,b]);B.useEffect(()=>(g&&!a&&!x&&(N.current=setInterval(I,Bz)),()=>{N.current&&clearInterval(N.current)}),[g,a,x,I]),B.useEffect(()=>{const H=A=>{if(!g||a)return;const P=A.key;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(P)&&A.preventDefault();let R=null;P==="ArrowUp"&&C.current.y===0?R={x:0,y:-1}:P==="ArrowDown"&&C.current.y===0?R={x:0,y:1}:P==="ArrowLeft"&&C.current.x===0?R={x:-1,y:0}:P==="ArrowRight"&&C.current.x===0&&(R={x:1,y:0}),R&&(C.current=R,s(R))};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[g,a]);const S=H=>{!g||a||(H.y!==0&&C.current.y===0||H.x!==0&&C.current.x===0)&&(C.current=H,s(H))},O=()=>{e(ZT),s(_g),C.current=_g,c(!1),m(0),_(!0),E(!1),b()},z=()=>{!a&&g&&E(H=>!H)};return d.jsxs("div",{className:"flex flex-col items-center gap-4 p-4",children:[d.jsx("div",{className:"w-full max-w-md bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg p-4 shadow-lg",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Puntaje"}),d.jsx("p",{className:"text-3xl font-bold",children:u})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm opacity-90",children:"Longitud"}),d.jsx("p",{className:"text-3xl font-bold",children:t.length})]})]})}),d.jsxs("div",{className:"relative bg-gradient-to-br from-green-600 to-green-700 rounded-lg shadow-2xl p-2",children:[d.jsxs("div",{className:"grid gap-0 bg-green-800 rounded",style:{gridTemplateColumns:`repeat(${Ar}, ${Ad}px)`,gridTemplateRows:`repeat(${Ar}, ${Ad}px)`,width:Ar*Ad,height:Ar*Ad},children:[t.map((H,A)=>d.jsx("div",{className:`${A===0?"bg-yellow-400 border-2 border-yellow-500":"bg-blue-500 border border-blue-600"} rounded-sm transition-all duration-75`,style:{gridColumn:H.x+1,gridRow:H.y+1},children:A===0&&d.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px]",children:""})},`snake-${A}`)),d.jsx("div",{className:"bg-white rounded-full shadow-lg flex items-center justify-center animate-pulse",style:{gridColumn:n.x+1,gridRow:n.y+1},children:d.jsx("span",{className:"text-[10px]",children:""})})]}),a&&d.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg",children:d.jsxs("div",{className:"text-center text-white p-6",children:[d.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Game Over!"}),d.jsxs("p",{className:"text-lg mb-4",children:["Puntaje Final: ",u]}),d.jsxs("button",{onClick:O,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 mx-auto transition-colors",children:[d.jsx(dP,{className:"w-5 h-5"}),"Jugar de Nuevo"]})]})}),x&&!a&&d.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center rounded-lg",children:d.jsx("div",{className:"text-center text-white",children:d.jsx("h3",{className:"text-2xl font-bold",children:"PAUSA"})})}),!g&&!a&&d.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center rounded-lg",children:d.jsxs("div",{className:"text-center text-white p-6",children:[d.jsx("h3",{className:"text-xl font-bold mb-4",children:" Snake Futbolero"}),d.jsx("p",{className:"text-sm mb-4",children:"Atrapa las pelotas y crece!"}),d.jsx("button",{onClick:O,className:"bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors",children:"Comenzar"})]})})]}),d.jsx("div",{className:"w-full max-w-md",children:g&&!a&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:z,className:"w-full mb-3 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:x?"Reanudar":"Pausar"}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("div",{className:"col-start-2",children:d.jsx("button",{onClick:()=>S({x:0,y:-1}),className:"w-full aspect-square bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-lg flex items-center justify-center shadow-lg transition-colors",disabled:!g||a,children:d.jsx(y6,{className:"w-8 h-8"})})}),d.jsx("div",{className:"col-start-1 row-start-2",children:d.jsx("button",{onClick:()=>S({x:-1,y:0}),className:"w-full aspect-square bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-lg flex items-center justify-center shadow-lg transition-colors",disabled:!g||a,children:d.jsx(sP,{className:"w-8 h-8"})})}),d.jsx("div",{className:"col-start-2 row-start-2",children:d.jsx("button",{onClick:()=>S({x:0,y:1}),className:"w-full aspect-square bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-lg flex items-center justify-center shadow-lg transition-colors",disabled:!g||a,children:d.jsx(_6,{className:"w-8 h-8"})})}),d.jsx("div",{className:"col-start-3 row-start-2",children:d.jsx("button",{onClick:()=>S({x:1,y:0}),className:"w-full aspect-square bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-lg flex items-center justify-center shadow-lg transition-colors",disabled:!g||a,children:d.jsx(oP,{className:"w-8 h-8"})})})]})]})}),d.jsxs("div",{className:"w-full max-w-md bg-gray-100 dark:bg-gray-800 rounded-lg p-4 text-sm",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"Instrucciones:"}),d.jsxs("ul",{className:"space-y-1 text-gray-700 dark:text-gray-300",children:[d.jsx("li",{children:" El arquero (amarillo) atrapa pelotas "}),d.jsx("li",{children:" Cada pelota suma 10 puntos"}),d.jsx("li",{children:" Desktop: Usa las flechas del teclado"}),d.jsx("li",{children:" Mobile: Usa los botones en pantalla"}),d.jsx("li",{children:" No choques con las paredes ni contigo mismo!"})]})]})]})}const ba=[{id:1,pregunta:"Quin es considerado el mximo dolo de Boca Juniors?",opciones:["Diego Maradona","Juan Romn Riquelme","Martn Palermo","Carlos Tevez"],respuestaCorrecta:0},{id:2,pregunta:"En qu ao gan Argentina su tercera Copa del Mundo?",opciones:["2014","2018","2022","2010"],respuestaCorrecta:2},{id:3,pregunta:"Cuntas Copas Libertadores tiene River Plate?",opciones:["3","4","5","6"],respuestaCorrecta:1},{id:4,pregunta:"Qu jugador argentino gan ms Balones de Oro?",opciones:["Diego Maradona","Alfredo Di Stfano","Lionel Messi","Gabriel Batistuta"],respuestaCorrecta:2},{id:5,pregunta:"En qu estadio se juega el Superclsico argentino?",opciones:["Estadio Monumental","La Bombonera","Ambos estadios alternadamente","Estadio nico de La Plata"],respuestaCorrecta:2}],qz=[{posicion:1,nombre:"Messi10",puntos:450,avatar:""},{posicion:2,nombre:"DiegoEterno",puntos:420,avatar:""},{posicion:3,nombre:"Riquelme5",puntos:380,avatar:""},{posicion:4,nombre:"BatiGol",puntos:350,avatar:""},{posicion:5,nombre:"ElPibe",puntos:320,avatar:""},{posicion:6,nombre:"Kun_Aguero",puntos:300,avatar:""},{posicion:7,nombre:"AngelDi",puntos:280,avatar:""},{posicion:8,nombre:"Lautaro22",puntos:250,avatar:""},{posicion:9,nombre:"Dibu_23",puntos:220,avatar:""},{posicion:10,nombre:"Enzo_River",puntos:200,avatar:""}];function Hz(){const[t,e]=B.useState(0),[n,r]=B.useState([]),[i,s]=B.useState(!1),[a,c]=B.useState(null),[u,m]=B.useState(!1),g=ba[t],_=n.filter(N=>N.correcta).length*20,x=N=>{if(a!==null)return;const M=N===g.respuestaCorrecta;c(N),s(!0),setTimeout(()=>{r([...n,{correcta:M}]),t<ba.length-1?(e(t+1),c(null),s(!1)):m(!0)},1500)},E=()=>{e(0),r([]),s(!1),c(null),m(!1)},C=N=>a===null?"bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 border-2 border-gray-300 dark:border-gray-600":N===g.respuestaCorrecta?"bg-green-500 text-white border-2 border-green-600":N===a&&N!==g.respuestaCorrecta?"bg-red-500 text-white border-2 border-red-600":"bg-gray-200 dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 opacity-50";return d.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 p-4",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6",children:u?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(po,{className:"w-24 h-24 mx-auto mb-4 text-yellow-500"}),d.jsx("h3",{className:"text-3xl font-bold mb-2 text-gray-800 dark:text-white",children:"Juego Terminado!"}),d.jsxs("p",{className:"text-xl mb-6 text-gray-600 dark:text-gray-400",children:["Puntaje Final: ",d.jsx("span",{className:"font-bold text-green-600",children:_})," / 100"]}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Respuestas correctas: ",n.filter(N=>N.correcta).length," / ",ba.length]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:d.jsx("div",{className:"bg-green-500 h-4 rounded-full transition-all duration-500",style:{width:`${n.filter(N=>N.correcta).length/ba.length*100}%`}})})]}),d.jsxs("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold flex items-center gap-2 mx-auto transition-colors",children:[d.jsx(dP,{className:"w-5 h-5"}),"Jugar de Nuevo"]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:" Cunto sabs de Ftbol"}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pregunta ",t+1," de ",ba.length]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Puntaje"}),d.jsx("p",{className:"text-3xl font-bold text-green-600",children:_})]})]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-6",children:d.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(t+1)/ba.length*100}%`}})}),d.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg p-6 mb-6",children:d.jsx("p",{className:"text-xl font-semibold",children:g.pregunta})}),d.jsx("div",{className:"space-y-3",children:g.opciones.map((N,M)=>d.jsx("button",{onClick:()=>x(M),disabled:a!==null,className:`w-full text-left p-4 rounded-lg font-medium transition-all transform hover:scale-[1.02] ${C(M)}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:N}),i&&M===g.respuestaCorrecta&&d.jsx(g6,{className:"w-6 h-6 text-white"}),i&&M===a&&M!==g.respuestaCorrecta&&d.jsx(k6,{className:"w-6 h-6 text-white"})]})},M))}),i&&d.jsx("div",{className:`mt-4 p-4 rounded-lg ${a===g.respuestaCorrecta?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:d.jsx("p",{className:"font-semibold",children:a===g.respuestaCorrecta?"Correcto! ":"Incorrecto! "})})]})})}),d.jsx("div",{className:"lg:col-span-1",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 sticky top-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(po,{className:"w-6 h-6 text-yellow-500"}),d.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Top 10 Semanal"})]}),d.jsx("div",{className:"space-y-2",children:qz.map(N=>d.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${N.posicion<=3?"bg-gradient-to-r from-yellow-100 to-yellow-50 dark:from-yellow-900/30 dark:to-yellow-800/20":"bg-gray-50 dark:bg-gray-700/50"}`,children:[d.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full font-bold ${N.posicion===1?"bg-yellow-500 text-white":N.posicion===2?"bg-gray-400 text-white":N.posicion===3?"bg-orange-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:N.posicion}),d.jsx("span",{className:"text-2xl",children:N.avatar}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-gray-800 dark:text-white",children:N.nombre}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[N.puntos," pts"]})]})]},N.posicion))}),d.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:d.jsx("p",{className:"text-xs text-center text-blue-700 dark:text-blue-300",children:" El ranking se actualiza cada lunes"})})]})})]})}function $z(){const[t,e]=B.useState("snake");return d.jsxs(d.Fragment,{children:[d.jsx(Il,{}),d.jsxs("main",{className:"container-app py-6 pb-24 md:pb-6",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-2 text-gray-800 dark:text-white",children:" Sala de Espera"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Divertite mientras espers que se arme el partido!"})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg mb-6",children:[d.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("button",{onClick:()=>e("snake"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition-all ${t==="snake"?"bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-t-lg":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[d.jsx(bl,{className:"w-5 h-5"}),d.jsx("span",{children:"Snake Futbolero"})]}),d.jsxs("button",{onClick:()=>e("trivia"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition-all ${t==="trivia"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-t-lg":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[d.jsx(p6,{className:"w-5 h-5"}),d.jsx("span",{children:"Trivia de Ftbol"})]})]}),d.jsx("div",{className:"p-2 md:p-6",children:t==="snake"?d.jsx(Wz,{}):d.jsx(Hz,{})})]}),d.jsxs("div",{className:"bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 rounded-lg p-6 text-white text-center shadow-xl",children:[d.jsx("p",{className:"text-lg font-semibold mb-2",children:" Calent antes del partido!"}),d.jsx("p",{className:"text-sm opacity-90",children:"Entrenamiento mental mientras espers. Los mejores jugadores nunca paran de practicar."})]})]})]})}const Yi=({children:t})=>{const{user:e}=Tr();return e?t:d.jsx(vC,{to:"/login"})};function Gz(){return d.jsx("div",{className:"min-h-screen bg-grass-pattern",children:d.jsxs(m2,{children:[d.jsx(ar,{path:"/login",element:d.jsx(M6,{})}),d.jsx(ar,{path:"/",element:d.jsx(Yi,{children:d.jsx(A6,{})})}),d.jsx(ar,{path:"/perfil",element:d.jsx(Yi,{children:d.jsx(O6,{})})}),d.jsx(ar,{path:"/partidos",element:d.jsx(Yi,{children:d.jsx(Pz,{})})}),d.jsx(ar,{path:"/partidos/crear",element:d.jsx(Yi,{children:d.jsx(K6,{})})}),d.jsx(ar,{path:"/partidos/:id",element:d.jsx(Yi,{children:d.jsx(Lz,{})})}),d.jsx(ar,{path:"/mapa",element:d.jsx(Yi,{children:d.jsx(Oz,{})})}),d.jsx(ar,{path:"/solo-queue",element:d.jsx(Yi,{children:d.jsx(zz,{})})}),d.jsx(ar,{path:"/sala-de-espera",element:d.jsx(Yi,{children:d.jsx($z,{})})}),d.jsx(ar,{path:"*",element:d.jsx(vC,{to:"/"})})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});yg.createRoot(document.getElementById("root")).render(d.jsx(ab.StrictMode,{children:d.jsx(w2,{children:d.jsx(P6,{children:d.jsx(h6,{children:d.jsx(Gz,{})})})})}));
